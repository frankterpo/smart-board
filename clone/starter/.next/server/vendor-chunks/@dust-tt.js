"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@dust-tt";
exports.ids = ["vendor-chunks/@dust-tt"];
exports.modules = {

/***/ "(rsc)/./node_modules/@dust-tt/client/dist/client.esm.js":
/*!*********************************************************!*\
  !*** ./node_modules/@dust-tt/client/dist/client.esm.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIErrorSchema: () => (/* binding */ APIErrorSchema),\n/* harmony export */   ActionApprovalStateSchema: () => (/* binding */ ActionApprovalStateSchema),\n/* harmony export */   AgentConfigurationViewSchema: () => (/* binding */ AgentConfigurationViewSchema),\n/* harmony export */   AppsCheckRequestSchema: () => (/* binding */ AppsCheckRequestSchema),\n/* harmony export */   AppsCheckResponseSchema: () => (/* binding */ AppsCheckResponseSchema),\n/* harmony export */   BaseSearchBodySchema: () => (/* binding */ BaseSearchBodySchema),\n/* harmony export */   BlockedActionsResponseSchema: () => (/* binding */ BlockedActionsResponseSchema),\n/* harmony export */   BrowseResultResourceSchema: () => (/* binding */ BrowseResultResourceSchema),\n/* harmony export */   CONTENT_NODE_MIME_TYPES: () => (/* binding */ CONTENT_NODE_MIME_TYPES),\n/* harmony export */   CancelMessageGenerationRequestSchema: () => (/* binding */ CancelMessageGenerationRequestSchema),\n/* harmony export */   CancelMessageGenerationResponseSchema: () => (/* binding */ CancelMessageGenerationResponseSchema),\n/* harmony export */   ClientSideMCPServerNameSchema: () => (/* binding */ ClientSideMCPServerNameSchema),\n/* harmony export */   ContentNodeSchema: () => (/* binding */ ContentNodeSchema),\n/* harmony export */   ContentNodeTypeSchema: () => (/* binding */ ContentNodeTypeSchema),\n/* harmony export */   ContentNodeWithParentSchema: () => (/* binding */ ContentNodeWithParentSchema),\n/* harmony export */   ContentNodesViewTypeSchema: () => (/* binding */ ContentNodesViewTypeSchema),\n/* harmony export */   ConversationSchema: () => (/* binding */ ConversationSchema),\n/* harmony export */   CoreAPIErrorSchema: () => (/* binding */ CoreAPIErrorSchema),\n/* harmony export */   CoreAPITokenTypeSchema: () => (/* binding */ CoreAPITokenTypeSchema),\n/* harmony export */   CreateConversationResponseSchema: () => (/* binding */ CreateConversationResponseSchema),\n/* harmony export */   CreateGenericAgentConfigurationRequestSchema: () => (/* binding */ CreateGenericAgentConfigurationRequestSchema),\n/* harmony export */   CreateGenericAgentConfigurationResponseSchema: () => (/* binding */ CreateGenericAgentConfigurationResponseSchema),\n/* harmony export */   DATA_SOURCE_FOLDER_SPREADSHEET_MIME_TYPE: () => (/* binding */ DATA_SOURCE_FOLDER_SPREADSHEET_MIME_TYPE),\n/* harmony export */   DATA_SOURCE_MIME_TYPE: () => (/* binding */ DATA_SOURCE_MIME_TYPE),\n/* harmony export */   DATA_WAREHOUSE_MIME_TYPE: () => (/* binding */ DATA_WAREHOUSE_MIME_TYPE),\n/* harmony export */   DataSourceContentNodeSchema: () => (/* binding */ DataSourceContentNodeSchema),\n/* harmony export */   DataSourceSearchQuerySchema: () => (/* binding */ DataSourceSearchQuerySchema),\n/* harmony export */   DataSourceViewContentNodeSchema: () => (/* binding */ DataSourceViewContentNodeSchema),\n/* harmony export */   DataSourceViewResponseSchema: () => (/* binding */ DataSourceViewResponseSchema),\n/* harmony export */   DatabaseSchemaResourceSchema: () => (/* binding */ DatabaseSchemaResourceSchema),\n/* harmony export */   DeleteFolderResponseSchema: () => (/* binding */ DeleteFolderResponseSchema),\n/* harmony export */   DustAPI: () => (/* binding */ DustAPI),\n/* harmony export */   DustAppConfigTypeSchema: () => (/* binding */ DustAppConfigTypeSchema),\n/* harmony export */   DustAppRunBlockExecutionEventSchema: () => (/* binding */ DustAppRunBlockExecutionEventSchema),\n/* harmony export */   DustAppRunBlockStatusEventSchema: () => (/* binding */ DustAppRunBlockStatusEventSchema),\n/* harmony export */   DustAppRunErroredEventSchema: () => (/* binding */ DustAppRunErroredEventSchema),\n/* harmony export */   DustAppRunFinalEventSchema: () => (/* binding */ DustAppRunFinalEventSchema),\n/* harmony export */   DustAppRunFunctionCallArgumentsTokensEventSchema: () => (/* binding */ DustAppRunFunctionCallArgumentsTokensEventSchema),\n/* harmony export */   DustAppRunFunctionCallEventSchema: () => (/* binding */ DustAppRunFunctionCallEventSchema),\n/* harmony export */   DustAppRunReasoningItemEventSchema: () => (/* binding */ DustAppRunReasoningItemEventSchema),\n/* harmony export */   DustAppRunReasoningTokensEventSchema: () => (/* binding */ DustAppRunReasoningTokensEventSchema),\n/* harmony export */   DustAppRunRunStatusEventSchema: () => (/* binding */ DustAppRunRunStatusEventSchema),\n/* harmony export */   DustAppRunTokensEventSchema: () => (/* binding */ DustAppRunTokensEventSchema),\n/* harmony export */   DustAppTypeSchema: () => (/* binding */ DustAppTypeSchema),\n/* harmony export */   DustMcpServerTransport: () => (/* binding */ DustMcpServerTransport),\n/* harmony export */   Err: () => (/* binding */ Err),\n/* harmony export */   ExampleRowsResourceSchema: () => (/* binding */ ExampleRowsResourceSchema),\n/* harmony export */   ExtractQueryResourceSchema: () => (/* binding */ ExtractQueryResourceSchema),\n/* harmony export */   ExtractResultResourceSchema: () => (/* binding */ ExtractResultResourceSchema),\n/* harmony export */   FileTypeSchema: () => (/* binding */ FileTypeSchema),\n/* harmony export */   FileTypeWithUploadUrlSchema: () => (/* binding */ FileTypeWithUploadUrlSchema),\n/* harmony export */   FileUploadRequestResponseSchema: () => (/* binding */ FileUploadRequestResponseSchema),\n/* harmony export */   FileUploadUrlRequestSchema: () => (/* binding */ FileUploadUrlRequestSchema),\n/* harmony export */   FileUploadedRequestResponseSchema: () => (/* binding */ FileUploadedRequestResponseSchema),\n/* harmony export */   GenerationTokensEventSchema: () => (/* binding */ GenerationTokensEventSchema),\n/* harmony export */   GetActiveMemberEmailsInWorkspaceResponseSchema: () => (/* binding */ GetActiveMemberEmailsInWorkspaceResponseSchema),\n/* harmony export */   GetAgentConfigurationsResponseSchema: () => (/* binding */ GetAgentConfigurationsResponseSchema),\n/* harmony export */   GetAppsResponseSchema: () => (/* binding */ GetAppsResponseSchema),\n/* harmony export */   GetConversationResponseSchema: () => (/* binding */ GetConversationResponseSchema),\n/* harmony export */   GetConversationsResponseSchema: () => (/* binding */ GetConversationsResponseSchema),\n/* harmony export */   GetDataSourcesResponseSchema: () => (/* binding */ GetDataSourcesResponseSchema),\n/* harmony export */   GetFeedbacksResponseSchema: () => (/* binding */ GetFeedbacksResponseSchema),\n/* harmony export */   GetFolderResponseSchema: () => (/* binding */ GetFolderResponseSchema),\n/* harmony export */   GetFoldersResponseSchema: () => (/* binding */ GetFoldersResponseSchema),\n/* harmony export */   GetMCPServerViewsQuerySchema: () => (/* binding */ GetMCPServerViewsQuerySchema),\n/* harmony export */   GetMCPServerViewsResponseSchema: () => (/* binding */ GetMCPServerViewsResponseSchema),\n/* harmony export */   GetMCPViewsRequestSchema: () => (/* binding */ GetMCPViewsRequestSchema),\n/* harmony export */   GetOrPatchAgentConfigurationResponseSchema: () => (/* binding */ GetOrPatchAgentConfigurationResponseSchema),\n/* harmony export */   GetSpacesResponseSchema: () => (/* binding */ GetSpacesResponseSchema),\n/* harmony export */   GetWorkspaceFeatureFlagsResponseSchema: () => (/* binding */ GetWorkspaceFeatureFlagsResponseSchema),\n/* harmony export */   GetWorkspaceUsageRequestSchema: () => (/* binding */ GetWorkspaceUsageRequestSchema),\n/* harmony export */   GetWorkspaceVerifiedDomainsResponseSchema: () => (/* binding */ GetWorkspaceVerifiedDomainsResponseSchema),\n/* harmony export */   HeartbeatMCPResponseSchema: () => (/* binding */ HeartbeatMCPResponseSchema),\n/* harmony export */   INCLUDABLE_INTERNAL_CONTENT_NODE_MIME_TYPES: () => (/* binding */ INCLUDABLE_INTERNAL_CONTENT_NODE_MIME_TYPES),\n/* harmony export */   INCLUDABLE_INTERNAL_MIME_TYPES_VALUES: () => (/* binding */ INCLUDABLE_INTERNAL_MIME_TYPES_VALUES),\n/* harmony export */   INTERNAL_MIME_TYPES: () => (/* binding */ INTERNAL_MIME_TYPES),\n/* harmony export */   INTERNAL_MIME_TYPES_VALUES: () => (/* binding */ INTERNAL_MIME_TYPES_VALUES),\n/* harmony export */   ImportAppsResponseSchema: () => (/* binding */ ImportAppsResponseSchema),\n/* harmony export */   IncludeQueryResourceSchema: () => (/* binding */ IncludeQueryResourceSchema),\n/* harmony export */   IncludeResultResourceSchema: () => (/* binding */ IncludeResultResourceSchema),\n/* harmony export */   MCPProgressNotificationSchema: () => (/* binding */ MCPProgressNotificationSchema),\n/* harmony export */   MeResponseSchema: () => (/* binding */ MeResponseSchema),\n/* harmony export */   NotificationCanvasFileContentSchema: () => (/* binding */ NotificationCanvasFileContentSchema),\n/* harmony export */   Ok: () => (/* binding */ Ok),\n/* harmony export */   PatchAgentConfigurationRequestSchema: () => (/* binding */ PatchAgentConfigurationRequestSchema),\n/* harmony export */   PatchDataSourceViewRequestSchema: () => (/* binding */ PatchDataSourceViewRequestSchema),\n/* harmony export */   PostAppsRequestSchema: () => (/* binding */ PostAppsRequestSchema),\n/* harmony export */   PostContentFragmentResponseSchema: () => (/* binding */ PostContentFragmentResponseSchema),\n/* harmony export */   PostConversationsResponseSchema: () => (/* binding */ PostConversationsResponseSchema),\n/* harmony export */   PostDataSourceDocumentRequestSchema: () => (/* binding */ PostDataSourceDocumentRequestSchema),\n/* harmony export */   PostMCPRequestsRequestQuerySchema: () => (/* binding */ PostMCPRequestsRequestQuerySchema),\n/* harmony export */   PostMCPResultsResponseSchema: () => (/* binding */ PostMCPResultsResponseSchema),\n/* harmony export */   PostMessageFeedbackResponseSchema: () => (/* binding */ PostMessageFeedbackResponseSchema),\n/* harmony export */   PostSpaceMembersRequestBodySchema: () => (/* binding */ PostSpaceMembersRequestBodySchema),\n/* harmony export */   PostTableParentsRequestSchema: () => (/* binding */ PostTableParentsRequestSchema),\n/* harmony export */   PostUserMessageResponseSchema: () => (/* binding */ PostUserMessageResponseSchema),\n/* harmony export */   PostWorkspaceSearchResponseBodySchema: () => (/* binding */ PostWorkspaceSearchResponseBodySchema),\n/* harmony export */   ProgressNotificationContentSchema: () => (/* binding */ ProgressNotificationContentSchema),\n/* harmony export */   ProgressNotificationOutputSchema: () => (/* binding */ ProgressNotificationOutputSchema),\n/* harmony export */   PublicContentFragmentWithContentSchema: () => (/* binding */ PublicContentFragmentWithContentSchema),\n/* harmony export */   PublicContentFragmentWithFileIdSchema: () => (/* binding */ PublicContentFragmentWithFileIdSchema),\n/* harmony export */   PublicHeartbeatMCPRequestBodySchema: () => (/* binding */ PublicHeartbeatMCPRequestBodySchema),\n/* harmony export */   PublicPostContentFragmentRequestBodySchema: () => (/* binding */ PublicPostContentFragmentRequestBodySchema),\n/* harmony export */   PublicPostConversationsRequestBodySchema: () => (/* binding */ PublicPostConversationsRequestBodySchema),\n/* harmony export */   PublicPostEditMessagesRequestBodySchema: () => (/* binding */ PublicPostEditMessagesRequestBodySchema),\n/* harmony export */   PublicPostMCPResultsRequestBodySchema: () => (/* binding */ PublicPostMCPResultsRequestBodySchema),\n/* harmony export */   PublicPostMessageFeedbackRequestBodySchema: () => (/* binding */ PublicPostMessageFeedbackRequestBodySchema),\n/* harmony export */   PublicPostMessagesRequestBodySchema: () => (/* binding */ PublicPostMessagesRequestBodySchema),\n/* harmony export */   PublicRegisterMCPRequestBodySchema: () => (/* binding */ PublicRegisterMCPRequestBodySchema),\n/* harmony export */   QueryWritingInstructionsResourceSchema: () => (/* binding */ QueryWritingInstructionsResourceSchema),\n/* harmony export */   ReasoningSuccessOutputSchema: () => (/* binding */ ReasoningSuccessOutputSchema),\n/* harmony export */   RegisterMCPResponseSchema: () => (/* binding */ RegisterMCPResponseSchema),\n/* harmony export */   RetrievalDocumentTypeSchema: () => (/* binding */ RetrievalDocumentTypeSchema),\n/* harmony export */   RetryMessageResponseSchema: () => (/* binding */ RetryMessageResponseSchema),\n/* harmony export */   RunAgentQueryResourceSchema: () => (/* binding */ RunAgentQueryResourceSchema),\n/* harmony export */   RunAgentResultResourceSchema: () => (/* binding */ RunAgentResultResourceSchema),\n/* harmony export */   RunAppResponseSchema: () => (/* binding */ RunAppResponseSchema),\n/* harmony export */   SearchDataSourceViewsRequestSchema: () => (/* binding */ SearchDataSourceViewsRequestSchema),\n/* harmony export */   SearchDataSourceViewsResponseSchema: () => (/* binding */ SearchDataSourceViewsResponseSchema),\n/* harmony export */   SearchQueryResourceSchema: () => (/* binding */ SearchQueryResourceSchema),\n/* harmony export */   SearchRequestBodySchema: () => (/* binding */ SearchRequestBodySchema),\n/* harmony export */   SearchResultResourceSchema: () => (/* binding */ SearchResultResourceSchema),\n/* harmony export */   SearchWarningCodeSchema: () => (/* binding */ SearchWarningCodeSchema),\n/* harmony export */   TOOL_RUNNING_LABEL: () => (/* binding */ TOOL_RUNNING_LABEL),\n/* harmony export */   TokenizeResponseSchema: () => (/* binding */ TokenizeResponseSchema),\n/* harmony export */   ToolsetsResultResourceSchema: () => (/* binding */ ToolsetsResultResourceSchema),\n/* harmony export */   UpsertDataSourceFolderRequestSchema: () => (/* binding */ UpsertDataSourceFolderRequestSchema),\n/* harmony export */   UpsertDatabaseTableRequestSchema: () => (/* binding */ UpsertDatabaseTableRequestSchema),\n/* harmony export */   UpsertFolderResponseSchema: () => (/* binding */ UpsertFolderResponseSchema),\n/* harmony export */   UpsertTableFromCsvRequestSchema: () => (/* binding */ UpsertTableFromCsvRequestSchema),\n/* harmony export */   UpsertTableRowsRequestSchema: () => (/* binding */ UpsertTableRowsRequestSchema),\n/* harmony export */   ValidateActionRequestBodySchema: () => (/* binding */ ValidateActionRequestBodySchema),\n/* harmony export */   ValidateActionResponseSchema: () => (/* binding */ ValidateActionResponseSchema),\n/* harmony export */   ValidateMemberRequestSchema: () => (/* binding */ ValidateMemberRequestSchema),\n/* harmony export */   WarningResourceSchema: () => (/* binding */ WarningResourceSchema),\n/* harmony export */   WebsearchQueryResourceSchema: () => (/* binding */ WebsearchQueryResourceSchema),\n/* harmony export */   WebsearchResultResourceSchema: () => (/* binding */ WebsearchResultResourceSchema),\n/* harmony export */   WebsearchResultSchema: () => (/* binding */ WebsearchResultSchema),\n/* harmony export */   WorkspaceDomainSchema: () => (/* binding */ WorkspaceDomainSchema),\n/* harmony export */   assertNever: () => (/* binding */ assertNever),\n/* harmony export */   getProviderFromRetrievedDocument: () => (/* binding */ getProviderFromRetrievedDocument),\n/* harmony export */   getTitleFromRetrievedDocument: () => (/* binding */ getTitleFromRetrievedDocument),\n/* harmony export */   isAgentMention: () => (/* binding */ isAgentMention),\n/* harmony export */   isBrowseResultResourceType: () => (/* binding */ isBrowseResultResourceType),\n/* harmony export */   isCanvasFileContentOutput: () => (/* binding */ isCanvasFileContentOutput),\n/* harmony export */   isConnectorProvider: () => (/* binding */ isConnectorProvider),\n/* harmony export */   isConnectorsAPIError: () => (/* binding */ isConnectorsAPIError),\n/* harmony export */   isDatabaseSchemaResourceType: () => (/* binding */ isDatabaseSchemaResourceType),\n/* harmony export */   isDustMimeType: () => (/* binding */ isDustMimeType),\n/* harmony export */   isExampleRowsResourceType: () => (/* binding */ isExampleRowsResourceType),\n/* harmony export */   isExtractQueryResourceType: () => (/* binding */ isExtractQueryResourceType),\n/* harmony export */   isExtractResultResourceType: () => (/* binding */ isExtractResultResourceType),\n/* harmony export */   isFolder: () => (/* binding */ isFolder),\n/* harmony export */   isImageProgressOutput: () => (/* binding */ isImageProgressOutput),\n/* harmony export */   isIncludableInternalMimeType: () => (/* binding */ isIncludableInternalMimeType),\n/* harmony export */   isIncludeQueryResourceType: () => (/* binding */ isIncludeQueryResourceType),\n/* harmony export */   isIncludeResultResourceType: () => (/* binding */ isIncludeResultResourceType),\n/* harmony export */   isMCPProgressNotificationType: () => (/* binding */ isMCPProgressNotificationType),\n/* harmony export */   isMCPServerPersonalAuthRequiredError: () => (/* binding */ isMCPServerPersonalAuthRequiredError),\n/* harmony export */   isQueryWritingInstructionsResourceType: () => (/* binding */ isQueryWritingInstructionsResourceType),\n/* harmony export */   isReasoningSuccessOutput: () => (/* binding */ isReasoningSuccessOutput),\n/* harmony export */   isResourceWithName: () => (/* binding */ isResourceWithName),\n/* harmony export */   isRunAgentQueryResourceType: () => (/* binding */ isRunAgentQueryResourceType),\n/* harmony export */   isRunAgentResultResourceType: () => (/* binding */ isRunAgentResultResourceType),\n/* harmony export */   isSearchQueryResourceType: () => (/* binding */ isSearchQueryResourceType),\n/* harmony export */   isSearchResultResourceType: () => (/* binding */ isSearchResultResourceType),\n/* harmony export */   isSqlQueryOutput: () => (/* binding */ isSqlQueryOutput),\n/* harmony export */   isSupportedFileContentType: () => (/* binding */ isSupportedFileContentType),\n/* harmony export */   isSupportedImageContentType: () => (/* binding */ isSupportedImageContentType),\n/* harmony export */   isSupportedPlainTextContentType: () => (/* binding */ isSupportedPlainTextContentType),\n/* harmony export */   isThinkingOutput: () => (/* binding */ isThinkingOutput),\n/* harmony export */   isToolGeneratedFile: () => (/* binding */ isToolGeneratedFile),\n/* harmony export */   isToolsetsResultResourceType: () => (/* binding */ isToolsetsResultResourceType),\n/* harmony export */   isWarningResourceType: () => (/* binding */ isWarningResourceType),\n/* harmony export */   isWebsearchQueryResourceType: () => (/* binding */ isWebsearchQueryResourceType),\n/* harmony export */   isWebsearchResultResourceType: () => (/* binding */ isWebsearchResultResourceType),\n/* harmony export */   isWebsite: () => (/* binding */ isWebsite),\n/* harmony export */   removeNulls: () => (/* binding */ removeNulls),\n/* harmony export */   supportedFileExtensions: () => (/* binding */ supportedFileExtensions),\n/* harmony export */   supportedImageFileFormats: () => (/* binding */ supportedImageFileFormats),\n/* harmony export */   supportedOtherFileFormats: () => (/* binding */ supportedOtherFileFormats)\n/* harmony export */ });\n/* harmony import */ var eventsource_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! eventsource-parser */ \"(rsc)/./node_modules/eventsource-parser/dist/index.js\");\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment-timezone */ \"(rsc)/./node_modules/moment-timezone/index.js\");\n/* harmony import */ var moment_timezone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment_timezone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/@dust-tt/client/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var event_source_polyfill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! event-source-polyfill */ \"(rsc)/./node_modules/event-source-polyfill/src/eventsource.js\");\n/* harmony import */ var event_source_polyfill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(event_source_polyfill__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n\nfunction _OverloadYield(e, d) {\n  this.v = e, this.k = d;\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nfunction _awaitAsyncGenerator(e) {\n  return new _OverloadYield(e, 0);\n}\nfunction _createForOfIteratorHelperLoose(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (t) return (t = t.call(r)).next.bind(t);\n  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n    t && (r = t);\n    var o = 0;\n    return function () {\n      return o >= r.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: r[o++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function (t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == typeof h && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function (t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator.return && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(typeof e + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function () {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function (e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function (t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function (t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    catch: function (t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nfunction _wrapAsyncGenerator(e) {\n  return function () {\n    return new AsyncGenerator(e.apply(this, arguments));\n  };\n}\nfunction AsyncGenerator(e) {\n  var r, t;\n  function resume(r, t) {\n    try {\n      var n = e[r](t),\n        o = n.value,\n        u = o instanceof _OverloadYield;\n      Promise.resolve(u ? o.v : o).then(function (t) {\n        if (u) {\n          var i = \"return\" === r ? \"return\" : \"next\";\n          if (!o.k || t.done) return resume(i, t);\n          t = e[i](t).value;\n        }\n        settle(n.done ? \"return\" : \"normal\", t);\n      }, function (e) {\n        resume(\"throw\", e);\n      });\n    } catch (e) {\n      settle(\"throw\", e);\n    }\n  }\n  function settle(e, n) {\n    switch (e) {\n      case \"return\":\n        r.resolve({\n          value: n,\n          done: !0\n        });\n        break;\n      case \"throw\":\n        r.reject(n);\n        break;\n      default:\n        r.resolve({\n          value: n,\n          done: !1\n        });\n    }\n    (r = r.next) ? resume(r.key, r.arg) : t = null;\n  }\n  this._invoke = function (e, n) {\n    return new Promise(function (o, u) {\n      var i = {\n        key: e,\n        arg: n,\n        resolve: o,\n        reject: u,\n        next: null\n      };\n      t ? t = t.next = i : (r = t = i, resume(e, n));\n    });\n  }, \"function\" != typeof e.return && (this.return = void 0);\n}\nAsyncGenerator.prototype[\"function\" == typeof Symbol && Symbol.asyncIterator || \"@@asyncIterator\"] = function () {\n  return this;\n}, AsyncGenerator.prototype.next = function (e) {\n  return this._invoke(\"next\", e);\n}, AsyncGenerator.prototype.throw = function (e) {\n  return this._invoke(\"throw\", e);\n}, AsyncGenerator.prototype.return = function (e) {\n  return this._invoke(\"return\", e);\n};\n\nvar MCPInternalActionIconSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"ActionBrainIcon\", \"ActionCloudArrowLeftRightIcon\", \"ActionDocumentTextIcon\", \"ActionEmotionLaughIcon\", \"ActionGitBranchIcon\", \"ActionGlobeAltIcon\", \"ActionImageIcon\", \"ActionLightbulbIcon\", \"ActionLockIcon\", \"ActionMagnifyingGlassIcon\", \"ActionRobotIcon\", \"ActionScanIcon\", \"ActionTableIcon\", \"ActionTimeIcon\", \"CommandLineIcon\", \"GcalLogo\", \"GmailLogo\", \"GithubLogo\", \"GoogleSpreadsheetLogo\", \"HubspotLogo\", \"FreshserviceLogo\", \"MondayLogo\", \"OutlookLogo\", \"JiraLogo\", \"LinearLogo\", \"NotionLogo\", \"SalesforceLogo\", \"SlackLogo\", \"StripeLogo\"]);\nvar MCPExternalActionIconSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"ActionArmchairIcon\", \"ActionArrowDownOnSquareIcon\", \"ActionArrowUpOnSquareIcon\", \"ActionAttachmentIcon\", \"ActionBankIcon\", \"ActionBarcodeIcon\", \"ActionBeerIcon\", \"ActionBookOpenIcon\", \"ActionBracesIcon\", \"ActionBrainIcon\", \"ActionBriefcaseIcon\", \"ActionBuildingIcon\", \"ActionCalculatorIcon\", \"ActionCalendarIcon\", \"ActionCalendarCheckIcon\", \"ActionCameraIcon\", \"ActionCarIcon\", \"ActionCardIcon\", \"ActionCheckCircleIcon\", \"ActionClipboardIcon\", \"ActionCloudArrowDownIcon\", \"ActionCloudArrowLeftRightIcon\", \"ActionCloudArrowUpIcon\", \"ActionCodeBlockIcon\", \"ActionCodeBoxIcon\", \"ActionCommandIcon\", \"ActionCommand1Icon\", \"ActionCommunityIcon\", \"ActionCompanyIcon\", \"ActionCubeIcon\", \"ActionCupIcon\", \"ActionCustomerServiceIcon\", \"ActionDashboardIcon\", \"ActionDatabaseIcon\", \"ActionDocumentIcon\", \"ActionDocumentPileIcon\", \"ActionDocumentPlusIcon\", \"ActionDocumentTextIcon\", \"ActionDoubleQuotesIcon\", \"ActionEmotionLaughIcon\", \"ActionExternalLinkIcon\", \"ActionEyeIcon\", \"ActionEyeSlashIcon\", \"ActionFilmIcon\", \"ActionFilterIcon\", \"ActionFingerprintIcon\", \"ActionFireIcon\", \"ActionFlagIcon\", \"ActionFlightLandIcon\", \"ActionFlightTakeoffIcon\", \"ActionFolderIcon\", \"ActionFolderAddIcon\", \"ActionFolderOpenIcon\", \"ActionFullscreenIcon\", \"ActionFullscreenExitIcon\", \"ActionGamepadIcon\", \"ActionGitBranchIcon\", \"ActionGitForkIcon\", \"ActionGlobeIcon\", \"ActionGlobeAltIcon\", \"ActionGraduationCapIcon\", \"ActionHandHeartIcon\", \"ActionHandThumbDownIcon\", \"ActionHandThumbUpIcon\", \"ActionHeartIcon\", \"ActionHomeIcon\", \"ActionHospitalIcon\", \"ActionImageIcon\", \"ActionInboxIcon\", \"ActionIncludeIcon\", \"ActionLayoutIcon\", \"ActionLightbulbIcon\", \"ActionListIcon\", \"ActionListCheckIcon\", \"ActionLockIcon\", \"ActionLogoutIcon\", \"ActionMagicIcon\", \"ActionMagnifyingGlassIcon\", \"ActionMailIcon\", \"ActionMailAiIcon\", \"ActionMailCloseIcon\", \"ActionMapIcon\", \"ActionMapPinIcon\", \"ActionMarkPenIcon\", \"ActionMedalIcon\", \"ActionMegaphoneIcon\", \"ActionMenuIcon\", \"ActionMicIcon\", \"ActionMoonIcon\", \"ActionMovieIcon\", \"ActionNumbersIcon\", \"ActionPaintIcon\", \"ActionPencilSquareIcon\", \"ActionPieChartIcon\", \"ActionPinDistanceIcon\", \"ActionPingPongIcon\", \"ActionPlanetIcon\", \"ActionPlusIcon\", \"ActionPlusCircleIcon\", \"ActionPrinterIcon\", \"ActionPushpinIcon\", \"ActionRainbowIcon\", \"ActionRobotIcon\", \"ActionRocketIcon\", \"ActionSafeIcon\", \"ActionSaveIcon\", \"ActionScalesIcon\", \"ActionScanIcon\", \"ActionSeedlingIcon\", \"ActionServerIcon\", \"ActionShakeHandsIcon\", \"ActionShipIcon\", \"ActionShirtIcon\", \"ActionShoppingBasketIcon\", \"ActionSlideshowIcon\", \"ActionSparklesIcon\", \"ActionSquare3Stack3DIcon\", \"ActionStopSignIcon\", \"ActionStoreIcon\", \"ActionSunIcon\", \"ActionSwordIcon\", \"ActionTableIcon\", \"ActionTagIcon\", \"ActionTestTubeIcon\", \"ActionTimeIcon\", \"ActionTrainIcon\", \"ActionTranslateIcon\", \"ActionTrashIcon\", \"ActionTrophyIcon\", \"ActionTShirtIcon\", \"ActionUmbrellaIcon\", \"ActionUserIcon\", \"ActionUserGroupIcon\", \"ActionVidiconIcon\", \"ActionVolumeUpIcon\", \"ActionXCircleIcon\"]);\n\n/**\n * This function generates mime types for a given provider and resource types.\n * The mime types are in the format `application/vnd.dust.PROVIDER.RESOURCE_TYPE`.\n * Notes:\n * - The underscores in the provider name are stripped in the generated mime type.\n * - The underscores in the resource type are replaced with dashes in the generated mime type.\n */\nfunction generateConnectorRelativeMimeTypes(_ref) {\n  var provider = _ref.provider,\n    resourceTypes = _ref.resourceTypes;\n  return resourceTypes.reduce(function (acc, s) {\n    var _extends2;\n    return _extends({}, acc, (_extends2 = {}, _extends2[s] = \"application/vnd.dust.\" + provider.replace(\"_\", \"\") + \".\" + s.replace(\"_\", \"-\").toLowerCase(), _extends2));\n  }, {});\n}\n// Mime type that represents a datasource.\nvar DATA_SOURCE_MIME_TYPE = \"application/vnd.dust.datasource\";\n// Mime type that represents a data warehouse, like Snowflake or BigQuery.\nvar DATA_WAREHOUSE_MIME_TYPE = \"application/vnd.dust.data-warehouse\";\nvar DATA_SOURCE_FOLDER_SPREADSHEET_MIME_TYPE = \"application/vnd.dust.folder.spreadsheet\";\nvar CONTENT_NODE_MIME_TYPES = {\n  GENERIC: {\n    DATA_SOURCE: DATA_SOURCE_MIME_TYPE,\n    DATA_WAREHOUSE: DATA_WAREHOUSE_MIME_TYPE\n  },\n  FOLDER: {\n    SPREADSHEET: DATA_SOURCE_FOLDER_SPREADSHEET_MIME_TYPE\n  },\n  CONFLUENCE: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"confluence\",\n    resourceTypes: [\"FOLDER\", \"PAGE\", \"SPACE\"]\n  }),\n  GITHUB: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"github\",\n    resourceTypes: [\"REPOSITORY\", \"CODE_ROOT\", \"CODE_DIRECTORY\", \"CODE_FILE\",\n    // ISSUES is the folder containing all issues.\n    \"ISSUES\",\n    // ISSUE is a single issue.\n    \"ISSUE\",\n    // DISCUSSIONS is the folder containing all discussions.\n    \"DISCUSSIONS\",\n    // DISCUSSION is a single discussion.\n    \"DISCUSSION\"]\n  }),\n  GOOGLE_DRIVE: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"google_drive\",\n    // Spreadsheets may contain many sheets, thus resemble folders and are stored as such, but with\n    // the special mimeType below.  For files and sheets, we keep Google's mime types.\n    resourceTypes: [\"SHARED_WITH_ME\", \"FOLDER\", \"SPREADSHEET\"]\n  }),\n  INTERCOM: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"intercom\",\n    resourceTypes: [\"COLLECTION\", \"TEAMS_FOLDER\", \"CONVERSATION\", \"TEAM\", \"ARTICLE\", \"HELP_CENTER\"]\n  }),\n  MICROSOFT: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"microsoft\",\n    // Spreadsheets may contain many sheets, thus resemble folders and are\n    // stored as such, but with the special mimeType below.\n    // For files and sheets, we keep Microsoft's mime types.\n    resourceTypes: [\"FOLDER\", \"SPREADSHEET\"]\n  }),\n  NOTION: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"notion\",\n    resourceTypes: [\"UNKNOWN_FOLDER\", \"SYNCING_FOLDER\", \"DATABASE\", \"PAGE\"]\n  }),\n  SLACK: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"slack\",\n    resourceTypes: [\"CHANNEL\", \"THREAD\", \"MESSAGES\"]\n  }),\n  SNOWFLAKE: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"snowflake\",\n    resourceTypes: [\"DATABASE\", \"SCHEMA\", \"TABLE\"]\n  }),\n  WEBCRAWLER: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"webcrawler\",\n    resourceTypes: [\"FOLDER\"] // pages are upserted as text/html, not an internal mime type\n  }),\n  ZENDESK: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"zendesk\",\n    resourceTypes: [\"BRAND\", \"HELP_CENTER\", \"CATEGORY\", \"ARTICLE\",\n    // TICKETS is the folder containing all tickets.\n    \"TICKETS\",\n    // TICKET is a single ticket.\n    \"TICKET\"]\n  }),\n  BIGQUERY: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"bigquery\",\n    resourceTypes: [\"DATABASE\", \"SCHEMA\", \"TABLE\"]\n  }),\n  SALESFORCE: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"salesforce\",\n    resourceTypes: [\"SYNCED_QUERY_FOLDER\"]\n  }),\n  GONG: /*#__PURE__*/generateConnectorRelativeMimeTypes({\n    provider: \"gong\",\n    resourceTypes: [\"TRANSCRIPT\", \"TRANSCRIPT_FOLDER\"]\n  })\n};\nvar INCLUDABLE_INTERNAL_CONTENT_NODE_MIME_TYPES = {\n  CONFLUENCE: [CONTENT_NODE_MIME_TYPES.CONFLUENCE.PAGE],\n  GITHUB: [CONTENT_NODE_MIME_TYPES.GITHUB.ISSUE, CONTENT_NODE_MIME_TYPES.GITHUB.DISCUSSION],\n  GOOGLE_DRIVE: [],\n  INTERCOM: [CONTENT_NODE_MIME_TYPES.INTERCOM.CONVERSATION, CONTENT_NODE_MIME_TYPES.INTERCOM.ARTICLE],\n  MICROSOFT: [],\n  NOTION: [CONTENT_NODE_MIME_TYPES.NOTION.PAGE],\n  SLACK: [CONTENT_NODE_MIME_TYPES.SLACK.THREAD, CONTENT_NODE_MIME_TYPES.SLACK.MESSAGES],\n  SNOWFLAKE: [],\n  WEBCRAWLER: [],\n  ZENDESK: [CONTENT_NODE_MIME_TYPES.ZENDESK.TICKET, CONTENT_NODE_MIME_TYPES.ZENDESK.ARTICLE],\n  BIGQUERY: [],\n  SALESFORCE: [],\n  GONG: []\n};\nfunction generateToolMimeTypes(_ref2) {\n  var category = _ref2.category,\n    resourceTypes = _ref2.resourceTypes;\n  return resourceTypes.reduce(function (acc, s) {\n    var _extends3;\n    return _extends({}, acc, (_extends3 = {}, _extends3[s] = \"application/vnd.dust.\" + category.replace(/_/g, \"-\").toLowerCase() + \".\" + s.replace(/_/g, \"-\").toLowerCase(), _extends3));\n  }, {});\n}\nvar TOOL_MIME_TYPES = {\n  TOOL_INPUT: /*#__PURE__*/generateToolMimeTypes({\n    category: \"TOOL_INPUT\",\n    resourceTypes: [\"DATA_SOURCE\", \"DATA_WAREHOUSE\", \"TABLE\", \"AGENT\", \"STRING\", \"NUMBER\", \"BOOLEAN\", \"ENUM\", \"LIST\", \"REASONING_MODEL\", \"DUST_APP\", \"NULLABLE_TIME_FRAME\", \"JSON_SCHEMA\"]\n  }),\n  TOOL_OUTPUT: /*#__PURE__*/generateToolMimeTypes({\n    category: \"TOOL_OUTPUT\",\n    resourceTypes: [\"BROWSE_RESULT\", \"DATA_SOURCE_SEARCH_QUERY\", \"DATA_SOURCE_SEARCH_RESULT\", \"FILESYSTEM_PATH\", \"DATA_SOURCE_NODE_LIST\", \"DATA_SOURCE_NODE_CONTENT\", \"DATA_SOURCE_INCLUDE_QUERY\", \"DATA_SOURCE_INCLUDE_RESULT\", \"EXTRACT_QUERY\", \"EXTRACT_RESULT\",\n    // File generated by the tool.\n    \"FILE\",\n    // Final output of the reasoning when successful with the non-CoT tokens.\n    \"REASONING_SUCCESS\",\n    // Content of a SQL query formulated by the model.\n    \"SQL_QUERY\",\n    // Error when executing a query.\n    \"EXECUTE_TABLES_QUERY_ERROR\",\n    // Generic thinking tokens.\n    \"THINKING\", \"DATABASE_SCHEMA\", \"QUERY_WRITING_INSTRUCTIONS\", \"EXAMPLE_ROWS\", \"TOOL_MARKER\", \"WEBSEARCH_QUERY\", \"WEBSEARCH_RESULT\", \"RUN_AGENT_RESULT\", \"RUN_AGENT_QUERY\", \"WARNING\", \"AGENT_CREATION_RESULT\", \"TOOLSET_LIST_RESULT\", \"TOOLSET_DESCRIBE_RESULT\",\n    // Legacy, kept for backwards compatibility.\n    \"GET_DATABASE_SCHEMA_MARKER\", \"EXECUTE_TABLES_QUERY_MARKER\"]\n  })\n};\nvar INTERNAL_MIME_TYPES = /*#__PURE__*/_extends({}, CONTENT_NODE_MIME_TYPES, TOOL_MIME_TYPES);\nvar INTERNAL_MIME_TYPES_VALUES = /*#__PURE__*/Object.values(CONTENT_NODE_MIME_TYPES).flatMap(function (value) {\n  return Object.values(value).map(function (v) {\n    return v;\n  });\n});\nvar INCLUDABLE_INTERNAL_MIME_TYPES_VALUES = /*#__PURE__*/Object.values(INCLUDABLE_INTERNAL_CONTENT_NODE_MIME_TYPES).flatMap(function (value) {\n  return Object.values(value).map(function (v) {\n    return v;\n  });\n});\nfunction isDustMimeType(mimeType) {\n  return INTERNAL_MIME_TYPES_VALUES.includes(mimeType);\n}\nfunction isIncludableInternalMimeType(mimeType) {\n  return INCLUDABLE_INTERNAL_MIME_TYPES_VALUES.includes(mimeType);\n}\n\nvar BaseNotificationParamsSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\nvar NotificationSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  method: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  params: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(BaseNotificationParamsSchema)\n});\nvar ResultSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\n/**\n * Error codes defined by the JSON-RPC specification.\n */\nvar ErrorCode;\n(function (ErrorCode) {\n  // SDK error codes\n  ErrorCode[ErrorCode[\"ConnectionClosed\"] = -32000] = \"ConnectionClosed\";\n  ErrorCode[ErrorCode[\"RequestTimeout\"] = -32001] = \"RequestTimeout\";\n  // Standard JSON-RPC error codes\n  ErrorCode[ErrorCode[\"ParseError\"] = -32700] = \"ParseError\";\n  ErrorCode[ErrorCode[\"InvalidRequest\"] = -32600] = \"InvalidRequest\";\n  ErrorCode[ErrorCode[\"MethodNotFound\"] = -32601] = \"MethodNotFound\";\n  ErrorCode[ErrorCode[\"InvalidParams\"] = -32602] = \"InvalidParams\";\n  ErrorCode[ErrorCode[\"InternalError\"] = -32603] = \"InternalError\";\n})(ErrorCode || (ErrorCode = {}));\n/* Base Metadata */\n/**\n * Base metadata interface for common properties across resources, tools, prompts, and implementations.\n */\nvar BaseMetadataSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  /** Intended for programmatic or logical use, but used as a display name in past specs or fallback */\n  name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * Intended for UI and end-user contexts  optimized to be human-readable and easily understood,\n   * even by those unfamiliar with domain-specific terminology.\n   *\n   * If not provided, the name should be used for display (except for Tool,\n   * where `annotations.title` should be given precedence over using `name`,\n   * if present).\n   */\n  title: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n}).passthrough();\n/* Resources */\n/**\n * The contents of a specific resource or sub-resource.\n */\nvar ResourceContentsSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  /**\n   * The URI of this resource.\n   */\n  uri: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * The MIME type of this resource, if known.\n   */\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\nvar TextResourceContentsSchema = /*#__PURE__*/ResourceContentsSchema.extend({\n  /**\n   * The text of the item. This must only be set if the item can actually be represented as text (not binary data).\n   */\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\n/**\n * A Zod schema for validating Base64 strings that is more performant and\n * robust for very large inputs than the default regex-based check. It avoids\n * stack overflows by using the native `atob` function for validation.\n */\nvar Base64Schema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().refine(function (val) {\n  try {\n    // atob throws a DOMException if the string contains characters\n    // that are not part of the Base64 character set.\n    atob(val);\n    return true;\n  } catch (_unused) {\n    return false;\n  }\n}, {\n  message: \"Invalid Base64 string\"\n});\nvar BlobResourceContentsSchema = /*#__PURE__*/ResourceContentsSchema.extend({\n  /**\n   * A base64-encoded string representing the binary data of the item.\n   */\n  blob: Base64Schema\n});\n/**\n * A known resource that the server is capable of reading.\n */\nvar ResourceSchema = /*#__PURE__*/BaseMetadataSchema.extend({\n  /**\n   * The URI of this resource.\n   */\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * A description of what this resource represents.\n   *\n   * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n   */\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  /**\n   * The MIME type of this resource, if known.\n   */\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n});\n/**\n * Text provided to or from an LLM.\n */\nvar TextContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"text\"),\n  /**\n   * The text content of the message.\n   */\n  text: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\n/**\n * An image provided to or from an LLM.\n */\nvar ImageContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"image\"),\n  /**\n   * The base64-encoded image data.\n   */\n  data: Base64Schema,\n  /**\n   * The MIME type of the image. Different providers may support different image types.\n   */\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\n/**\n * An Audio provided to or from an LLM.\n */\nvar AudioContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"audio\"),\n  /**\n   * The base64-encoded audio data.\n   */\n  data: Base64Schema,\n  /**\n   * The MIME type of the audio. Different providers may support different audio types.\n   */\n  mimeType: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\n/**\n * The contents of a resource, embedded into a prompt or tool call result.\n */\nvar EmbeddedResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"resource\"),\n  resource: zod__WEBPACK_IMPORTED_MODULE_2__.z.union([TextResourceContentsSchema, BlobResourceContentsSchema]),\n  /**\n   * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n   * for notes on _meta usage.\n   */\n  _meta: zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough())\n}).passthrough();\n/**\n * A resource that the server is capable of reading, included in a prompt or tool call result.\n *\n * Note: resource links returned by tools are not guaranteed to appear in the results of `resources/list` requests.\n */\nvar ResourceLinkSchema = /*#__PURE__*/ResourceSchema.extend({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"resource_link\")\n});\n/**\n * A content block that can be used in prompts and tool results.\n */\nvar ContentBlockSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([TextContentSchema, ImageContentSchema, AudioContentSchema, ResourceLinkSchema, EmbeddedResourceSchema]);\n/**\n * The server's response to a tool call.\n */\nvar CallToolResultSchema = /*#__PURE__*/ResultSchema.extend({\n  /**\n   * A list of content objects that represent the result of the tool call.\n   *\n   * If the Tool does not define an outputSchema, this field MUST be present in the result.\n   * For backwards compatibility, this field is always present, but it may be empty.\n   */\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(ContentBlockSchema)[\"default\"]([]),\n  /**\n   * An object containing structured tool output.\n   *\n   * If the Tool defines an outputSchema, this field MUST be present in the result, and contain a JSON object that matches the schema.\n   */\n  structuredContent: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({}).passthrough().optional(),\n  /**\n   * Whether the tool call ended in an error.\n   *\n   * If not set, this is assumed to be false (the call was successful).\n   *\n   * Any errors that originate from the tool SHOULD be reported inside the result\n   * object, with `isError` set to true, _not_ as an MCP protocol-level error\n   * response. Otherwise, the LLM would not be able to see that an error occurred\n   * and self-correct.\n   *\n   * However, any errors in _finding_ the tool, an error indicating that the\n   * server does not support tool calls, or any other exceptional conditions,\n   * should be reported as an MCP error response.\n   */\n  isError: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.optional(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]())\n});\n\n// File generated by the tool during its execution.\nvar ToolGeneratedFileSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.FILE),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  snippet: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n});\nfunction isToolGeneratedFile(outputBlock) {\n  return outputBlock.type === \"resource\" && ToolGeneratedFileSchema.safeParse(outputBlock.resource).success;\n}\n// Thinking tokens generated during the tool execution.\nvar ThinkingOutputSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.THINKING),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nfunction isThinkingOutput(outputBlock) {\n  return outputBlock.type === \"resource\" && ThinkingOutputSchema.safeParse(outputBlock.resource).success;\n}\n// Final output of the reasoning when successful with the non-CoT tokens.\nvar ReasoningSuccessOutputSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.REASONING_SUCCESS),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nfunction isReasoningSuccessOutput(outputBlock) {\n  return outputBlock.type === \"resource\" && ReasoningSuccessOutputSchema.safeParse(outputBlock.resource).success;\n}\n// SQL query generated during the tool execution.\nvar SqlQueryOutputSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.SQL_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nfunction isSqlQueryOutput(outputBlock) {\n  return outputBlock.type === \"resource\" && SqlQueryOutputSchema.safeParse(outputBlock.resource).success;\n}\nvar isResourceWithName = function isResourceWithName(resource) {\n  return \"name\" in resource && typeof resource.name === \"string\";\n};\nvar DatabaseSchemaResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.DATABASE_SCHEMA),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar isDatabaseSchemaResourceType = function isDatabaseSchemaResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && DatabaseSchemaResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar QueryWritingInstructionsResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.QUERY_WRITING_INSTRUCTIONS),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar isQueryWritingInstructionsResourceType = function isQueryWritingInstructionsResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && QueryWritingInstructionsResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar ExampleRowsResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.EXAMPLE_ROWS),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar isExampleRowsResourceType = function isExampleRowsResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && ExampleRowsResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Data source search outputs: query and results.\nvar SearchQueryResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.DATA_SOURCE_SEARCH_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isSearchQueryResourceType = function isSearchQueryResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && SearchQueryResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar SearchResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.DATA_SOURCE_SEARCH_RESULT),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  // Document metadata\n  id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  ref: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  chunks: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  source: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    provider: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n  })\n});\nvar isSearchResultResourceType = function isSearchResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && SearchResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Data source inclusion outputs, query and results\nvar IncludeQueryResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.DATA_SOURCE_INCLUDE_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isIncludeQueryResourceType = function isIncludeQueryResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && IncludeQueryResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar WarningResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.WARNING),\n  warningTitle: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  warningData: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.string(), zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown()).optional(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isWarningResourceType = function isWarningResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && WarningResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar IncludeResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.DATA_SOURCE_INCLUDE_RESULT),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  // Document metadata\n  id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  ref: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  chunks: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  source: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    provider: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n  })\n});\nvar isIncludeResultResourceType = function isIncludeResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && IncludeResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Websearch results.\nvar WebsearchQueryResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.WEBSEARCH_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isWebsearchQueryResourceType = function isWebsearchQueryResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && WebsearchQueryResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar WebsearchResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.WEBSEARCH_RESULT),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  reference: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar isWebsearchResultResourceType = function isWebsearchResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && WebsearchResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Browse results.\nvar BrowseResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.BROWSE_RESULT),\n  requestedUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  // Browsed url, might differ from the requested url\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  responseCode: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  errorMessage: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n});\nvar isBrowseResultResourceType = function isBrowseResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && BrowseResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// RunAgent results.\nvar RunAgentQueryResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.RUN_AGENT_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  childAgentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isRunAgentQueryResourceType = function isRunAgentQueryResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && RunAgentQueryResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar RunAgentResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.RUN_AGENT_RESULT),\n  conversationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  refs: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.string(), zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    description: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n    href: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n    title: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    provider: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })).optional()\n});\nvar isRunAgentResultResourceType = function isRunAgentResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && RunAgentResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Toolsets results.\nvar ToolsetsResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.TOOLSET_LIST_RESULT),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\"),\n  id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar isToolsetsResultResourceType = function isToolsetsResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && ToolsetsResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n// Extract data outputs: query and results.\nvar ExtractQueryResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.EXTRACT_QUERY),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"\")\n});\nvar isExtractQueryResourceType = function isExtractQueryResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && ExtractQueryResourceSchema.safeParse(outputBlock.resource).success;\n};\nvar ExtractResultResourceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(INTERNAL_MIME_TYPES.TOOL_OUTPUT.EXTRACT_RESULT),\n  uri: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  // File metadata\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  snippet: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n});\nvar isExtractResultResourceType = function isExtractResultResourceType(outputBlock) {\n  return outputBlock.type === \"resource\" && ExtractResultResourceSchema.safeParse(outputBlock.resource).success;\n};\n/**\n * Notification output types.\n */\n// Image.\nvar NotificationImageContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"image\"),\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nfunction isImageProgressOutput(output) {\n  return output !== undefined && output.type === \"image\";\n}\n// Canvas file.\nvar NotificationCanvasFileContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"canvas_file\"),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  updatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nfunction isCanvasFileContentOutput(output) {\n  return output !== undefined && output.type === \"canvas_file\";\n}\nvar NotificationTextContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"text\"),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar NotificationRunAgentContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"run_agent\"),\n  childAgentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  conversationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  query: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar ProgressNotificationOutputSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([NotificationImageContentSchema, NotificationCanvasFileContentSchema, NotificationRunAgentContentSchema, NotificationTextContentSchema]).optional();\nvar ProgressNotificationContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  // Required for the MCP protocol.\n  progress: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  total: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  progressToken: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()]),\n  // Custom data.\n  data: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    label: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    output: ProgressNotificationOutputSchema\n  })\n});\nvar MCPProgressNotificationSchema = /*#__PURE__*/NotificationSchema.extend({\n  method: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"notifications/progress\"),\n  params: ProgressNotificationContentSchema\n});\nfunction isMCPProgressNotificationType(notification) {\n  return MCPProgressNotificationSchema.safeParse(notification).success;\n}\n\n// Custom schema to get a string literal type and yet allow any string when parsing\nvar FlexibleEnumSchema = function FlexibleEnumSchema() {\n  return zod__WEBPACK_IMPORTED_MODULE_2__.z.custom(function (val) {\n    return typeof val === \"string\";\n  });\n};\nvar ModelProviderIdSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar ModelLLMIdSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar EmbeddingProviderIdSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar ConnectorsAPIErrorTypeSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar ConnectorsAPIErrorSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: ConnectorsAPIErrorTypeSchema,\n  message: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar ModelIdSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number();\nfunction isConnectorsAPIError(obj) {\n  return typeof obj === \"object\" && obj !== null && \"message\" in obj && typeof obj.message === \"string\" && \"type\" in obj && typeof obj.type === \"string\" && ConnectorsAPIErrorSchema.safeParse(obj).success;\n}\n// Supported content types that are plain text and can be sent as file-less content fragment.\nvar supportedOtherFileFormats = {\n  \"application/msword\": [\".doc\", \".docx\"],\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": [\".doc\", \".docx\"],\n  \"application/vnd.ms-powerpoint\": [\".ppt\", \".pptx\"],\n  \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": [\".ppt\", \".pptx\"],\n  \"application/vnd.google-apps.document\": [],\n  \"application/vnd.google-apps.presentation\": [],\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\": [\".xlsx\"],\n  \"application/vnd.google-apps.spreadsheet\": [],\n  \"application/vnd.ms-excel\": [\".xls\"],\n  \"application/pdf\": [\".pdf\"],\n  \"application/vnd.dust.section.json\": [\".json\"],\n  \"text/comma-separated-values\": [\".csv\"],\n  \"text/csv\": [\".csv\"],\n  \"text/markdown\": [\".md\", \".markdown\"],\n  \"text/plain\": [\".txt\", \".log\", \".cfg\", \".conf\"],\n  \"text/tab-separated-values\": [\".tsv\"],\n  \"text/tsv\": [\".tsv\"],\n  \"text/vnd.dust.attachment.slack.thread\": [\".txt\"],\n  \"text/html\": [\".html\", \".htm\", \".xhtml\", \".xhtml+xml\"],\n  \"text/xml\": [\".xml\"],\n  \"text/calendar\": [\".ics\"],\n  \"text/css\": [\".css\"],\n  \"text/javascript\": [\".js\", \".mjs\", \".jsx\"],\n  \"text/typescript\": [\".ts\", \".tsx\"],\n  \"application/json\": [\".json\"],\n  \"application/xml\": [\".xml\"],\n  \"application/x-sh\": [\".sh\"],\n  \"text/x-sh\": [\".sh\"],\n  \"text/x-python\": [\".py\"],\n  \"text/x-python-script\": [\".py\"],\n  \"application/x-yaml\": [\".yaml\", \".yml\"],\n  \"text/yaml\": [\".yaml\", \".yml\"],\n  \"text/vnd.yaml\": [\".yaml\", \".yml\"],\n  \"text/x-c\": [\".c\", \".cc\", \".cpp\", \".cxx\", \".dic\", \".h\", \".hh\"],\n  \"text/x-csharp\": [\".cs\"],\n  \"text/x-java-source\": [\".java\"],\n  \"text/x-php\": [\".php\"],\n  \"text/x-ruby\": [\".rb\"],\n  \"text/x-sql\": [\".sql\"],\n  \"text/x-swift\": [\".swift\"],\n  \"text/x-rust\": [\".rs\"],\n  \"text/x-go\": [\".go\"],\n  \"text/x-kotlin\": [\".kt\", \".kts\"],\n  \"text/x-scala\": [\".scala\"],\n  \"text/x-groovy\": [\".groovy\"],\n  \"text/x-perl\": [\".pl\", \".pm\"],\n  \"text/x-perl-script\": [\".pl\", \".pm\"],\n  \"application/octet-stream\": []\n};\n// Supported content types for images.\nvar supportedImageFileFormats = {\n  \"image/jpeg\": [\".jpg\", \".jpeg\"],\n  \"image/png\": [\".png\"],\n  \"image/gif\": [\".gif\"],\n  \"image/webp\": [\".webp\"]\n};\nvar supportedOtherContentTypes = /*#__PURE__*/Object.keys(supportedOtherFileFormats);\nvar supportedImageContentTypes = /*#__PURE__*/Object.keys(supportedImageFileFormats);\nvar supportedFileExtensions = /*#__PURE__*/[].concat(/*#__PURE__*/Object.keys(supportedOtherFileFormats), /*#__PURE__*/Object.keys(supportedImageFileFormats));\nvar supportedUploadableContentType = /*#__PURE__*/[].concat(supportedOtherContentTypes, supportedImageContentTypes);\nvar SupportedContentFragmentTypeSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar SupportedFileContentFragmentTypeSchema = /*#__PURE__*/FlexibleEnumSchema();\nfunction isSupportedFileContentType(contentType) {\n  return supportedUploadableContentType.includes(contentType);\n}\nfunction isSupportedPlainTextContentType(contentType) {\n  return supportedOtherContentTypes.includes(contentType);\n}\nfunction isSupportedImageContentType(contentType) {\n  return supportedImageContentTypes.includes(contentType);\n}\nvar UserMessageOriginSchema = /*#__PURE__*/FlexibleEnumSchema().or(zod__WEBPACK_IMPORTED_MODULE_2__.z[\"null\"]()).or(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined());\nvar VisibilitySchema = /*#__PURE__*/FlexibleEnumSchema();\nvar Ok = /*#__PURE__*/function () {\n  function Ok(value) {\n    this.value = void 0;\n    this.value = value;\n  }\n  var _proto = Ok.prototype;\n  _proto.isOk = function isOk() {\n    return true;\n  };\n  _proto.isErr = function isErr() {\n    return false;\n  };\n  return Ok;\n}();\nvar Err = /*#__PURE__*/function () {\n  function Err(error) {\n    this.error = void 0;\n    this.error = error;\n  }\n  var _proto2 = Err.prototype;\n  _proto2.isOk = function isOk() {\n    return false;\n  };\n  _proto2.isErr = function isErr() {\n    return true;\n  };\n  return Err;\n}();\n// Custom codec to validate the timezone\nvar Timezone = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().refine(function (s) {\n  return moment_timezone__WEBPACK_IMPORTED_MODULE_0___default().tz.names().includes(s);\n}, {\n  message: \"Invalid timezone\"\n});\nvar ConnectorProvidersSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar isConnectorProvider = function isConnectorProvider(provider) {\n  return ConnectorProvidersSchema.safeParse(provider).success;\n};\nvar EditedByUserSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  editedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable(),\n  fullName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  imageUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  email: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  userId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n});\nvar DataSourceTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  assistantDefaultSelected: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  dustAPIProjectId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  dustAPIDataSourceId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  connectorId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  connectorProvider: /*#__PURE__*/ConnectorProvidersSchema.nullable(),\n  editedByUser: /*#__PURE__*/EditedByUserSchema.nullable().optional()\n});\nfunction isFolder(ds) {\n  // If there is no connectorProvider, it's a folder.\n  return !ds.connectorProvider;\n}\nfunction isWebsite(ds) {\n  return ds.connectorProvider === \"webcrawler\";\n}\nvar DataSourceViewCategoriesSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar BlockTypeSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar StatusSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"running\", \"succeeded\", \"errored\"]);\nvar BlockRunConfigSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.any());\nvar BlockStatusSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  block_type: BlockTypeSchema,\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  status: StatusSchema,\n  success_count: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  error_count: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar RunConfigSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  blocks: BlockRunConfigSchema\n});\nvar TraceTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  value: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown().nullable(),\n  error: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  meta: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown().nullable()\n});\nvar RunStatusSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  run: StatusSchema,\n  blocks: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(BlockStatusSchema)\n});\nvar RunTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  run_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  run_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"deploy\", \"local\", \"execute\"]),\n  app_hash: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  specification_hash: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  config: RunConfigSchema,\n  status: RunStatusSchema,\n  traces: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.tuple([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.tuple([BlockTypeSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()]), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(TraceTypeSchema))])),\n  results: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    value: zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown().nullable().optional(),\n    error: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional()\n  }))).nullable().optional()\n});\nvar TokensClassificationSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar GenerationTokensEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"generation_tokens\"),\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  configurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  messageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  classification: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([TokensClassificationSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"opening_delimiter\", \"closing_delimiter\"])]),\n  delimiterClassification: /*#__PURE__*/TokensClassificationSchema.nullable().optional()\n});\nvar DataSourceViewKindSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar DataSourceViewSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  category: DataSourceViewCategoriesSchema,\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  dataSource: DataSourceTypeSchema,\n  editedByUser: /*#__PURE__*/EditedByUserSchema.nullable().optional(),\n  id: ModelIdSchema,\n  kind: DataSourceViewKindSchema,\n  parentsIn: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  updatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  spaceId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar RetrievalDocumentChunkTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  offset: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  score: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar RetrievalDocumentTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  chunks: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(RetrievalDocumentChunkTypeSchema),\n  documentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  dataSourceView: /*#__PURE__*/DataSourceViewSchema.nullable(),\n  id: ModelIdSchema,\n  reference: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  score: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable(),\n  sourceUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar WhitelistableFeaturesSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar WorkspaceSegmentationSchema = /*#__PURE__*/FlexibleEnumSchema().nullable();\nvar RoleSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"admin\", \"builder\", \"user\", \"none\"]);\nvar LightWorkspaceSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  role: RoleSchema,\n  segmentation: WorkspaceSegmentationSchema,\n  whiteListedProviders: /*#__PURE__*/ModelProviderIdSchema.array().nullable(),\n  defaultEmbeddingProvider: /*#__PURE__*/EmbeddingProviderIdSchema.nullable()\n});\nvar WorkspaceSchema = /*#__PURE__*/LightWorkspaceSchema.extend({\n  ssoEnforced: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n});\nvar ExtensionWorkspaceSchema = /*#__PURE__*/WorkspaceSchema.extend({\n  blacklistedDomains: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable()\n});\nvar UserProviderSchema = /*#__PURE__*/FlexibleEnumSchema().nullable();\nvar UserSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  id: ModelIdSchema,\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  provider: UserProviderSchema,\n  username: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  email: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  firstName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  lastName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  fullName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  image: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n});\nvar WebsearchResultSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  snippet: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  link: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  reference: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar MCPActionTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  mcpServerId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  internalMCPServerName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  agentMessageId: ModelIdSchema,\n  functionCallName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  status: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  params: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.any()),\n  output: /*#__PURE__*/CallToolResultSchema.shape.content.nullable()\n});\nvar GlobalAgentStatusSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar AgentStatusSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar AgentConfigurationStatusSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([AgentStatusSchema, GlobalAgentStatusSchema]);\nvar AgentConfigurationScopeSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar AgentConfigurationViewSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar AgentUsageTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  messageCount: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  conversationCount: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  userCount: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  timePeriodSec: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar AgentRecentAuthorsSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).readonly();\nvar AgentModelConfigurationSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  providerId: ModelProviderIdSchema,\n  modelId: ModelLLMIdSchema,\n  temperature: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar LightAgentConfigurationSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  versionCreatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  version: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  versionAuthorId: /*#__PURE__*/ModelIdSchema.nullable(),\n  instructions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  model: AgentModelConfigurationSchema,\n  status: AgentConfigurationStatusSchema,\n  scope: AgentConfigurationScopeSchema,\n  userFavorite: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  pictureUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  lastAuthors: /*#__PURE__*/AgentRecentAuthorsSchema.optional(),\n  usage: /*#__PURE__*/AgentUsageTypeSchema.optional(),\n  maxStepsPerRun: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  visualizationEnabled: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  templateId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  groupIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  requestedGroupIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()))\n});\nvar ContentFragmentContextSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  username: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  fullName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  email: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  profilePictureUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable()\n});\nvar ContentNodeTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"document\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"table\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"folder\")]);\nvar ContentNodesViewTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"table\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"document\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"all\")]);\nvar ContentFragmentNodeData = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  nodeId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeDataSourceViewId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeType: ContentNodeTypeSchema,\n  provider: /*#__PURE__*/ConnectorProvidersSchema.nullable(),\n  spaceName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar BaseContentFragmentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"content_fragment\"),\n  id: ModelIdSchema,\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  visibility: VisibilitySchema,\n  version: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  sourceUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentType: SupportedContentFragmentTypeSchema,\n  context: ContentFragmentContextSchema,\n  contentFragmentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentFragmentVersion: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"latest\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"superseded\")])\n});\nvar FileContentFragmentSchema = /*#__PURE__*/BaseContentFragmentSchema.extend({\n  contentFragmentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"file\"),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  snippet: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  generatedTables: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  textUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  textBytes: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable()\n});\nvar ContentNodeContentFragmentSchema = /*#__PURE__*/BaseContentFragmentSchema.extend({\n  contentFragmentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"content_node\"),\n  nodeId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeDataSourceViewId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeType: ContentNodeTypeSchema,\n  contentNodeData: ContentFragmentNodeData\n});\nvar ContentFragmentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([FileContentFragmentSchema, ContentNodeContentFragmentSchema]);\nvar AgentMentionSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  configurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar UserMessageContextSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  username: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  timezone: Timezone,\n  fullName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  email: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  profilePictureUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  origin: UserMessageOriginSchema,\n  clientSideMCPServerIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional().nullable(),\n  selectedMCPServerViewIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional().nullable()\n});\nvar UserMessageSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"user_message\"),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  visibility: VisibilitySchema,\n  version: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  user: /*#__PURE__*/UserSchema.nullable(),\n  mentions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(AgentMentionSchema),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  context: UserMessageContextSchema\n});\nvar AgentMessageStatusSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar AgentMessageTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  agentMessageId: ModelIdSchema,\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"agent_message\"),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  visibility: VisibilitySchema,\n  version: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  parentMessageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  configuration: LightAgentConfigurationSchema,\n  status: AgentMessageStatusSchema,\n  actions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(MCPActionTypeSchema),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  chainOfThought: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  rawContents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    step: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })),\n  error: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    message: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    metadata: zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.any()).nullable()\n  }).nullable()\n});\nvar AgentMessageFeedbackSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  messageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  agentMessageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  userId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  thumbDirection: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"up\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"down\")]),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  agentConfigurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  agentConfigurationVersion: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  isConversationShared: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]()\n});\nvar ConversationVisibilitySchema = /*#__PURE__*/FlexibleEnumSchema();\nvar ConversationWithoutContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  created: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  updated: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().optional(),\n  owner: WorkspaceSchema,\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  visibility: ConversationVisibilitySchema,\n  groupIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  requestedGroupIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()))\n});\nvar ConversationSchema = /*#__PURE__*/ConversationWithoutContentSchema.extend({\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(UserMessageSchema), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(AgentMessageTypeSchema), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(ContentFragmentSchema)]))\n});\nvar MCPStakeLevelSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"low\", \"high\", \"never_ask\"]).optional();\nvar MCPValidationMetadataSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  mcpServerName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  toolName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  agentName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  pubsubMessageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  icon: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([MCPInternalActionIconSchema, MCPExternalActionIconSchema]).optional()\n});\nvar ToolExecutionBlockedStatusSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"blocked_authentication_required\", \"blocked_validation_required\", \"blocked_child_action_input_required\"]);\nvar ToolExecutionMetadataSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  actionId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  inputs: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.any()),\n  stake: MCPStakeLevelSchema,\n  metadata: MCPValidationMetadataSchema\n});\nvar BlockedActionExecutionSchema = /*#__PURE__*/ToolExecutionMetadataSchema.extend({\n  messageId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  conversationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  status: ToolExecutionBlockedStatusSchema\n});\nfunction isMCPServerPersonalAuthRequiredError(error) {\n  return error.code === \"mcp_server_personal_authentication_required\" && error.metadata && \"mcpServerId\" in error.metadata;\n}\nvar CoreAPIErrorSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  message: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  code: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar CoreAPITokenTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.tuple([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()]);\nvar APIErrorTypeSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar APIErrorSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: APIErrorTypeSchema,\n  message: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  data_source_error: /*#__PURE__*/CoreAPIErrorSchema.optional(),\n  run_error: /*#__PURE__*/CoreAPIErrorSchema.optional(),\n  app_error: /*#__PURE__*/CoreAPIErrorSchema.optional(),\n  connectors_error: /*#__PURE__*/ConnectorsAPIErrorSchema.optional()\n});\nvar WorkspaceDomainSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  domain: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  domainAutoJoinEnabled: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]()\n});\nvar DustAppTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  appHash: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  appId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  workspaceId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar DustAppConfigTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown());\nvar DustAppRunErroredEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"error\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    code: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    message: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })\n});\nvar DustAppRunRunStatusEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"run_status\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    status: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"running\", \"succeeded\", \"errored\"]),\n    run_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })\n});\nvar DustAppRunBlockStatusEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"block_status\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: BlockTypeSchema,\n    name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    status: StatusSchema,\n    success_count: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    error_count: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n  })\n});\nvar DustAppRunBlockExecutionEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"block_execution\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: BlockTypeSchema,\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    execution: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      value: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown().nullable(),\n      error: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n      meta: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown().nullable()\n    })))\n  })\n});\nvar DustAppRunFinalEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"final\")\n});\nvar DustAppRunTokensEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"tokens\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    input_index: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    map: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      iteration: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    }).nullable(),\n    tokens: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      tokens: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n      logprobs: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.number()).optional()\n    })\n  })\n});\nvar DustAppRunReasoningTokensEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"reasoning_tokens\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    input_index: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    map: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      iteration: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    }).nullable(),\n    tokens: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n    })\n  })\n});\nvar DustAppRunReasoningItemEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"reasoning_item\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    input_index: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    map: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      iteration: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    }).nullable(),\n    item: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown()\n  })\n});\nvar DustAppRunFunctionCallEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"function_call\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    input_index: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    map: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      iteration: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    }).nullable(),\n    function_call: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n    })\n  })\n});\nvar DustAppRunFunctionCallArgumentsTokensEventSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"function_call_arguments_tokens\"),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    block_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    block_name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    input_index: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n    map: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n      iteration: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    }).nullable(),\n    tokens: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n    })\n  })\n});\nvar SpaceKindSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar SpaceTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  groupIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  isRestricted: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  kind: SpaceKindSchema,\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  updatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar DatasetSchemaEntryType = /*#__PURE__*/FlexibleEnumSchema();\nvar DatasetSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  data: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.any())).nullable().optional(),\n  schema: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    key: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    type: DatasetSchemaEntryType,\n    description: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n  })).nullable().optional()\n});\nvar AppTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: ModelIdSchema,\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedSpecification: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedConfig: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedRun: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  dustAPIProjectId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  space: SpaceTypeSchema,\n  datasets: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(DatasetSchema).optional(),\n  coreSpecifications: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional()\n});\nvar AppImportTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: /*#__PURE__*/ModelIdSchema.optional(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedSpecification: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedConfig: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  savedRun: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  dustAPIProjectId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  datasets: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(DatasetSchema).optional(),\n  coreSpecifications: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional()\n});\nvar RunAppResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  run: RunTypeSchema\n});\nvar GetDataSourcesResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  data_sources: /*#__PURE__*/DataSourceTypeSchema.array()\n});\nvar GetOrPatchAgentConfigurationResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  agentConfiguration: LightAgentConfigurationSchema\n});\nvar PatchAgentConfigurationRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  userFavorite: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n});\nvar GetAgentConfigurationsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  agentConfigurations: /*#__PURE__*/LightAgentConfigurationSchema.array()\n});\nvar CreateGenericAgentConfigurationRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  instructions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  emoji: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  subAgentName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  subAgentDescription: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  subAgentInstructions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  subAgentEmoji: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n});\nvar CreateGenericAgentConfigurationResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  agentConfiguration: LightAgentConfigurationSchema,\n  subAgentConfiguration: /*#__PURE__*/LightAgentConfigurationSchema.optional()\n});\nvar PostContentFragmentResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  contentFragment: ContentFragmentSchema\n});\nvar CreateConversationResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  conversation: ConversationSchema,\n  message: /*#__PURE__*/UserMessageSchema.optional()\n});\nvar GetFeedbacksResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  feedbacks: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(AgentMessageFeedbackSchema)\n});\nvar PublicPostMessageFeedbackRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  thumbDirection: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  feedbackContent: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  isConversationShared: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n});\nvar PostMessageFeedbackResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(true)\n});\nvar PostUserMessageResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  message: UserMessageSchema\n});\nvar RetryMessageResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  message: AgentMessageTypeSchema\n});\nvar GetConversationResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  conversation: ConversationSchema\n});\nvar TokenizeResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  tokens: /*#__PURE__*/CoreAPITokenTypeSchema.array()\n});\nvar GetActiveMemberEmailsInWorkspaceResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  emails: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n});\nvar GetWorkspaceVerifiedDomainsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  verified_domains: /*#__PURE__*/WorkspaceDomainSchema.array()\n});\nvar GetWorkspaceFeatureFlagsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  feature_flags: /*#__PURE__*/WhitelistableFeaturesSchema.array()\n});\nvar PublicPostMessagesRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(1),\n  mentions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    configurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })),\n  context: /*#__PURE__*/UserMessageContextSchema.extend({\n    clientSideMCPServerIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional().nullable()\n  })\n}), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  blocking: zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional(),\n  skipToolsValidation: zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n}).partial());\nvar PublicPostEditMessagesRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mentions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    configurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })),\n  skipToolsValidation: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()[\"default\"](false)\n});\nvar PublicContentFragmentWithContentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  nodeId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  nodeDataSourceViewId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  context: /*#__PURE__*/ContentFragmentContextSchema.optional().nullable(),\n  // Undocumented for now -- allows to supersede an existing content fragment.\n  supersededContentFragmentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable()\n});\nvar PublicContentFragmentWithFileIdSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable(),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  nodeId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  nodeDataSourceViewId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  context: /*#__PURE__*/ContentFragmentContextSchema.optional().nullable(),\n  // Undocumented for now -- allows to supersede an existing content fragment.\n  supersededContentFragmentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable()\n});\nvar PublicContentFragmentWithContentNodeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeDataSourceViewId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().nullable(),\n  context: /*#__PURE__*/ContentFragmentContextSchema.optional().nullable(),\n  supersededContentFragmentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable()\n});\nvar PublicPostContentFragmentRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([PublicContentFragmentWithContentSchema, PublicContentFragmentWithFileIdSchema, PublicContentFragmentWithContentNodeSchema]);\nvar PublicPostConversationsRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  visibility: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"workspace\", \"unlisted\", \"deleted\", \"test\"]).optional()[\"default\"](\"unlisted\"),\n  depth: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().optional(),\n  message: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    content: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(1),\n    mentions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      configurationId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n    })),\n    context: UserMessageContextSchema\n  }), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    blocking: zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n  }).partial()), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined()]),\n  contentFragment: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([PublicContentFragmentWithContentSchema, PublicContentFragmentWithFileIdSchema, PublicContentFragmentWithContentNodeSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined()]),\n  contentFragments: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([PublicContentFragmentWithContentSchema, PublicContentFragmentWithFileIdSchema, PublicContentFragmentWithContentNodeSchema]).array(), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined()])\n}), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  blocking: zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional(),\n  skipToolsValidation: zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n}).partial());\nvar PostConversationsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  conversation: ConversationSchema,\n  message: /*#__PURE__*/UserMessageSchema.optional(),\n  contentFragment: /*#__PURE__*/ContentFragmentSchema.optional()\n});\nvar GetConversationsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  conversations: /*#__PURE__*/ConversationWithoutContentSchema.array()\n});\nvar SearchDataSourceViewsRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  dataSourceId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  kind: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  vaultId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  vaultKind: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n});\nvar SearchDataSourceViewsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  data_source_views: /*#__PURE__*/DataSourceViewSchema.array()\n});\nvar ValidateMemberRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  email: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar GetAppsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  apps: /*#__PURE__*/AppTypeSchema.array()\n});\nvar PostAppsRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  apps: /*#__PURE__*/AppImportTypeSchema.array()\n});\nvar ImportAppsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  apps: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    sId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    error: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n  }).array()\n});\nvar DataSourceViewResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  dataSourceView: DataSourceViewSchema\n});\nvar PatchDataSourceViewRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  parentsToAdd: zod__WEBPACK_IMPORTED_MODULE_2__.z.union([zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()), zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined()]),\n  parentsToRemove: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional()\n})\n// For the fields to be not optional, see:\n// https://stackoverflow.com/questions/71477015/specify-a-zod-schema-with-a-non-optional-but-possibly-undefined-field\n.transform(function (o) {\n  return {\n    parentsToAdd: o.parentsToAdd,\n    parentsToRemove: o.parentsToRemove\n  };\n}), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  parentsIn: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n})]);\nvar DataSourceSearchQuerySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  query: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  top_k: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number(),\n  full_text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce[\"boolean\"](),\n  target_document_tokens: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number().optional(),\n  timestamp_gt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number().optional(),\n  timestamp_lt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number().optional(),\n  tags_in: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  tags_not: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  parents_in: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  parents_not: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional()\n});\nvar FrontDataSourceDocumentSectionSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.lazy(function () {\n  return zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    prefix: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n    sections: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(FrontDataSourceDocumentSectionSchema)\n  });\n});\nvar PostDataSourceDocumentRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable().optional(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  parent_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  source_url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  upsert_context: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    sync_type: zod__WEBPACK_IMPORTED_MODULE_2__.z.union([zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"batch\", \"incremental\"]), zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined()])\n  })\n  // For the fields to be not optional, see:\n  // https://stackoverflow.com/questions/71477015/specify-a-zod-schema-with-a-non-optional-but-possibly-undefined-field\n  .transform(function (o) {\n    return {\n      sync_type: o.sync_type\n    };\n  }).optional(),\n  text: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  section: /*#__PURE__*/FrontDataSourceDocumentSectionSchema.nullable().optional(),\n  light_document_output: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional(),\n  async: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().nullable().optional(),\n  mime_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional()\n});\nvar UpsertTableRowsRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  rows: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    row_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    value: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.record(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([zod__WEBPACK_IMPORTED_MODULE_2__.z.string(), zod__WEBPACK_IMPORTED_MODULE_2__.z.number(), zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](), zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n      type: zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"datetime\"),\n      epoch: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n    })]).nullable())\n  })),\n  truncate: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n});\nvar PostTableParentsRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  parent_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n});\nvar UpsertTableFromCsvRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable().optional(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  parentId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  truncate: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  async: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  sourceUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  tableId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  fileId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  allowEmptySchema: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n});\nvar UpsertDatabaseTableRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  table_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable().optional(),\n  tags: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  parent_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  remote_database_table_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  remote_database_secret_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mime_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  source_url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional()\n});\nvar SupportedUsageTablesSchema = /*#__PURE__*/FlexibleEnumSchema();\n// Folders\nvar CoreAPIFolderSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  data_source_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  folder_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar GetFoldersResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  folders: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(CoreAPIFolderSchema),\n  total: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar GetFolderResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  folder: CoreAPIFolderSchema\n});\nvar DeleteFolderResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  folder: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    folder_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  })\n});\nvar UpsertFolderResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  folder: CoreAPIFolderSchema,\n  data_source: DataSourceTypeSchema\n});\nvar ProviderVisibilitySchema = /*#__PURE__*/FlexibleEnumSchema();\nvar UpsertDataSourceFolderRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  timestamp: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  parents: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).nullable().optional(),\n  parent_id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  mime_type: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  source_url: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  provider_visibility: /*#__PURE__*/ProviderVisibilitySchema.nullable().optional()\n});\nvar DateSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().refine(function (s) {\n  return /^\\d{4}-(0[1-9]|1[0-2])(-([0-2]\\d|3[01]))?$/.test(s);\n}, \"YYYY-MM or YYYY-MM-DD\");\nvar GetWorkspaceUsageRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  start: DateSchema,\n  end: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined(),\n  mode: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"month\"),\n  table: SupportedUsageTablesSchema,\n  format: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"csv\", \"json\"]).optional()[\"default\"](\"csv\")\n}), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  start: DateSchema,\n  end: DateSchema,\n  mode: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"range\"),\n  table: SupportedUsageTablesSchema,\n  format: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"csv\", \"json\"]).optional()[\"default\"](\"csv\")\n})]);\nvar FileUploadUrlRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  contentType: SupportedFileContentFragmentTypeSchema,\n  fileName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().max(4096, \"File name must be less than 4096 characters\"),\n  fileSize: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  useCase: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"conversation\"), /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"upsert_table\")]),\n  useCaseMetadata: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    conversationId: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  }).optional()\n});\nvar FileTypeStatusSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar FileTypeUseCaseSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar FileTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  // TODO(spolu): move this to ModelIdSchema\n  id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  contentType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  downloadUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  fileName: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  fileSize: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  status: FileTypeStatusSchema,\n  uploadUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  publicUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n  useCase: FileTypeUseCaseSchema\n});\nvar FileTypeWithUploadUrlSchema = /*#__PURE__*/FileTypeSchema.extend({\n  uploadUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar FileUploadRequestResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  file: FileTypeWithUploadUrlSchema\n});\nvar FileUploadedRequestResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  file: FileTypeSchema\n});\nvar MeResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  user: /*#__PURE__*/UserSchema.and(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    workspaces: /*#__PURE__*/WorkspaceSchema.array().or(/*#__PURE__*/ExtensionWorkspaceSchema.array())\n  }))\n});\nvar CancelMessageGenerationResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(true)\n});\nvar CancelMessageGenerationRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  messageIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n});\n// Typeguards.\nfunction isAgentMention(arg) {\n  return arg.configurationId !== undefined;\n}\nfunction assertNever(x) {\n  throw new Error((typeof x === \"object\" ? JSON.stringify(x) : x) + \" is not of type never. This should never happen.\");\n}\nfunction removeNulls(arr) {\n  return arr.filter(function (v) {\n    return v !== null && v !== undefined;\n  });\n}\nfunction getProviderFromRetrievedDocument(document) {\n  if (document.dataSourceView) {\n    if (document.dataSourceView.dataSource.connectorProvider === \"webcrawler\") {\n      return \"document\";\n    }\n    return document.dataSourceView.dataSource.connectorProvider || \"document\";\n  }\n  return \"document\";\n}\nfunction getTitleFromRetrievedDocument(document) {\n  var provider = getProviderFromRetrievedDocument(document);\n  if (provider === \"slack\") {\n    for (var _iterator = _createForOfIteratorHelperLoose(document.tags), _step; !(_step = _iterator()).done;) {\n      var t = _step.value;\n      if (t.startsWith(\"channelName:\")) {\n        return \"#\" + t.substring(12);\n      }\n    }\n  }\n  for (var _iterator2 = _createForOfIteratorHelperLoose(document.tags), _step2; !(_step2 = _iterator2()).done;) {\n    var _t = _step2.value;\n    if (_t.startsWith(\"title:\")) {\n      return _t.substring(6);\n    }\n  }\n  return document.documentId;\n}\nvar AppsCheckRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  apps: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    appId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    appHash: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n  }))\n});\nvar AppsCheckResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  apps: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    appId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    appHash: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    deployed: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]()\n  }))\n});\nvar GetSpacesResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  spaces: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(SpaceTypeSchema)\n});\nvar OAuthProviderSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar InternalAllowedIconSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar CustomServerIconSchema = /*#__PURE__*/FlexibleEnumSchema();\nvar MCPServerTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  version: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  icon: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([InternalAllowedIconSchema, CustomServerIconSchema]),\n  authorization: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    provider: OAuthProviderSchema,\n    supported_use_cases: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"personal_actions\", \"platform_actions\"])),\n    scope: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n  }).nullable(),\n  tools: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n    inputSchema: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.any().optional()\n  })),\n  availability: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"manual\", \"auto\", \"auto_hidden_builder\"]),\n  allowMultipleInstances: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  documentationUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable()\n});\nvar MCPServerViewTypeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  id: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  sId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  name: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  description: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  createdAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  updatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n  spaceId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  serverType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"remote\", \"internal\"]),\n  server: MCPServerTypeSchema,\n  oAuthUseCase: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"personal_actions\", \"platform_actions\"]).nullable(),\n  editedByUser: /*#__PURE__*/EditedByUserSchema.nullable()\n});\nvar GetMCPServerViewsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(true),\n  serverViews: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(MCPServerViewTypeSchema)\n});\nvar GetMCPServerViewsQuerySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  includeAuto: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"true\", \"false\"]).transform(function (val) {\n    return val === \"true\";\n  }).optional()\n});\nvar BaseSearchBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  viewType: ContentNodesViewTypeSchema,\n  spaceIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  includeDataSources: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  limit: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n});\nvar TextSearchBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(BaseSearchBodySchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  query: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  nodeIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().optional(),\n  searchSourceUrls: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional()\n}));\nvar NodeIdSearchBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(BaseSearchBodySchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  nodeIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  query: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.undefined().optional()\n}));\nvar SearchRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.union([TextSearchBodySchema, NodeIdSearchBodySchema]);\nvar ContentNodeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  expandable: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  internalId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  lastUpdatedAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.number().nullable(),\n  mimeType: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  // The direct parent ID of this content node\n  parentInternalId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable(),\n  // permission: ConnectorPermissionSchema,\n  preventSelection: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]().optional(),\n  providerVisibility: /*#__PURE__*/ProviderVisibilitySchema.nullable().optional(),\n  sourceUrl: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().nullable().optional(),\n  title: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  type: ContentNodeTypeSchema\n});\nvar ContentNodeWithParentSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(ContentNodeSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  parentsInternalIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n  parentTitle: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional().nullable()\n}));\nvar DataSourceContentNodeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(ContentNodeWithParentSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  dataSource: DataSourceTypeSchema,\n  dataSourceViews: /*#__PURE__*/DataSourceViewSchema.array()\n}));\nvar DataSourceViewContentNodeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.intersection(ContentNodeWithParentSchema, /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  dataSourceView: DataSourceViewSchema\n}));\nvar SearchWarningCodeSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.literal(\"truncated-query-clauses\");\nvar PostWorkspaceSearchResponseBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  nodes: /*#__PURE__*/DataSourceContentNodeSchema.array(),\n  warningCode: /*#__PURE__*/SearchWarningCodeSchema.optional().nullable()\n});\nvar TOOL_RUNNING_LABEL = \"Using a tool\";\n// MCP Related.\nvar ValidateActionResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]()\n});\nvar ActionApprovalStateSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"approved\", \"rejected\", \"always_approved\"]);\nvar ValidateActionRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  actionId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  approved: ActionApprovalStateSchema\n});\nvar ClientSideMCPServerNameSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(5).max(30);\nvar PublicRegisterMCPRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  serverName: ClientSideMCPServerNameSchema\n});\nvar PublicHeartbeatMCPRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  serverId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar RegisterMCPResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  expiresAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  serverId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar HeartbeatMCPResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"](),\n  expiresAt: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar PublicPostMCPResultsRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  result: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.unknown(),\n  serverId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n});\nvar PostMCPRequestsRequestQuerySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  serverId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n  lastEventId: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n});\nvar PostMCPResultsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  success: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"boolean\"]()\n});\nvar BlockedActionsResponseSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  blockedActions: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(BlockedActionExecutionSchema)\n});\nvar MCPViewsRequestAvailabilitySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z[\"enum\"]([\"manual\", \"auto\"]);\nvar GetMCPViewsRequestSchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  spaceIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string()),\n  availabilities: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(MCPViewsRequestAvailabilitySchema)\n});\nvar PostSpaceMembersRequestBodySchema = /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n  userIds: /*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.array(/*#__PURE__*/zod__WEBPACK_IMPORTED_MODULE_2__.z.string())\n});\n\nvar logger = console;\nvar HEARTBEAT_INTERVAL_MS = 15 * 60 * 1000; // 15 minutes.\nvar RECONNECT_DELAY_MS = 5 * 1000; // 5 seconds.\n/**\n * Custom transport implementation for MCP\n * - Uses EventSource (SSE) to receive requests from Dust\n * - Uses fetch (HTTP POST) to send results back to Dust\n * - Supports workspace-scoped MCP registration only\n */\nvar DustMcpServerTransport = /*#__PURE__*/function () {\n  function DustMcpServerTransport(dustAPI, onServerIdReceived, serverName, verbose, eventSourceHeartbeat) {\n    if (serverName === void 0) {\n      serverName = \"Dust Extension\";\n    }\n    if (verbose === void 0) {\n      verbose = false;\n    }\n    if (eventSourceHeartbeat === void 0) {\n      eventSourceHeartbeat = 45000;\n    }\n    this.dustAPI = void 0;\n    this.onServerIdReceived = void 0;\n    this.serverName = void 0;\n    this.verbose = void 0;\n    this.eventSourceHeartbeat = void 0;\n    this.eventSource = null;\n    this.lastEventId = null;\n    this.heartbeatTimer = null;\n    this.serverId = null;\n    // Required by Transport interface.\n    this.onmessage = void 0;\n    this.onclose = void 0;\n    this.onerror = void 0;\n    this.sessionId = void 0;\n    this.dustAPI = dustAPI;\n    this.onServerIdReceived = onServerIdReceived;\n    this.serverName = serverName;\n    this.verbose = verbose;\n    this.eventSourceHeartbeat = eventSourceHeartbeat;\n  }\n  /**\n   * Register the MCP server with the Dust backend\n   */\n  var _proto = DustMcpServerTransport.prototype;\n  _proto.registerServer =\n  /*#__PURE__*/\n  function () {\n    var _registerServer = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var registerRes, serverId;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return this.dustAPI.registerMCPServer({\n              serverName: this.serverName\n            });\n          case 2:\n            registerRes = _context.sent;\n            if (!registerRes.isErr()) {\n              _context.next = 6;\n              break;\n            }\n            this.logError(\"Failed to register MCP server: \" + registerRes.error);\n            return _context.abrupt(\"return\", false);\n          case 6:\n            serverId = registerRes.value.serverId;\n            this.serverId = serverId;\n            // Notify the parent that the serverId has been updated.\n            this.onServerIdReceived(serverId);\n            // Setup heartbeat to keep the server registration alive.\n            this.setupHeartbeat(serverId);\n            return _context.abrupt(\"return\", true);\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function registerServer() {\n      return _registerServer.apply(this, arguments);\n    }\n    return registerServer;\n  }()\n  /**\n   * Send periodic heartbeats to keep the server registration alive.\n   */\n  ;\n  _proto.setupHeartbeat = function setupHeartbeat(serverId) {\n    var _this = this;\n    // Clear any existing heartbeat timer.\n    if (this.heartbeatTimer) {\n      clearInterval(this.heartbeatTimer);\n    }\n    // Set up a new heartbeat timer (every HEARTBEAT_INTERVAL_MS).\n    this.heartbeatTimer = setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var heartbeatRes, error;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this.dustAPI.heartbeatMCPServer({\n              serverId: serverId\n            });\n          case 2:\n            heartbeatRes = _context2.sent;\n            if (!(heartbeatRes.isErr() || heartbeatRes.value.success === false)) {\n              _context2.next = 8;\n              break;\n            }\n            error = heartbeatRes.isErr() ? heartbeatRes.error : new Error(\"Server not registered\");\n            _this.logError(\"Failed to heartbeat MCP server: \" + error);\n            _context2.next = 8;\n            return _this.registerServer();\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    })), HEARTBEAT_INTERVAL_MS);\n  }\n  /**\n   * Start the transport and connect to the SSE endpoint\n   * This method is required by the Transport interface\n   */;\n  _proto.start =\n  /*#__PURE__*/\n  function () {\n    var _start = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var registered, _this$onerror;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return this.registerServer();\n          case 3:\n            registered = _context3.sent;\n            if (registered) {\n              _context3.next = 6;\n              break;\n            }\n            throw new Error(\"Failed to register MCP server\");\n          case 6:\n            _context3.next = 8;\n            return this.connectToRequestsStream();\n          case 8:\n            this.logInfo(\"MCP transport started successfully\");\n            _context3.next = 16;\n            break;\n          case 11:\n            _context3.prev = 11;\n            _context3.t0 = _context3[\"catch\"](0);\n            this.logError(\"Failed to start MCP transport:\", _context3.t0);\n            (_this$onerror = this.onerror) == null || _this$onerror.call(this, _context3.t0 instanceof Error ? _context3.t0 : new Error(String(_context3.t0)));\n            throw _context3.t0;\n          case 16:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, this, [[0, 11]]);\n    }));\n    function start() {\n      return _start.apply(this, arguments);\n    }\n    return start;\n  }()\n  /**\n   * Connect to the SSE stream for the workspace\n   */\n  ;\n  _proto.connectToRequestsStream =\n  /*#__PURE__*/\n  function () {\n    var _connectToRequestsStream = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var _this2 = this;\n      var connectionResult, _connectionResult$val, url, headers;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            if (this.serverId) {\n              _context4.next = 3;\n              break;\n            }\n            this.logError(\"Server ID is not set\");\n            return _context4.abrupt(\"return\");\n          case 3:\n            // Close any existing connection.\n            if (this.eventSource) {\n              this.eventSource.close();\n              this.eventSource = null;\n            }\n            _context4.next = 6;\n            return this.dustAPI.getMCPRequestsConnectionDetails({\n              serverId: this.serverId,\n              lastEventId: this.lastEventId\n            });\n          case 6:\n            connectionResult = _context4.sent;\n            if (!connectionResult.isErr()) {\n              _context4.next = 9;\n              break;\n            }\n            throw new Error(\"Failed to get connection details: \" + connectionResult.error.message);\n          case 9:\n            _connectionResult$val = connectionResult.value, url = _connectionResult$val.url, headers = _connectionResult$val.headers;\n            this.eventSource = new event_source_polyfill__WEBPACK_IMPORTED_MODULE_1__.EventSourcePolyfill(url, {\n              headers: headers,\n              heartbeatTimeout: this.eventSourceHeartbeat\n            });\n            this.eventSource.onmessage = function (event) {\n              try {\n                if (event.data === \"done\") {\n                  // Ignore this event.\n                  return;\n                }\n                var eventData = JSON.parse(event.data);\n                // Save the eventId for reconnection purposes.\n                if (eventData.eventId) {\n                  _this2.lastEventId = eventData.eventId;\n                }\n                // The actual request is in the data property.\n                var data = eventData.data;\n                if (!data) {\n                  _this2.logError(\"No data field found in the event\");\n                  return;\n                }\n                // Forward the message to the handler.\n                if (_this2.onmessage) {\n                  _this2.onmessage(data);\n                } else {\n                  _this2.logError(\"ERROR: onmessage handler not set - MCP response won't be sent\");\n                }\n              } catch (error) {\n                _this2.logError(\"Failed to parse MCP request:\", error);\n                _this2.onerror == null || _this2.onerror(new Error(\"Failed to parse MCP request: \" + error));\n              }\n            };\n            this.eventSource.onerror = function (error) {\n              _this2.logError(\"Error in MCP EventSource connection:\", error);\n              _this2.onerror == null || _this2.onerror(new Error(\"SSE connection error: \" + error));\n              // Attempt to reconnect after a delay.\n              setTimeout(function () {\n                if (_this2.eventSource) {\n                  _this2.logInfo(\"Attempting to reconnect to SSE...\");\n                  void _this2.connectToRequestsStream()[\"catch\"](function (reconnectError) {\n                    _this2.logError(\"Failed to reconnect:\", reconnectError);\n                  });\n                }\n              }, RECONNECT_DELAY_MS); // Wait before reconnecting.\n            };\n            this.eventSource.onopen = function () {\n              _this2.logInfo(\"MCP SSE connection established\");\n            };\n            this.eventSource.addEventListener(\"close\", function () {\n              _this2.logInfo(\"MCP SSE connection closed\");\n              _this2.onclose == null || _this2.onclose();\n            });\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, this);\n    }));\n    function connectToRequestsStream() {\n      return _connectToRequestsStream.apply(this, arguments);\n    }\n    return connectToRequestsStream;\n  }()\n  /**\n   * Send a message to the server\n   * This method is required by the Transport interface\n   */\n  ;\n  _proto.send =\n  /*#__PURE__*/\n  function () {\n    var _send = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(message) {\n      var postResultsRes, _this$onerror2;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            if (this.serverId) {\n              _context5.next = 3;\n              break;\n            }\n            this.logError(\"Server ID is not set\");\n            return _context5.abrupt(\"return\");\n          case 3:\n            _context5.next = 5;\n            return this.dustAPI.postMCPResults({\n              serverId: this.serverId,\n              result: message\n            });\n          case 5:\n            postResultsRes = _context5.sent;\n            if (postResultsRes.isErr()) {\n              this.logError(\"Failed to send MCP result:\", postResultsRes.error);\n              (_this$onerror2 = this.onerror) == null || _this$onerror2.call(this, new Error(\"Failed to send MCP result: \" + postResultsRes.error));\n            }\n          case 7:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, this);\n    }));\n    function send(_x) {\n      return _send.apply(this, arguments);\n    }\n    return send;\n  }()\n  /**\n   * Close the transport and disconnect from the SSE endpoint\n   * This method is required by the Transport interface\n   */\n  ;\n  _proto.close =\n  /*#__PURE__*/\n  function () {\n    var _close = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var _this$onclose;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            // Clear heartbeat timer.\n            if (this.heartbeatTimer) {\n              clearInterval(this.heartbeatTimer);\n              this.heartbeatTimer = null;\n            }\n            // Close SSE connection.\n            if (this.eventSource) {\n              this.logInfo(\"Closing MCP SSE connection\");\n              this.eventSource.close();\n              this.eventSource = null;\n            }\n            // Trigger onclose callback.\n            (_this$onclose = this.onclose) == null || _this$onclose.call(this);\n          case 3:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this);\n    }));\n    function close() {\n      return _close.apply(this, arguments);\n    }\n    return close;\n  }();\n  _proto.logError = function logError() {\n    if (this.verbose) {\n      logger.error.apply(logger, arguments);\n    }\n  };\n  _proto.logInfo = function logInfo() {\n    if (this.verbose) {\n      logger.log.apply(logger, arguments);\n    }\n  }\n  /**\n   * Get the current server ID\n   */;\n  _proto.getServerId = function getServerId() {\n    var _this$serverId;\n    return (_this$serverId = this.serverId) != null ? _this$serverId : undefined;\n  };\n  return DustMcpServerTransport;\n}();\n\n// Copied from front/hooks/useEventSource.ts\nvar DEFAULT_MAX_RECONNECT_ATTEMPTS = 10;\nvar DEFAULT_RECONNECT_DELAY = 5000;\nvar textFromResponse = /*#__PURE__*/function () {\n  var _ref3 = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response) {\n    var reader, decoder, result, done, _yield$reader$read, value, doneReading;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(typeof response.body === \"string\")) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\", response.body);\n        case 2:\n          // Convert ReadableStream to string\n          reader = response.body.getReader();\n          decoder = new TextDecoder();\n          result = \"\";\n          _context.prev = 5;\n          done = false;\n        case 7:\n          if (done) {\n            _context.next = 17;\n            break;\n          }\n          _context.next = 10;\n          return reader.read();\n        case 10:\n          _yield$reader$read = _context.sent;\n          value = _yield$reader$read.value;\n          doneReading = _yield$reader$read.done;\n          done = doneReading;\n          if (value) {\n            result += decoder.decode(value, {\n              stream: true\n            });\n          }\n          _context.next = 7;\n          break;\n        case 17:\n          result += decoder.decode();\n        case 18:\n          _context.prev = 18;\n          reader.releaseLock();\n          return _context.finish(18);\n        case 21:\n          return _context.abrupt(\"return\", result);\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[5,, 18, 21]]);\n  }));\n  return function textFromResponse(_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar DustAPI = /*#__PURE__*/function () {\n  /**\n   * @param credentials DustAPICrededentials\n   */\n  function DustAPI(config, credentials, logger, urlOverride) {\n    this._url = void 0;\n    this._credentials = void 0;\n    this._logger = void 0;\n    this._urlOverride = void 0;\n    this._url = config.url;\n    this._credentials = credentials;\n    this._logger = logger;\n    this._urlOverride = urlOverride;\n  }\n  var _proto = DustAPI.prototype;\n  _proto.workspaceId = function workspaceId() {\n    return this._credentials.workspaceId;\n  };\n  _proto.setWorkspaceId = function setWorkspaceId(workspaceId) {\n    this._credentials.workspaceId = workspaceId;\n  };\n  _proto.apiUrl = function apiUrl() {\n    return this._urlOverride ? this._urlOverride : this._url;\n  };\n  _proto.getApiKey = /*#__PURE__*/function () {\n    var _getApiKey = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(typeof this._credentials.apiKey === \"function\")) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\", this._credentials.apiKey());\n          case 2:\n            return _context2.abrupt(\"return\", this._credentials.apiKey);\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, this);\n    }));\n    function getApiKey() {\n      return _getApiKey.apply(this, arguments);\n    }\n    return getApiKey;\n  }();\n  _proto.baseHeaders = /*#__PURE__*/function () {\n    var _baseHeaders = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var headers;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return this.getApiKey();\n          case 2:\n            _context3.t0 = _context3.sent;\n            _context3.t1 = \"Bearer \" + _context3.t0;\n            headers = {\n              Authorization: _context3.t1\n            };\n            if (this._credentials.extraHeaders) {\n              Object.assign(headers, this._credentials.extraHeaders);\n            }\n            return _context3.abrupt(\"return\", headers);\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, this);\n    }));\n    function baseHeaders() {\n      return _baseHeaders.apply(this, arguments);\n    }\n    return baseHeaders;\n  }()\n  /**\n   * Fetches the current user's information from the API.\n   *\n   * This method sends a GET request to the `/api/v1/me` endpoint with the necessary authorization\n   * headers. It then processes the response to extract the user information.  Note that this will\n   * only work if you are using an OAuth2 token. It will always fail with a workspace API key.\n   *\n   * @returns {Promise<Result<User, Error>>} A promise that resolves to a Result object containing\n   * either the user information or an error.\n   */\n  ;\n  _proto.me =\n  /*#__PURE__*/\n  function () {\n    var _me = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var headers, res, r;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return this.getApiKey();\n          case 2:\n            _context4.t0 = _context4.sent;\n            _context4.t1 = \"Bearer \" + _context4.t0;\n            headers = {\n              \"Content-Type\": \"application/json\",\n              Authorization: _context4.t1\n            };\n            _context4.next = 7;\n            return this._fetchWithError(this.apiUrl() + \"/api/v1/me\", {\n              method: \"GET\",\n              headers: headers\n            });\n          case 7:\n            res = _context4.sent;\n            _context4.next = 10;\n            return this._resultFromResponse(MeResponseSchema, res);\n          case 10:\n            r = _context4.sent;\n            if (!r.isErr()) {\n              _context4.next = 13;\n              break;\n            }\n            return _context4.abrupt(\"return\", r);\n          case 13:\n            return _context4.abrupt(\"return\", new Ok(r.value.user));\n          case 14:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, this);\n    }));\n    function me() {\n      return _me.apply(this, arguments);\n    }\n    return me;\n  }();\n  _proto.request = /*#__PURE__*/function () {\n    var _request = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(args) {\n      var _args$overrideWorkspa;\n      var url, headers, res;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            // Conveniently clean path from any leading \"/\" just in case\n            args.path = args.path.replace(/^\\/+/, \"\");\n            url = this.apiUrl() + \"/api/v1/w/\" + ((_args$overrideWorkspa = args.overrideWorkspaceId) != null ? _args$overrideWorkspa : this.workspaceId()) + \"/\" + args.path;\n            if (args.query) {\n              url += \"?\" + args.query.toString();\n            }\n            _context5.t0 = _extends;\n            _context5.t1 = {};\n            _context5.next = 7;\n            return this.baseHeaders();\n          case 7:\n            _context5.t2 = _context5.sent;\n            _context5.t3 = args.headers;\n            headers = (0, _context5.t0)(_context5.t1, _context5.t2, _context5.t3);\n            headers[\"Content-Type\"] = \"application/json\";\n            if (args.stream) {\n              headers[\"Accept\"] = \"text/event-stream\";\n            }\n            _context5.next = 14;\n            return this._fetchWithError(url, {\n              method: args.method,\n              headers: headers,\n              body: args.body ? JSON.stringify(args.body) : undefined,\n              signal: args.signal,\n              stream: args.stream\n            });\n          case 14:\n            res = _context5.sent;\n            return _context5.abrupt(\"return\", res);\n          case 16:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, this);\n    }));\n    function request(_x2) {\n      return _request.apply(this, arguments);\n    }\n    return request;\n  }()\n  /**\n   * This functions talks directly to the Dust production API to create a run.\n   *\n   * @param app DustAppType the app to run streamed\n   * @param config DustAppConfigType the app config\n   * @param inputs any[] the app inputs\n   */\n  ;\n  _proto.runApp =\n  /*#__PURE__*/\n  function () {\n    var _runApp = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref4, config, inputs, _temp) {\n      var workspaceId, appId, appHash, appSpaceId, _ref5, useWorkspaceCredentials, res, r;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            workspaceId = _ref4.workspaceId, appId = _ref4.appId, appHash = _ref4.appHash, appSpaceId = _ref4.appSpaceId;\n            _ref5 = _temp === void 0 ? {\n              useWorkspaceCredentials: false\n            } : _temp, useWorkspaceCredentials = _ref5.useWorkspaceCredentials;\n            _context6.next = 4;\n            return this.request({\n              overrideWorkspaceId: workspaceId,\n              path: \"spaces/\" + appSpaceId + \"/apps/\" + appId + \"/runs\",\n              query: new URLSearchParams({\n                use_workspace_credentials: useWorkspaceCredentials ? \"true\" : \"false\"\n              }),\n              method: \"POST\",\n              body: {\n                specification_hash: appHash,\n                config: config,\n                stream: false,\n                blocking: true,\n                inputs: inputs\n              }\n            });\n          case 4:\n            res = _context6.sent;\n            _context6.next = 7;\n            return this._resultFromResponse(RunAppResponseSchema, res);\n          case 7:\n            r = _context6.sent;\n            if (!r.isErr()) {\n              _context6.next = 10;\n              break;\n            }\n            return _context6.abrupt(\"return\", r);\n          case 10:\n            return _context6.abrupt(\"return\", new Ok(r.value.run));\n          case 11:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this);\n    }));\n    function runApp(_x3, _x4, _x5, _x6) {\n      return _runApp.apply(this, arguments);\n    }\n    return runApp;\n  }()\n  /**\n   * This functions talks directly to the Dust production API to create a streamed run.\n   *\n   * @param app DustAppType the app to run streamed\n   * @param config DustAppConfigType the app config\n   * @param inputs any[] the app inputs\n   */\n  ;\n  _proto.runAppStreamed =\n  /*#__PURE__*/\n  function () {\n    var _runAppStreamed = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(_ref6, config,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inputs, _temp2) {\n      var workspaceId, appId, appHash, appSpaceId, _ref7, useWorkspaceCredentials, res, processStreamedRunResponse, _processStreamedRunResponse;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) switch (_context9.prev = _context9.next) {\n          case 0:\n            _processStreamedRunResponse = function _processStreamedRunRe2() {\n              _processStreamedRunResponse = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(res, logger) {\n                var text, hasRunId, rejectDustRunIdPromise, resolveDustRunIdPromise, dustRunIdPromise, pendingEvents, parser, streamEvents;\n                return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n                  while (1) switch (_context8.prev = _context8.next) {\n                    case 0:\n                      if (!(!res.ok || !res.body)) {\n                        _context8.next = 5;\n                        break;\n                      }\n                      _context8.next = 3;\n                      return textFromResponse(res);\n                    case 3:\n                      text = _context8.sent;\n                      return _context8.abrupt(\"return\", new Err({\n                        type: \"dust_api_error\",\n                        message: \"Error running streamed app: status_code=\" + res.status + \" body=\" + text\n                      }));\n                    case 5:\n                      hasRunId = false;\n                      dustRunIdPromise = new Promise(function (resolve, reject) {\n                        rejectDustRunIdPromise = reject;\n                        resolveDustRunIdPromise = resolve;\n                      });\n                      pendingEvents = [];\n                      parser = (0,eventsource_parser__WEBPACK_IMPORTED_MODULE_3__.createParser)(function (event) {\n                        if (event.type === \"event\") {\n                          if (event.data) {\n                            try {\n                              var _data$content;\n                              var data = JSON.parse(event.data);\n                              switch (data.type) {\n                                case \"error\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"error\",\n                                      content: {\n                                        code: data.content.code,\n                                        message: data.content.message\n                                      }\n                                    });\n                                    break;\n                                  }\n                                case \"run_status\":\n                                  {\n                                    pendingEvents.push({\n                                      type: data.type,\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"block_status\":\n                                  {\n                                    pendingEvents.push({\n                                      type: data.type,\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"block_execution\":\n                                  {\n                                    pendingEvents.push({\n                                      type: data.type,\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"tokens\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"tokens\",\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"reasoning_tokens\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"reasoning_tokens\",\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"reasoning_item\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"reasoning_item\",\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"function_call\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"function_call\",\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"function_call_arguments_tokens\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"function_call_arguments_tokens\",\n                                      content: data.content\n                                    });\n                                    break;\n                                  }\n                                case \"final\":\n                                  {\n                                    pendingEvents.push({\n                                      type: \"final\"\n                                    });\n                                    break;\n                                  }\n                              }\n                              if ((_data$content = data.content) != null && _data$content.run_id && !hasRunId) {\n                                hasRunId = true;\n                                resolveDustRunIdPromise(data.content.run_id);\n                              }\n                            } catch (err) {\n                              logger.error({\n                                error: err\n                              }, \"Failed parsing chunk from Dust API\");\n                            }\n                          }\n                        }\n                      });\n                      streamEvents = /*#__PURE__*/function () {\n                        var _ref = _wrapAsyncGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n                          var reader, decoder, _yield$_awaitAsyncGen, value, done, _i, _pendingEvents, event;\n                          return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n                            while (1) switch (_context7.prev = _context7.next) {\n                              case 0:\n                                if (!(!res.body || typeof res.body === \"string\")) {\n                                  _context7.next = 2;\n                                  break;\n                                }\n                                throw new Error(\"Expected a stream response, but got a string or null\");\n                              case 2:\n                                reader = res.body.getReader();\n                                decoder = new TextDecoder();\n                                _context7.prev = 4;\n                              case 5:\n                                _context7.next = 7;\n                                return _awaitAsyncGenerator(reader.read());\n                              case 7:\n                                _yield$_awaitAsyncGen = _context7.sent;\n                                value = _yield$_awaitAsyncGen.value;\n                                done = _yield$_awaitAsyncGen.done;\n                                if (!value) {\n                                  _context7.next = 21;\n                                  break;\n                                }\n                                parser.feed(decoder.decode(value, {\n                                  stream: true\n                                }));\n                                _i = 0, _pendingEvents = pendingEvents;\n                              case 13:\n                                if (!(_i < _pendingEvents.length)) {\n                                  _context7.next = 20;\n                                  break;\n                                }\n                                event = _pendingEvents[_i];\n                                _context7.next = 17;\n                                return event;\n                              case 17:\n                                _i++;\n                                _context7.next = 13;\n                                break;\n                              case 20:\n                                pendingEvents = [];\n                              case 21:\n                                if (!done) {\n                                  _context7.next = 23;\n                                  break;\n                                }\n                                return _context7.abrupt(\"break\", 25);\n                              case 23:\n                                _context7.next = 5;\n                                break;\n                              case 25:\n                                if (!hasRunId) {\n                                  // Once the stream is entirely consumed, if we haven't received a run id, reject the\n                                  // promise.\n                                  setImmediate(function () {\n                                    logger.error({}, \"No run id received.\");\n                                    rejectDustRunIdPromise(new Error(\"No run id received\"));\n                                  });\n                                }\n                                _context7.next = 33;\n                                break;\n                              case 28:\n                                _context7.prev = 28;\n                                _context7.t0 = _context7[\"catch\"](4);\n                                logger.error({\n                                  error: _context7.t0,\n                                  errorStr: JSON.stringify(_context7.t0),\n                                  errorSource: \"processStreamedRunResponse\"\n                                }, \"DustAPI error: streaming chunks\");\n                                _context7.next = 33;\n                                return {\n                                  type: \"error\",\n                                  content: {\n                                    code: \"stream_error\",\n                                    message: \"Error streaming chunks\"\n                                  }\n                                };\n                              case 33:\n                              case \"end\":\n                                return _context7.stop();\n                            }\n                          }, _callee7, null, [[4, 28]]);\n                        }));\n                        return function streamEvents() {\n                          return _ref.apply(this, arguments);\n                        };\n                      }();\n                      return _context8.abrupt(\"return\", new Ok({\n                        eventStream: streamEvents(),\n                        dustRunId: dustRunIdPromise\n                      }));\n                    case 11:\n                    case \"end\":\n                      return _context8.stop();\n                  }\n                }, _callee8);\n              }));\n              return _processStreamedRunResponse.apply(this, arguments);\n            };\n            processStreamedRunResponse = function _processStreamedRunRe(_x11, _x12) {\n              return _processStreamedRunResponse.apply(this, arguments);\n            };\n            workspaceId = _ref6.workspaceId, appId = _ref6.appId, appHash = _ref6.appHash, appSpaceId = _ref6.appSpaceId;\n            _ref7 = _temp2 === void 0 ? {\n              useWorkspaceCredentials: false\n            } : _temp2, useWorkspaceCredentials = _ref7.useWorkspaceCredentials;\n            _context9.next = 6;\n            return this.request({\n              overrideWorkspaceId: workspaceId,\n              path: \"spaces/\" + appSpaceId + \"/apps/\" + appId + \"/runs\",\n              query: new URLSearchParams({\n                use_workspace_credentials: useWorkspaceCredentials ? \"true\" : \"false\"\n              }),\n              method: \"POST\",\n              body: {\n                specification_hash: appHash,\n                config: config,\n                stream: true,\n                blocking: false,\n                inputs: inputs\n              },\n              stream: true\n            });\n          case 6:\n            res = _context9.sent;\n            if (!res.isErr()) {\n              _context9.next = 9;\n              break;\n            }\n            return _context9.abrupt(\"return\", res);\n          case 9:\n            return _context9.abrupt(\"return\", processStreamedRunResponse(res.value.response, this._logger));\n          case 10:\n          case \"end\":\n            return _context9.stop();\n        }\n      }, _callee9, this);\n    }));\n    function runAppStreamed(_x7, _x8, _x9, _x10) {\n      return _runAppStreamed.apply(this, arguments);\n    }\n    return runAppStreamed;\n  }()\n  /**\n   * This actions talks to the Dust production API to retrieve the list of data sources of the\n   * current workspace.\n   */\n  ;\n  _proto.getDataSources =\n  /*#__PURE__*/\n  function () {\n    var _getDataSources = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"data_sources\"\n            });\n          case 2:\n            res = _context10.sent;\n            _context10.next = 5;\n            return this._resultFromResponse(GetDataSourcesResponseSchema, res);\n          case 5:\n            r = _context10.sent;\n            if (!r.isErr()) {\n              _context10.next = 8;\n              break;\n            }\n            return _context10.abrupt(\"return\", r);\n          case 8:\n            return _context10.abrupt(\"return\", new Ok(r.value.data_sources));\n          case 9:\n          case \"end\":\n            return _context10.stop();\n        }\n      }, _callee10, this);\n    }));\n    function getDataSources() {\n      return _getDataSources.apply(this, arguments);\n    }\n    return getDataSources;\n  }();\n  _proto.getAgentConfigurations = /*#__PURE__*/function () {\n    var _getAgentConfigurations = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(_ref8) {\n      var view, _ref8$includes, includes, getQueryString, queryString, path, res, r;\n      return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n        while (1) switch (_context11.prev = _context11.next) {\n          case 0:\n            getQueryString = function _getQueryString() {\n              var params = new URLSearchParams();\n              if (typeof view === \"string\") {\n                params.append(\"view\", view);\n              }\n              if (includes.includes(\"authors\")) {\n                params.append(\"withAuthors\", \"true\");\n              }\n              return params.toString();\n            };\n            view = _ref8.view, _ref8$includes = _ref8.includes, includes = _ref8$includes === void 0 ? [] : _ref8$includes; // Function to generate query parameters.\n            queryString = view || includes.length > 0 ? getQueryString() : null;\n            path = queryString ? \"assistant/agent_configurations?\" + queryString : \"assistant/agent_configurations\";\n            _context11.next = 6;\n            return this.request({\n              path: path,\n              method: \"GET\"\n            });\n          case 6:\n            res = _context11.sent;\n            _context11.next = 9;\n            return this._resultFromResponse(GetAgentConfigurationsResponseSchema, res);\n          case 9:\n            r = _context11.sent;\n            if (!r.isErr()) {\n              _context11.next = 12;\n              break;\n            }\n            return _context11.abrupt(\"return\", r);\n          case 12:\n            return _context11.abrupt(\"return\", new Ok(r.value.agentConfigurations));\n          case 13:\n          case \"end\":\n            return _context11.stop();\n        }\n      }, _callee11, this);\n    }));\n    function getAgentConfigurations(_x13) {\n      return _getAgentConfigurations.apply(this, arguments);\n    }\n    return getAgentConfigurations;\n  }();\n  _proto.postContentFragment = /*#__PURE__*/function () {\n    var _postContentFragment = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(_ref9) {\n      var conversationId, contentFragment, res, r;\n      return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n        while (1) switch (_context12.prev = _context12.next) {\n          case 0:\n            conversationId = _ref9.conversationId, contentFragment = _ref9.contentFragment;\n            _context12.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/content_fragments\",\n              body: _extends({}, contentFragment)\n            });\n          case 3:\n            res = _context12.sent;\n            _context12.next = 6;\n            return this._resultFromResponse(PostContentFragmentResponseSchema, res);\n          case 6:\n            r = _context12.sent;\n            if (!r.isErr()) {\n              _context12.next = 9;\n              break;\n            }\n            return _context12.abrupt(\"return\", r);\n          case 9:\n            return _context12.abrupt(\"return\", new Ok(r.value.contentFragment));\n          case 10:\n          case \"end\":\n            return _context12.stop();\n        }\n      }, _callee12, this);\n    }));\n    function postContentFragment(_x14) {\n      return _postContentFragment.apply(this, arguments);\n    }\n    return postContentFragment;\n  }();\n  _proto.createGenericAgentConfiguration = /*#__PURE__*/function () {\n    var _createGenericAgentConfiguration = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(_ref10) {\n      var name, description, instructions, emoji, subAgentName, subAgentDescription, subAgentInstructions, subAgentEmoji, res, r;\n      return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n        while (1) switch (_context13.prev = _context13.next) {\n          case 0:\n            name = _ref10.name, description = _ref10.description, instructions = _ref10.instructions, emoji = _ref10.emoji, subAgentName = _ref10.subAgentName, subAgentDescription = _ref10.subAgentDescription, subAgentInstructions = _ref10.subAgentInstructions, subAgentEmoji = _ref10.subAgentEmoji;\n            _context13.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/generic_agents\",\n              body: {\n                name: name,\n                description: description,\n                instructions: instructions,\n                emoji: emoji,\n                subAgentName: subAgentName,\n                subAgentDescription: subAgentDescription,\n                subAgentInstructions: subAgentInstructions,\n                subAgentEmoji: subAgentEmoji\n              }\n            });\n          case 3:\n            res = _context13.sent;\n            _context13.next = 6;\n            return this._resultFromResponse(CreateGenericAgentConfigurationResponseSchema, res);\n          case 6:\n            r = _context13.sent;\n            if (!r.isErr()) {\n              _context13.next = 9;\n              break;\n            }\n            return _context13.abrupt(\"return\", r);\n          case 9:\n            return _context13.abrupt(\"return\", new Ok(r.value));\n          case 10:\n          case \"end\":\n            return _context13.stop();\n        }\n      }, _callee13, this);\n    }));\n    function createGenericAgentConfiguration(_x15) {\n      return _createGenericAgentConfiguration.apply(this, arguments);\n    }\n    return createGenericAgentConfiguration;\n  }() // When creating a conversation with a user message, the API returns only after the user message\n  // was created (and if applicable the associated agent messages).\n  ;\n  _proto.createConversation =\n  /*#__PURE__*/\n  function () {\n    var _createConversation = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(_ref11) {\n      var title, visibility, depth, message, contentFragment, contentFragments, _ref11$blocking, blocking, _ref11$skipToolsValid, skipToolsValidation, params, queryParams, res;\n      return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n        while (1) switch (_context14.prev = _context14.next) {\n          case 0:\n            title = _ref11.title, visibility = _ref11.visibility, depth = _ref11.depth, message = _ref11.message, contentFragment = _ref11.contentFragment, contentFragments = _ref11.contentFragments, _ref11$blocking = _ref11.blocking, blocking = _ref11$blocking === void 0 ? false : _ref11$blocking, _ref11$skipToolsValid = _ref11.skipToolsValidation, skipToolsValidation = _ref11$skipToolsValid === void 0 ? false : _ref11$skipToolsValid, params = _ref11.params;\n            queryParams = new URLSearchParams(params);\n            _context14.next = 4;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations\",\n              query: queryParams.toString() ? queryParams : undefined,\n              body: {\n                title: title,\n                visibility: visibility,\n                depth: depth,\n                message: message,\n                contentFragment: contentFragment,\n                contentFragments: contentFragments,\n                blocking: blocking,\n                skipToolsValidation: skipToolsValidation\n              }\n            });\n          case 4:\n            res = _context14.sent;\n            return _context14.abrupt(\"return\", this._resultFromResponse(CreateConversationResponseSchema, res));\n          case 6:\n          case \"end\":\n            return _context14.stop();\n        }\n      }, _callee14, this);\n    }));\n    function createConversation(_x16) {\n      return _createConversation.apply(this, arguments);\n    }\n    return createConversation;\n  }();\n  _proto.postUserMessage = /*#__PURE__*/function () {\n    var _postUserMessage = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(_ref12) {\n      var conversationId, message, res, r;\n      return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n        while (1) switch (_context15.prev = _context15.next) {\n          case 0:\n            conversationId = _ref12.conversationId, message = _ref12.message;\n            _context15.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/messages\",\n              body: _extends({}, message)\n            });\n          case 3:\n            res = _context15.sent;\n            _context15.next = 6;\n            return this._resultFromResponse(PostUserMessageResponseSchema, res);\n          case 6:\n            r = _context15.sent;\n            if (!r.isErr()) {\n              _context15.next = 9;\n              break;\n            }\n            return _context15.abrupt(\"return\", r);\n          case 9:\n            return _context15.abrupt(\"return\", new Ok(r.value.message));\n          case 10:\n          case \"end\":\n            return _context15.stop();\n        }\n      }, _callee15, this);\n    }));\n    function postUserMessage(_x17) {\n      return _postUserMessage.apply(this, arguments);\n    }\n    return postUserMessage;\n  }();\n  _proto.streamAgentAnswerEvents = /*#__PURE__*/function () {\n    var _streamAgentAnswerEvents = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(_ref13) {\n      var _options$maxReconnect, _options$reconnectDel, _options$autoReconnec;\n      var conversation, userMessageId, signal, _ref13$options, options, agentMessages, agentMessage;\n      return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n        while (1) switch (_context16.prev = _context16.next) {\n          case 0:\n            conversation = _ref13.conversation, userMessageId = _ref13.userMessageId, signal = _ref13.signal, _ref13$options = _ref13.options, options = _ref13$options === void 0 ? {\n              maxReconnectAttempts: DEFAULT_MAX_RECONNECT_ATTEMPTS,\n              reconnectDelay: DEFAULT_RECONNECT_DELAY,\n              autoReconnect: true\n            } : _ref13$options;\n            agentMessages = conversation.content.map(function (versions) {\n              var m = versions[versions.length - 1];\n              return m;\n            }).filter(function (m) {\n              return m && m.type === \"agent_message\" && m.parentMessageId === userMessageId;\n            });\n            if (!(agentMessages.length === 0)) {\n              _context16.next = 4;\n              break;\n            }\n            return _context16.abrupt(\"return\", new Err(new Error(\"Failed to retrieve agent message\")));\n          case 4:\n            agentMessage = agentMessages[0];\n            return _context16.abrupt(\"return\", this.streamAgentMessageEvents({\n              conversation: conversation,\n              agentMessage: agentMessage,\n              signal: signal,\n              options: {\n                maxReconnectAttempts: (_options$maxReconnect = options.maxReconnectAttempts) != null ? _options$maxReconnect : DEFAULT_MAX_RECONNECT_ATTEMPTS,\n                reconnectDelay: (_options$reconnectDel = options.reconnectDelay) != null ? _options$reconnectDel : DEFAULT_RECONNECT_DELAY,\n                autoReconnect: (_options$autoReconnec = options.autoReconnect) != null ? _options$autoReconnec : true\n              }\n            }));\n          case 6:\n          case \"end\":\n            return _context16.stop();\n        }\n      }, _callee16, this);\n    }));\n    function streamAgentAnswerEvents(_x18) {\n      return _streamAgentAnswerEvents.apply(this, arguments);\n    }\n    return streamAgentAnswerEvents;\n  }();\n  _proto.streamAgentMessageEvents = /*#__PURE__*/function () {\n    var _streamAgentMessageEvents = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(_ref14) {\n      var _this = this;\n      var conversation, agentMessage, signal, options, maxReconnectAttempts, reconnectDelay, autoReconnect, lastEventId, terminalEventTypes, createRequest, logger, reconnectAttempts, receivedTerminalEvent, streamEventsWithReconnection;\n      return _regeneratorRuntime().wrap(function _callee19$(_context20) {\n        while (1) switch (_context20.prev = _context20.next) {\n          case 0:\n            conversation = _ref14.conversation, agentMessage = _ref14.agentMessage, signal = _ref14.signal, options = _ref14.options;\n            maxReconnectAttempts = options.maxReconnectAttempts, reconnectDelay = options.reconnectDelay, autoReconnect = options.autoReconnect;\n            lastEventId = null;\n            terminalEventTypes = [\"agent_message_success\", \"agent_error\", \"agent_generation_cancelled\", \"user_message_error\"];\n            createRequest = /*#__PURE__*/function () {\n              var _ref15 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(lastId) {\n                var path;\n                return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n                  while (1) switch (_context17.prev = _context17.next) {\n                    case 0:\n                      path = \"assistant/conversations/\" + conversation.sId + \"/messages/\" + agentMessage.sId + \"/events\";\n                      if (lastId) {\n                        path += \"?lastEventId=\" + lastId;\n                      }\n                      return _context17.abrupt(\"return\", _this.request({\n                        method: \"GET\",\n                        path: path,\n                        signal: signal,\n                        stream: true\n                      }));\n                    case 3:\n                    case \"end\":\n                      return _context17.stop();\n                  }\n                }, _callee17);\n              }));\n              return function createRequest(_x20) {\n                return _ref15.apply(this, arguments);\n              };\n            }();\n            logger = this._logger;\n            reconnectAttempts = 0;\n            receivedTerminalEvent = false;\n            streamEventsWithReconnection = /*#__PURE__*/function () {\n              var _ref2 = _wrapAsyncGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18() {\n                var _loop, _ret;\n                return _regeneratorRuntime().wrap(function _callee18$(_context19) {\n                  while (1) switch (_context19.prev = _context19.next) {\n                    case 0:\n                      _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n                        var res, error, pendingEvents, parser, reader, decoder, _yield$_awaitAsyncGen2, value, done, _iterator, _step, event;\n                        return _regeneratorRuntime().wrap(function _loop$(_context18) {\n                          while (1) switch (_context18.prev = _context18.next) {\n                            case 0:\n                              if (!(signal != null && signal.aborted)) {\n                                _context18.next = 2;\n                                break;\n                              }\n                              return _context18.abrupt(\"return\", {\n                                v: void 0\n                              });\n                            case 2:\n                              _context18.next = 4;\n                              return _awaitAsyncGenerator(createRequest(lastEventId));\n                            case 4:\n                              res = _context18.sent;\n                              if (!res.isErr()) {\n                                _context18.next = 8;\n                                break;\n                              }\n                              error = res.error;\n                              throw new Error(\"Error requesting event stream: \" + error.message);\n                            case 8:\n                              if (!(!res.value.response.ok || !res.value.response.body)) {\n                                _context18.next = 10;\n                                break;\n                              }\n                              throw new Error(\"Error requesting event stream: status_code=\" + res.value.response.status);\n                            case 10:\n                              pendingEvents = [];\n                              parser = (0,eventsource_parser__WEBPACK_IMPORTED_MODULE_3__.createParser)(function (event) {\n                                if (event.type === \"event\") {\n                                  if (event.data) {\n                                    try {\n                                      var eventData = JSON.parse(event.data);\n                                      if (eventData.eventId) {\n                                        lastEventId = eventData.eventId;\n                                      }\n                                      pendingEvents.push(eventData.data);\n                                    } catch (err) {\n                                      logger.error({\n                                        error: err\n                                      }, \"Failed parsing chunk from Dust API\");\n                                    }\n                                  }\n                                }\n                              });\n                              if (!(!res.value.response.body || typeof res.value.response.body === \"string\")) {\n                                _context18.next = 14;\n                                break;\n                              }\n                              throw new Error(\"Expected a stream response, but got a string or null\");\n                            case 14:\n                              reader = res.value.response.body.getReader();\n                              decoder = new TextDecoder();\n                              _context18.prev = 16;\n                            case 17:\n                              _context18.next = 19;\n                              return _awaitAsyncGenerator(reader.read());\n                            case 19:\n                              _yield$_awaitAsyncGen2 = _context18.sent;\n                              value = _yield$_awaitAsyncGen2.value;\n                              done = _yield$_awaitAsyncGen2.done;\n                              if (!value) {\n                                _context18.next = 33;\n                                break;\n                              }\n                              parser.feed(decoder.decode(value, {\n                                stream: true\n                              }));\n                              _iterator = _createForOfIteratorHelperLoose(pendingEvents);\n                            case 25:\n                              if ((_step = _iterator()).done) {\n                                _context18.next = 32;\n                                break;\n                              }\n                              event = _step.value;\n                              _context18.next = 29;\n                              return event;\n                            case 29:\n                              if (terminalEventTypes.includes(event.type)) {\n                                receivedTerminalEvent = true;\n                              }\n                            case 30:\n                              _context18.next = 25;\n                              break;\n                            case 32:\n                              pendingEvents = [];\n                            case 33:\n                              if (!done) {\n                                _context18.next = 35;\n                                break;\n                              }\n                              return _context18.abrupt(\"break\", 37);\n                            case 35:\n                              _context18.next = 17;\n                              break;\n                            case 37:\n                              _context18.next = 43;\n                              break;\n                            case 39:\n                              _context18.prev = 39;\n                              _context18.t0 = _context18[\"catch\"](16);\n                              logger.error({\n                                error: _context18.t0\n                              }, \"Failed processing event stream\");\n                              throw new Error(\"Error processing event stream: \" + _context18.t0);\n                            case 43:\n                              _context18.prev = 43;\n                              reader.releaseLock();\n                              return _context18.finish(43);\n                            case 46:\n                              if (!(!receivedTerminalEvent && autoReconnect)) {\n                                _context18.next = 53;\n                                break;\n                              }\n                              reconnectAttempts += 1;\n                              if (!(reconnectAttempts >= maxReconnectAttempts)) {\n                                _context18.next = 50;\n                                break;\n                              }\n                              throw new Error(\"Exceeded maximum reconnection attempts\");\n                            case 50:\n                              _context18.next = 52;\n                              return _awaitAsyncGenerator(new Promise(function (resolve) {\n                                return setTimeout(resolve, reconnectDelay);\n                              }));\n                            case 52:\n                              return _context18.abrupt(\"return\", 0);\n                            case 53:\n                              return _context18.abrupt(\"return\", {\n                                v: void 0\n                              });\n                            case 54:\n                            case \"end\":\n                              return _context18.stop();\n                          }\n                        }, _loop, null, [[16, 39, 43, 46]]);\n                      });\n                    case 1:\n                      return _context19.delegateYield(_loop(), \"t0\", 3);\n                    case 3:\n                      _ret = _context19.t0;\n                      if (!(_ret === 0)) {\n                        _context19.next = 6;\n                        break;\n                      }\n                      return _context19.abrupt(\"continue\", 1);\n                    case 6:\n                      if (!_ret) {\n                        _context19.next = 8;\n                        break;\n                      }\n                      return _context19.abrupt(\"return\", _ret.v);\n                    case 8:\n                      _context19.next = 1;\n                      break;\n                    case 10:\n                    case \"end\":\n                      return _context19.stop();\n                  }\n                }, _callee18);\n              }));\n              return function streamEventsWithReconnection() {\n                return _ref2.apply(this, arguments);\n              };\n            }();\n            return _context20.abrupt(\"return\", new Ok({\n              eventStream: streamEventsWithReconnection()\n            }));\n          case 10:\n          case \"end\":\n            return _context20.stop();\n        }\n      }, _callee19, this);\n    }));\n    function streamAgentMessageEvents(_x19) {\n      return _streamAgentMessageEvents.apply(this, arguments);\n    }\n    return streamAgentMessageEvents;\n  }();\n  _proto.cancelMessageGeneration = /*#__PURE__*/function () {\n    var _cancelMessageGeneration = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(_ref16) {\n      var conversationId, messageIds, res, r;\n      return _regeneratorRuntime().wrap(function _callee20$(_context21) {\n        while (1) switch (_context21.prev = _context21.next) {\n          case 0:\n            conversationId = _ref16.conversationId, messageIds = _ref16.messageIds;\n            _context21.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/cancel\",\n              body: {\n                messageIds: messageIds\n              }\n            });\n          case 3:\n            res = _context21.sent;\n            _context21.next = 6;\n            return this._resultFromResponse(CancelMessageGenerationResponseSchema, res);\n          case 6:\n            r = _context21.sent;\n            if (!r.isErr()) {\n              _context21.next = 11;\n              break;\n            }\n            return _context21.abrupt(\"return\", r);\n          case 11:\n            return _context21.abrupt(\"return\", new Ok(r.value));\n          case 12:\n          case \"end\":\n            return _context21.stop();\n        }\n      }, _callee20, this);\n    }));\n    function cancelMessageGeneration(_x21) {\n      return _cancelMessageGeneration.apply(this, arguments);\n    }\n    return cancelMessageGeneration;\n  }();\n  _proto.getConversations = /*#__PURE__*/function () {\n    var _getConversations = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee21$(_context22) {\n        while (1) switch (_context22.prev = _context22.next) {\n          case 0:\n            _context22.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"assistant/conversations\"\n            });\n          case 2:\n            res = _context22.sent;\n            _context22.next = 5;\n            return this._resultFromResponse(GetConversationsResponseSchema, res);\n          case 5:\n            r = _context22.sent;\n            if (!r.isErr()) {\n              _context22.next = 8;\n              break;\n            }\n            return _context22.abrupt(\"return\", r);\n          case 8:\n            return _context22.abrupt(\"return\", new Ok(r.value.conversations));\n          case 9:\n          case \"end\":\n            return _context22.stop();\n        }\n      }, _callee21, this);\n    }));\n    function getConversations() {\n      return _getConversations.apply(this, arguments);\n    }\n    return getConversations;\n  }();\n  _proto.getConversation = /*#__PURE__*/function () {\n    var _getConversation = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(_ref17) {\n      var conversationId, res, r;\n      return _regeneratorRuntime().wrap(function _callee22$(_context23) {\n        while (1) switch (_context23.prev = _context23.next) {\n          case 0:\n            conversationId = _ref17.conversationId;\n            _context23.next = 3;\n            return this.request({\n              method: \"GET\",\n              path: \"assistant/conversations/\" + conversationId\n            });\n          case 3:\n            res = _context23.sent;\n            _context23.next = 6;\n            return this._resultFromResponse(GetConversationResponseSchema, res);\n          case 6:\n            r = _context23.sent;\n            if (!r.isErr()) {\n              _context23.next = 9;\n              break;\n            }\n            return _context23.abrupt(\"return\", r);\n          case 9:\n            return _context23.abrupt(\"return\", new Ok(r.value.conversation));\n          case 10:\n          case \"end\":\n            return _context23.stop();\n        }\n      }, _callee22, this);\n    }));\n    function getConversation(_x22) {\n      return _getConversation.apply(this, arguments);\n    }\n    return getConversation;\n  }();\n  _proto.getConversationFeedback = /*#__PURE__*/function () {\n    var _getConversationFeedback = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(_ref18) {\n      var conversationId, res, r;\n      return _regeneratorRuntime().wrap(function _callee23$(_context24) {\n        while (1) switch (_context24.prev = _context24.next) {\n          case 0:\n            conversationId = _ref18.conversationId;\n            _context24.next = 3;\n            return this.request({\n              method: \"GET\",\n              path: \"assistant/conversations/\" + conversationId + \"/feedbacks\"\n            });\n          case 3:\n            res = _context24.sent;\n            _context24.next = 6;\n            return this._resultFromResponse(GetFeedbacksResponseSchema, res);\n          case 6:\n            r = _context24.sent;\n            if (!r.isErr()) {\n              _context24.next = 9;\n              break;\n            }\n            return _context24.abrupt(\"return\", r);\n          case 9:\n            return _context24.abrupt(\"return\", new Ok(r.value.feedbacks));\n          case 10:\n          case \"end\":\n            return _context24.stop();\n        }\n      }, _callee23, this);\n    }));\n    function getConversationFeedback(_x23) {\n      return _getConversationFeedback.apply(this, arguments);\n    }\n    return getConversationFeedback;\n  }();\n  _proto.postFeedback = /*#__PURE__*/function () {\n    var _postFeedback = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(conversationId, messageId, feedback) {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee24$(_context25) {\n        while (1) switch (_context25.prev = _context25.next) {\n          case 0:\n            _context25.next = 2;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/messages/\" + messageId + \"/feedbacks\",\n              body: feedback\n            });\n          case 2:\n            res = _context25.sent;\n            return _context25.abrupt(\"return\", this._resultFromResponse(PostMessageFeedbackResponseSchema, res));\n          case 4:\n          case \"end\":\n            return _context25.stop();\n        }\n      }, _callee24, this);\n    }));\n    function postFeedback(_x24, _x25, _x26) {\n      return _postFeedback.apply(this, arguments);\n    }\n    return postFeedback;\n  }();\n  _proto.deleteFeedback = /*#__PURE__*/function () {\n    var _deleteFeedback = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(conversationId, messageId) {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee25$(_context26) {\n        while (1) switch (_context26.prev = _context26.next) {\n          case 0:\n            _context26.next = 2;\n            return this.request({\n              method: \"DELETE\",\n              path: \"assistant/conversations/\" + conversationId + \"/messages/\" + messageId + \"/feedbacks\"\n            });\n          case 2:\n            res = _context26.sent;\n            return _context26.abrupt(\"return\", this._resultFromResponse(PostMessageFeedbackResponseSchema, res));\n          case 4:\n          case \"end\":\n            return _context26.stop();\n        }\n      }, _callee25, this);\n    }));\n    function deleteFeedback(_x27, _x28) {\n      return _deleteFeedback.apply(this, arguments);\n    }\n    return deleteFeedback;\n  }();\n  _proto.tokenize = /*#__PURE__*/function () {\n    var _tokenize = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(text, dataSourceId) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee26$(_context27) {\n        while (1) switch (_context27.prev = _context27.next) {\n          case 0:\n            _context27.next = 2;\n            return this.request({\n              method: \"POST\",\n              path: \"data_sources/\" + dataSourceId + \"/tokenize\",\n              body: {\n                text: text\n              }\n            });\n          case 2:\n            res = _context27.sent;\n            _context27.next = 5;\n            return this._resultFromResponse(TokenizeResponseSchema, res);\n          case 5:\n            r = _context27.sent;\n            if (!r.isErr()) {\n              _context27.next = 8;\n              break;\n            }\n            return _context27.abrupt(\"return\", r);\n          case 8:\n            return _context27.abrupt(\"return\", new Ok(r.value.tokens));\n          case 9:\n          case \"end\":\n            return _context27.stop();\n        }\n      }, _callee26, this);\n    }));\n    function tokenize(_x29, _x30) {\n      return _tokenize.apply(this, arguments);\n    }\n    return tokenize;\n  }();\n  _proto.upsertFolder = /*#__PURE__*/function () {\n    var _upsertFolder = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(_ref19) {\n      var dataSourceId, folderId, timestamp, title, parentId, parents, mimeType, sourceUrl, providerVisibility, res, r;\n      return _regeneratorRuntime().wrap(function _callee27$(_context28) {\n        while (1) switch (_context28.prev = _context28.next) {\n          case 0:\n            dataSourceId = _ref19.dataSourceId, folderId = _ref19.folderId, timestamp = _ref19.timestamp, title = _ref19.title, parentId = _ref19.parentId, parents = _ref19.parents, mimeType = _ref19.mimeType, sourceUrl = _ref19.sourceUrl, providerVisibility = _ref19.providerVisibility;\n            _context28.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"data_sources/\" + dataSourceId + \"/folders/\" + encodeURIComponent(folderId),\n              body: {\n                timestamp: Math.floor(timestamp),\n                title: title,\n                parent_id: parentId,\n                parents: parents,\n                mime_type: mimeType,\n                source_url: sourceUrl,\n                provider_visibility: providerVisibility\n              }\n            });\n          case 3:\n            res = _context28.sent;\n            _context28.next = 6;\n            return this._resultFromResponse(UpsertFolderResponseSchema, res);\n          case 6:\n            r = _context28.sent;\n            if (!r.isErr()) {\n              _context28.next = 9;\n              break;\n            }\n            return _context28.abrupt(\"return\", r);\n          case 9:\n            return _context28.abrupt(\"return\", new Ok(r.value));\n          case 10:\n          case \"end\":\n            return _context28.stop();\n        }\n      }, _callee27, this);\n    }));\n    function upsertFolder(_x31) {\n      return _upsertFolder.apply(this, arguments);\n    }\n    return upsertFolder;\n  }();\n  _proto.deleteFolder = /*#__PURE__*/function () {\n    var _deleteFolder = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(_ref20) {\n      var dataSourceId, folderId, res, r;\n      return _regeneratorRuntime().wrap(function _callee28$(_context29) {\n        while (1) switch (_context29.prev = _context29.next) {\n          case 0:\n            dataSourceId = _ref20.dataSourceId, folderId = _ref20.folderId;\n            _context29.next = 3;\n            return this.request({\n              method: \"DELETE\",\n              path: \"data_sources/\" + dataSourceId + \"/folders/\" + encodeURIComponent(folderId)\n            });\n          case 3:\n            res = _context29.sent;\n            _context29.next = 6;\n            return this._resultFromResponse(DeleteFolderResponseSchema, res);\n          case 6:\n            r = _context29.sent;\n            if (!r.isErr()) {\n              _context29.next = 9;\n              break;\n            }\n            return _context29.abrupt(\"return\", r);\n          case 9:\n            return _context29.abrupt(\"return\", new Ok(r.value));\n          case 10:\n          case \"end\":\n            return _context29.stop();\n        }\n      }, _callee28, this);\n    }));\n    function deleteFolder(_x32) {\n      return _deleteFolder.apply(this, arguments);\n    }\n    return deleteFolder;\n  }();\n  _proto.uploadFile = /*#__PURE__*/function () {\n    var _uploadFile = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(_ref21) {\n      var contentType, fileName, fileSize, useCase, useCaseMetadata, fileObject, res, fileRes, file, formData, headers, response, _errorData$error, errorData, responseData;\n      return _regeneratorRuntime().wrap(function _callee29$(_context30) {\n        while (1) switch (_context30.prev = _context30.next) {\n          case 0:\n            contentType = _ref21.contentType, fileName = _ref21.fileName, fileSize = _ref21.fileSize, useCase = _ref21.useCase, useCaseMetadata = _ref21.useCaseMetadata, fileObject = _ref21.fileObject;\n            _context30.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"files\",\n              body: {\n                contentType: contentType,\n                fileName: fileName,\n                fileSize: fileSize,\n                useCase: useCase,\n                useCaseMetadata: useCaseMetadata\n              }\n            });\n          case 3:\n            res = _context30.sent;\n            _context30.next = 6;\n            return this._resultFromResponse(FileUploadRequestResponseSchema, res);\n          case 6:\n            fileRes = _context30.sent;\n            if (!fileRes.isErr()) {\n              _context30.next = 9;\n              break;\n            }\n            return _context30.abrupt(\"return\", fileRes);\n          case 9:\n            file = fileRes.value.file;\n            formData = new FormData();\n            formData.append(\"file\", fileObject);\n            // Upload file to the obtained URL.\n            _context30.prev = 12;\n            _context30.next = 15;\n            return this.baseHeaders();\n          case 15:\n            headers = _context30.sent;\n            _context30.next = 18;\n            return fetch(file.uploadUrl, {\n              method: \"POST\",\n              headers: headers,\n              body: formData\n            });\n          case 18:\n            response = _context30.sent;\n            if (response.ok) {\n              _context30.next = 24;\n              break;\n            }\n            _context30.next = 22;\n            return response.json()[\"catch\"](function () {\n              return {};\n            });\n          case 22:\n            errorData = _context30.sent;\n            return _context30.abrupt(\"return\", new Err(new Error((errorData == null || (_errorData$error = errorData.error) == null ? void 0 : _errorData$error.message) || \"Failed to upload file: \" + response.status)));\n          case 24:\n            _context30.next = 26;\n            return response.json();\n          case 26:\n            responseData = _context30.sent;\n            return _context30.abrupt(\"return\", new Ok(responseData.file));\n          case 30:\n            _context30.prev = 30;\n            _context30.t0 = _context30[\"catch\"](12);\n            return _context30.abrupt(\"return\", new Err(new Error(_context30.t0 instanceof Error ? _context30.t0.message : \"Unknown error\")));\n          case 33:\n          case \"end\":\n            return _context30.stop();\n        }\n      }, _callee29, this, [[12, 30]]);\n    }));\n    function uploadFile(_x33) {\n      return _uploadFile.apply(this, arguments);\n    }\n    return uploadFile;\n  }();\n  _proto.deleteFile = /*#__PURE__*/function () {\n    var _deleteFile = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(_ref22) {\n      var fileID, res;\n      return _regeneratorRuntime().wrap(function _callee30$(_context31) {\n        while (1) switch (_context31.prev = _context31.next) {\n          case 0:\n            fileID = _ref22.fileID;\n            _context31.next = 3;\n            return this.request({\n              method: \"DELETE\",\n              path: \"files/\" + fileID\n            });\n          case 3:\n            res = _context31.sent;\n            return _context31.abrupt(\"return\", res);\n          case 5:\n          case \"end\":\n            return _context31.stop();\n        }\n      }, _callee30, this);\n    }));\n    function deleteFile(_x34) {\n      return _deleteFile.apply(this, arguments);\n    }\n    return deleteFile;\n  }();\n  _proto.getActiveMemberEmailsInWorkspace = /*#__PURE__*/function () {\n    var _getActiveMemberEmailsInWorkspace = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee31$(_context32) {\n        while (1) switch (_context32.prev = _context32.next) {\n          case 0:\n            _context32.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"members/emails\",\n              query: new URLSearchParams({\n                activeOnly: \"true\"\n              })\n            });\n          case 2:\n            res = _context32.sent;\n            _context32.next = 5;\n            return this._resultFromResponse(GetActiveMemberEmailsInWorkspaceResponseSchema, res);\n          case 5:\n            r = _context32.sent;\n            if (!r.isErr()) {\n              _context32.next = 8;\n              break;\n            }\n            return _context32.abrupt(\"return\", r);\n          case 8:\n            return _context32.abrupt(\"return\", new Ok(r.value.emails));\n          case 9:\n          case \"end\":\n            return _context32.stop();\n        }\n      }, _callee31, this);\n    }));\n    function getActiveMemberEmailsInWorkspace() {\n      return _getActiveMemberEmailsInWorkspace.apply(this, arguments);\n    }\n    return getActiveMemberEmailsInWorkspace;\n  }();\n  _proto.getWorkspaceVerifiedDomains = /*#__PURE__*/function () {\n    var _getWorkspaceVerifiedDomains = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee32$(_context33) {\n        while (1) switch (_context33.prev = _context33.next) {\n          case 0:\n            _context33.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"verified_domains\"\n            });\n          case 2:\n            res = _context33.sent;\n            _context33.next = 5;\n            return this._resultFromResponse(GetWorkspaceVerifiedDomainsResponseSchema, res);\n          case 5:\n            r = _context33.sent;\n            if (!r.isErr()) {\n              _context33.next = 8;\n              break;\n            }\n            return _context33.abrupt(\"return\", r);\n          case 8:\n            return _context33.abrupt(\"return\", new Ok(r.value.verified_domains));\n          case 9:\n          case \"end\":\n            return _context33.stop();\n        }\n      }, _callee32, this);\n    }));\n    function getWorkspaceVerifiedDomains() {\n      return _getWorkspaceVerifiedDomains.apply(this, arguments);\n    }\n    return getWorkspaceVerifiedDomains;\n  }();\n  _proto.getWorkspaceFeatureFlags = /*#__PURE__*/function () {\n    var _getWorkspaceFeatureFlags = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee33$(_context34) {\n        while (1) switch (_context34.prev = _context34.next) {\n          case 0:\n            _context34.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"feature_flags\"\n            });\n          case 2:\n            res = _context34.sent;\n            _context34.next = 5;\n            return this._resultFromResponse(GetWorkspaceFeatureFlagsResponseSchema, res);\n          case 5:\n            r = _context34.sent;\n            if (!r.isErr()) {\n              _context34.next = 8;\n              break;\n            }\n            return _context34.abrupt(\"return\", r);\n          case 8:\n            return _context34.abrupt(\"return\", new Ok(r.value.feature_flags));\n          case 9:\n          case \"end\":\n            return _context34.stop();\n        }\n      }, _callee33, this);\n    }));\n    function getWorkspaceFeatureFlags() {\n      return _getWorkspaceFeatureFlags.apply(this, arguments);\n    }\n    return getWorkspaceFeatureFlags;\n  }();\n  _proto.searchDataSourceViews = /*#__PURE__*/function () {\n    var _searchDataSourceViews = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(searchParams) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee34$(_context35) {\n        while (1) switch (_context35.prev = _context35.next) {\n          case 0:\n            _context35.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"data_source_views/search\",\n              query: searchParams\n            });\n          case 2:\n            res = _context35.sent;\n            _context35.next = 5;\n            return this._resultFromResponse(SearchDataSourceViewsResponseSchema, res);\n          case 5:\n            r = _context35.sent;\n            if (!r.isErr()) {\n              _context35.next = 8;\n              break;\n            }\n            return _context35.abrupt(\"return\", r);\n          case 8:\n            return _context35.abrupt(\"return\", new Ok(r.value.data_source_views));\n          case 9:\n          case \"end\":\n            return _context35.stop();\n        }\n      }, _callee34, this);\n    }));\n    function searchDataSourceViews(_x35) {\n      return _searchDataSourceViews.apply(this, arguments);\n    }\n    return searchDataSourceViews;\n  }();\n  _proto.patchDataSourceView = /*#__PURE__*/function () {\n    var _patchDataSourceView = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(dataSourceView, patch) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee35$(_context36) {\n        while (1) switch (_context36.prev = _context36.next) {\n          case 0:\n            _context36.next = 2;\n            return this.request({\n              method: \"PATCH\",\n              path: \"spaces/\" + dataSourceView.spaceId + \"/data_source_views/\" + dataSourceView.sId,\n              body: patch\n            });\n          case 2:\n            res = _context36.sent;\n            _context36.next = 5;\n            return this._resultFromResponse(DataSourceViewResponseSchema, res);\n          case 5:\n            r = _context36.sent;\n            if (!r.isErr()) {\n              _context36.next = 8;\n              break;\n            }\n            return _context36.abrupt(\"return\", r);\n          case 8:\n            return _context36.abrupt(\"return\", new Ok(r.value.dataSourceView));\n          case 9:\n          case \"end\":\n            return _context36.stop();\n        }\n      }, _callee35, this);\n    }));\n    function patchDataSourceView(_x36, _x37) {\n      return _patchDataSourceView.apply(this, arguments);\n    }\n    return patchDataSourceView;\n  }();\n  _proto.exportApps = /*#__PURE__*/function () {\n    var _exportApps = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(_ref23) {\n      var appSpaceId, res, r;\n      return _regeneratorRuntime().wrap(function _callee36$(_context37) {\n        while (1) switch (_context37.prev = _context37.next) {\n          case 0:\n            appSpaceId = _ref23.appSpaceId;\n            _context37.next = 3;\n            return this.request({\n              method: \"GET\",\n              path: \"spaces/\" + appSpaceId + \"/apps/export\"\n            });\n          case 3:\n            res = _context37.sent;\n            _context37.next = 6;\n            return this._resultFromResponse(GetAppsResponseSchema, res);\n          case 6:\n            r = _context37.sent;\n            if (!r.isErr()) {\n              _context37.next = 9;\n              break;\n            }\n            return _context37.abrupt(\"return\", r);\n          case 9:\n            return _context37.abrupt(\"return\", new Ok(r.value.apps));\n          case 10:\n          case \"end\":\n            return _context37.stop();\n        }\n      }, _callee36, this);\n    }));\n    function exportApps(_x38) {\n      return _exportApps.apply(this, arguments);\n    }\n    return exportApps;\n  }();\n  _proto.checkApps = /*#__PURE__*/function () {\n    var _checkApps = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(apps, appSpaceId) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee37$(_context38) {\n        while (1) switch (_context38.prev = _context38.next) {\n          case 0:\n            _context38.next = 2;\n            return this.request({\n              method: \"POST\",\n              path: \"spaces/\" + appSpaceId + \"/apps/check\",\n              body: apps\n            });\n          case 2:\n            res = _context38.sent;\n            _context38.next = 5;\n            return this._resultFromResponse(AppsCheckResponseSchema, res);\n          case 5:\n            r = _context38.sent;\n            if (!r.isErr()) {\n              _context38.next = 8;\n              break;\n            }\n            return _context38.abrupt(\"return\", r);\n          case 8:\n            return _context38.abrupt(\"return\", new Ok(r.value.apps));\n          case 9:\n          case \"end\":\n            return _context38.stop();\n        }\n      }, _callee37, this);\n    }));\n    function checkApps(_x39, _x40) {\n      return _checkApps.apply(this, arguments);\n    }\n    return checkApps;\n  }();\n  _proto.getSpaces = /*#__PURE__*/function () {\n    var _getSpaces = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38() {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee38$(_context39) {\n        while (1) switch (_context39.prev = _context39.next) {\n          case 0:\n            _context39.next = 2;\n            return this.request({\n              method: \"GET\",\n              path: \"spaces\"\n            });\n          case 2:\n            res = _context39.sent;\n            _context39.next = 5;\n            return this._resultFromResponse(GetSpacesResponseSchema, res);\n          case 5:\n            r = _context39.sent;\n            if (!r.isErr()) {\n              _context39.next = 8;\n              break;\n            }\n            return _context39.abrupt(\"return\", r);\n          case 8:\n            return _context39.abrupt(\"return\", new Ok(r.value.spaces));\n          case 9:\n          case \"end\":\n            return _context39.stop();\n        }\n      }, _callee38, this);\n    }));\n    function getSpaces() {\n      return _getSpaces.apply(this, arguments);\n    }\n    return getSpaces;\n  }();\n  _proto.getMCPServerViews = /*#__PURE__*/function () {\n    var _getMCPServerViews = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(spaceId, includeAuto) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee39$(_context40) {\n        while (1) switch (_context40.prev = _context40.next) {\n          case 0:\n            if (includeAuto === void 0) {\n              includeAuto = false;\n            }\n            _context40.next = 3;\n            return this.request({\n              method: \"GET\",\n              path: \"spaces/\" + spaceId + \"/mcp_server_views\",\n              query: new URLSearchParams({\n                includeAuto: includeAuto.toString()\n              })\n            });\n          case 3:\n            res = _context40.sent;\n            _context40.next = 6;\n            return this._resultFromResponse(GetMCPServerViewsResponseSchema, res);\n          case 6:\n            r = _context40.sent;\n            if (!r.isErr()) {\n              _context40.next = 9;\n              break;\n            }\n            return _context40.abrupt(\"return\", r);\n          case 9:\n            return _context40.abrupt(\"return\", new Ok(r.value.serverViews));\n          case 10:\n          case \"end\":\n            return _context40.stop();\n        }\n      }, _callee39, this);\n    }));\n    function getMCPServerViews(_x41, _x42) {\n      return _getMCPServerViews.apply(this, arguments);\n    }\n    return getMCPServerViews;\n  }();\n  _proto.searchNodes = /*#__PURE__*/function () {\n    var _searchNodes = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(searchParams) {\n      var res, r;\n      return _regeneratorRuntime().wrap(function _callee40$(_context41) {\n        while (1) switch (_context41.prev = _context41.next) {\n          case 0:\n            _context41.next = 2;\n            return this.request({\n              method: \"POST\",\n              path: \"search\",\n              body: searchParams\n            });\n          case 2:\n            res = _context41.sent;\n            _context41.next = 5;\n            return this._resultFromResponse(PostWorkspaceSearchResponseBodySchema, res);\n          case 5:\n            r = _context41.sent;\n            if (!r.isErr()) {\n              _context41.next = 8;\n              break;\n            }\n            return _context41.abrupt(\"return\", r);\n          case 8:\n            return _context41.abrupt(\"return\", new Ok(r.value.nodes));\n          case 9:\n          case \"end\":\n            return _context41.stop();\n        }\n      }, _callee40, this);\n    }));\n    function searchNodes(_x43) {\n      return _searchNodes.apply(this, arguments);\n    }\n    return searchNodes;\n  }();\n  _proto.retryMessage = /*#__PURE__*/function () {\n    var _retryMessage = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(_ref24) {\n      var conversationId, messageId, _ref24$blockedOnly, blockedOnly, query, res, r;\n      return _regeneratorRuntime().wrap(function _callee41$(_context42) {\n        while (1) switch (_context42.prev = _context42.next) {\n          case 0:\n            conversationId = _ref24.conversationId, messageId = _ref24.messageId, _ref24$blockedOnly = _ref24.blockedOnly, blockedOnly = _ref24$blockedOnly === void 0 ? false : _ref24$blockedOnly;\n            query = blockedOnly ? new URLSearchParams({\n              blocked_only: \"true\"\n            }) : undefined;\n            _context42.next = 4;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/messages/\" + messageId + \"/retry\",\n              query: query\n            });\n          case 4:\n            res = _context42.sent;\n            _context42.next = 7;\n            return this._resultFromResponse(RetryMessageResponseSchema, res);\n          case 7:\n            r = _context42.sent;\n            if (!r.isErr()) {\n              _context42.next = 10;\n              break;\n            }\n            return _context42.abrupt(\"return\", r);\n          case 10:\n            return _context42.abrupt(\"return\", new Ok(r.value.message));\n          case 11:\n          case \"end\":\n            return _context42.stop();\n        }\n      }, _callee41, this);\n    }));\n    function retryMessage(_x44) {\n      return _retryMessage.apply(this, arguments);\n    }\n    return retryMessage;\n  }();\n  _proto._fetchWithError = /*#__PURE__*/function () {\n    var _fetchWithError2 = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(url, _temp3) {\n      var _ref25, _ref25$method, method, _ref25$headers, headers, body, signal, _ref25$stream, stream, now, res, responseBody, response, duration, err;\n      return _regeneratorRuntime().wrap(function _callee42$(_context43) {\n        while (1) switch (_context43.prev = _context43.next) {\n          case 0:\n            _ref25 = _temp3 === void 0 ? {} : _temp3, _ref25$method = _ref25.method, method = _ref25$method === void 0 ? \"GET\" : _ref25$method, _ref25$headers = _ref25.headers, headers = _ref25$headers === void 0 ? {} : _ref25$headers, body = _ref25.body, signal = _ref25.signal, _ref25$stream = _ref25.stream, stream = _ref25$stream === void 0 ? false : _ref25$stream;\n            now = Date.now();\n            _context43.prev = 2;\n            _context43.next = 5;\n            return fetch(url, {\n              method: method,\n              headers: headers,\n              body: body,\n              signal: signal\n            });\n          case 5:\n            res = _context43.sent;\n            if (!(stream && res.body)) {\n              _context43.next = 10;\n              break;\n            }\n            _context43.t0 = res.body;\n            _context43.next = 13;\n            break;\n          case 10:\n            _context43.next = 12;\n            return res.text();\n          case 12:\n            _context43.t0 = _context43.sent;\n          case 13:\n            responseBody = _context43.t0;\n            response = {\n              status: res.status,\n              url: res.url,\n              body: responseBody,\n              ok: res.ok\n            };\n            return _context43.abrupt(\"return\", new Ok({\n              response: response,\n              duration: Date.now() - now\n            }));\n          case 18:\n            _context43.prev = 18;\n            _context43.t1 = _context43[\"catch\"](2);\n            duration = Date.now() - now;\n            err = {\n              type: \"unexpected_network_error\",\n              message: \"Unexpected network error from DustAPI: \" + _context43.t1\n            };\n            this._logger.error({\n              dustError: err,\n              url: url,\n              duration: duration,\n              connectorsError: err,\n              error: _context43.t1\n            }, \"DustAPI error\");\n            return _context43.abrupt(\"return\", new Err(err));\n          case 24:\n          case \"end\":\n            return _context43.stop();\n        }\n      }, _callee42, this, [[2, 18]]);\n    }));\n    function _fetchWithError(_x45, _x46) {\n      return _fetchWithError2.apply(this, arguments);\n    }\n    return _fetchWithError;\n  }() // MCP Related.\n  ;\n  _proto.getBlockedActions =\n  /*#__PURE__*/\n  function () {\n    var _getBlockedActions = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(_ref26) {\n      var conversationId, res;\n      return _regeneratorRuntime().wrap(function _callee43$(_context44) {\n        while (1) switch (_context44.prev = _context44.next) {\n          case 0:\n            conversationId = _ref26.conversationId;\n            _context44.next = 3;\n            return this.request({\n              method: \"GET\",\n              path: \"assistant/conversations/\" + conversationId + \"/actions/blocked\"\n            });\n          case 3:\n            res = _context44.sent;\n            return _context44.abrupt(\"return\", this._resultFromResponse(BlockedActionsResponseSchema, res));\n          case 5:\n          case \"end\":\n            return _context44.stop();\n        }\n      }, _callee43, this);\n    }));\n    function getBlockedActions(_x47) {\n      return _getBlockedActions.apply(this, arguments);\n    }\n    return getBlockedActions;\n  }();\n  _proto.validateAction = /*#__PURE__*/function () {\n    var _validateAction = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(_ref27) {\n      var conversationId, messageId, actionId, approved, res;\n      return _regeneratorRuntime().wrap(function _callee44$(_context45) {\n        while (1) switch (_context45.prev = _context45.next) {\n          case 0:\n            conversationId = _ref27.conversationId, messageId = _ref27.messageId, actionId = _ref27.actionId, approved = _ref27.approved;\n            _context45.next = 3;\n            return this.request({\n              method: \"POST\",\n              path: \"assistant/conversations/\" + conversationId + \"/messages/\" + messageId + \"/validate-action\",\n              body: {\n                actionId: actionId,\n                approved: approved\n              }\n            });\n          case 3:\n            res = _context45.sent;\n            return _context45.abrupt(\"return\", this._resultFromResponse(ValidateActionResponseSchema, res));\n          case 5:\n          case \"end\":\n            return _context45.stop();\n        }\n      }, _callee44, this);\n    }));\n    function validateAction(_x48) {\n      return _validateAction.apply(this, arguments);\n    }\n    return validateAction;\n  }();\n  _proto.registerMCPServer = /*#__PURE__*/function () {\n    var _registerMCPServer = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(_ref28) {\n      var serverName, body, res;\n      return _regeneratorRuntime().wrap(function _callee45$(_context46) {\n        while (1) switch (_context46.prev = _context46.next) {\n          case 0:\n            serverName = _ref28.serverName;\n            body = {\n              serverName: serverName\n            };\n            _context46.next = 4;\n            return this.request({\n              method: \"POST\",\n              path: \"mcp/register\",\n              body: body\n            });\n          case 4:\n            res = _context46.sent;\n            return _context46.abrupt(\"return\", this._resultFromResponse(RegisterMCPResponseSchema, res));\n          case 6:\n          case \"end\":\n            return _context46.stop();\n        }\n      }, _callee45, this);\n    }));\n    function registerMCPServer(_x49) {\n      return _registerMCPServer.apply(this, arguments);\n    }\n    return registerMCPServer;\n  }();\n  _proto.heartbeatMCPServer = /*#__PURE__*/function () {\n    var _heartbeatMCPServer = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(_ref29) {\n      var serverId, body, res;\n      return _regeneratorRuntime().wrap(function _callee46$(_context47) {\n        while (1) switch (_context47.prev = _context47.next) {\n          case 0:\n            serverId = _ref29.serverId;\n            body = {\n              serverId: serverId\n            };\n            _context47.next = 4;\n            return this.request({\n              method: \"POST\",\n              path: \"mcp/heartbeat\",\n              body: body\n            });\n          case 4:\n            res = _context47.sent;\n            return _context47.abrupt(\"return\", this._resultFromResponse(HeartbeatMCPResponseSchema, res));\n          case 6:\n          case \"end\":\n            return _context47.stop();\n        }\n      }, _callee46, this);\n    }));\n    function heartbeatMCPServer(_x50) {\n      return _heartbeatMCPServer.apply(this, arguments);\n    }\n    return heartbeatMCPServer;\n  }();\n  _proto.postMCPResults = /*#__PURE__*/function () {\n    var _postMCPResults = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(_ref30) {\n      var result, serverId, body, res;\n      return _regeneratorRuntime().wrap(function _callee47$(_context48) {\n        while (1) switch (_context48.prev = _context48.next) {\n          case 0:\n            result = _ref30.result, serverId = _ref30.serverId;\n            body = {\n              result: result,\n              serverId: serverId\n            };\n            _context48.next = 4;\n            return this.request({\n              method: \"POST\",\n              path: \"mcp/results\",\n              body: body\n            });\n          case 4:\n            res = _context48.sent;\n            return _context48.abrupt(\"return\", this._resultFromResponse(PostMCPResultsResponseSchema, res));\n          case 6:\n          case \"end\":\n            return _context48.stop();\n        }\n      }, _callee47, this);\n    }));\n    function postMCPResults(_x51) {\n      return _postMCPResults.apply(this, arguments);\n    }\n    return postMCPResults;\n  }();\n  _proto.getMCPRequestsConnectionDetails = /*#__PURE__*/function () {\n    var _getMCPRequestsConnectionDetails = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(_ref31) {\n      var serverId, lastEventId, url, params, headers;\n      return _regeneratorRuntime().wrap(function _callee48$(_context49) {\n        while (1) switch (_context49.prev = _context49.next) {\n          case 0:\n            serverId = _ref31.serverId, lastEventId = _ref31.lastEventId;\n            url = this.apiUrl() + \"/api/v1/w/\" + this.workspaceId() + \"/mcp/requests\";\n            params = new URLSearchParams(_extends({\n              serverId: serverId\n            }, lastEventId ? {\n              lastEventId: lastEventId\n            } : {}));\n            _context49.next = 5;\n            return this.baseHeaders();\n          case 5:\n            headers = _context49.sent;\n            return _context49.abrupt(\"return\", new Ok({\n              url: url + \"?\" + params.toString(),\n              headers: headers\n            }));\n          case 7:\n          case \"end\":\n            return _context49.stop();\n        }\n      }, _callee48, this);\n    }));\n    function getMCPRequestsConnectionDetails(_x52) {\n      return _getMCPRequestsConnectionDetails.apply(this, arguments);\n    }\n    return getMCPRequestsConnectionDetails;\n  }();\n  _proto._resultFromResponse = /*#__PURE__*/function () {\n    var _resultFromResponse2 = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(schema, res) {\n      var err, text, response, r, rErr, _err, _err2;\n      return _regeneratorRuntime().wrap(function _callee49$(_context50) {\n        while (1) switch (_context50.prev = _context50.next) {\n          case 0:\n            if (!res.isErr()) {\n              _context50.next = 2;\n              break;\n            }\n            return _context50.abrupt(\"return\", res);\n          case 2:\n            if (!(res.value.response.status === 413)) {\n              _context50.next = 6;\n              break;\n            }\n            err = {\n              type: \"content_too_large\",\n              message: \"Your request content is too large, please try again with a shorter content.\"\n            };\n            this._logger.error({\n              dustError: err,\n              status: res.value.response.status,\n              url: res.value.response.url,\n              duration: res.value.duration\n            }, \"DustAPI error\");\n            return _context50.abrupt(\"return\", new Err(err));\n          case 6:\n            _context50.next = 8;\n            return textFromResponse(res.value.response);\n          case 8:\n            text = _context50.sent;\n            _context50.prev = 9;\n            response = JSON.parse(text);\n            r = schema.safeParse(response); // This assume that safe parsing means a 200 status.\n            if (!r.success) {\n              _context50.next = 16;\n              break;\n            }\n            return _context50.abrupt(\"return\", new Ok(r.data));\n          case 16:\n            // We couldn't parse the response directly, maybe it's an error\n            rErr = APIErrorSchema.safeParse(response[\"error\"]);\n            if (!rErr.success) {\n              _context50.next = 22;\n              break;\n            }\n            // Successfully parsed an error\n            this._logger.error({\n              dustError: rErr.data,\n              status: res.value.response.status,\n              url: res.value.response.url,\n              duration: res.value.duration\n            }, \"DustAPI error\");\n            return _context50.abrupt(\"return\", new Err(rErr.data));\n          case 22:\n            // Unexpected response format (neither an error nor a valid response)\n            _err = {\n              type: \"unexpected_response_format\",\n              message: \"Unexpected response format from DustAPI calling \" + (res.value.response.url + \" : \" + r.error.message)\n            };\n            this._logger.error({\n              dustError: _err,\n              parseError: r.error.message,\n              rawText: text,\n              status: res.value.response.status,\n              url: res.value.response.url,\n              duration: res.value.duration\n            }, \"DustAPI error\");\n            return _context50.abrupt(\"return\", new Err(_err));\n          case 25:\n            _context50.next = 32;\n            break;\n          case 27:\n            _context50.prev = 27;\n            _context50.t0 = _context50[\"catch\"](9);\n            _err2 = {\n              type: \"unexpected_response_format\",\n              message: \"Fail to parse response from DustAPI calling \" + (res.value.response.url + \" : \" + _context50.t0)\n            };\n            this._logger.error({\n              dustError: _err2,\n              error: _context50.t0,\n              rawText: text,\n              status: res.value.response.status,\n              url: res.value.response.url,\n              duration: res.value.duration\n            }, \"DustAPI error\");\n            return _context50.abrupt(\"return\", new Err(_err2));\n          case 32:\n          case \"end\":\n            return _context50.stop();\n        }\n      }, _callee49, this, [[9, 27]]);\n    }));\n    function _resultFromResponse(_x53, _x54) {\n      return _resultFromResponse2.apply(this, arguments);\n    }\n    return _resultFromResponse;\n  }();\n  return DustAPI;\n}();\n\n\n//# sourceMappingURL=client.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGR1c3QtdHQvY2xpZW50L2Rpc3QvY2xpZW50LmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ2I7QUFDYjtBQUNvQzs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGVBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsUUFBUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwrQ0FBK0MsUUFBUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwrQ0FBK0MsUUFBUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQSwrQ0FBK0Msa0NBQUM7QUFDaEQsK0NBQStDLGtDQUFDOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0JBQXNCO0FBQzVDLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOEJBQThCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw4S0FBOEs7QUFDMU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGNBQWMsSUFBSTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUUrc0s7QUFDaHRLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2FuYmFuLWNsb25lLXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvQGR1c3QtdHQvY2xpZW50L2Rpc3QvY2xpZW50LmVzbS5qcz9mOThiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVBhcnNlciB9IGZyb20gJ2V2ZW50c291cmNlLXBhcnNlcic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC10aW1lem9uZSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEV2ZW50U291cmNlUG9seWZpbGwgfSBmcm9tICdldmVudC1zb3VyY2UtcG9seWZpbGwnO1xuXG5mdW5jdGlvbiBfT3ZlcmxvYWRZaWVsZChlLCBkKSB7XG4gIHRoaXMudiA9IGUsIHRoaXMuayA9IGQ7XG59XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7XG4gIChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTtcbiAgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKG4sIHQsIGUsIHIsIG8sIGEsIGMpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaSA9IG5bYV0oYyksXG4gICAgICB1ID0gaS52YWx1ZTtcbiAgfSBjYXRjaCAobikge1xuICAgIHJldHVybiB2b2lkIGUobik7XG4gIH1cbiAgaS5kb25lID8gdCh1KSA6IFByb21pc2UucmVzb2x2ZSh1KS50aGVuKHIsIG8pO1xufVxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3Iobikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ID0gdGhpcyxcbiAgICAgIGUgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyLCBvKSB7XG4gICAgICB2YXIgYSA9IG4uYXBwbHkodCwgZSk7XG4gICAgICBmdW5jdGlvbiBfbmV4dChuKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChhLCByLCBvLCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgbik7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBfdGhyb3cobikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoYSwgciwgbywgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBuKTtcbiAgICAgIH1cbiAgICAgIF9uZXh0KHZvaWQgMCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfYXdhaXRBc3luY0dlbmVyYXRvcihlKSB7XG4gIHJldHVybiBuZXcgX092ZXJsb2FkWWllbGQoZSwgMCk7XG59XG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHIsIGUpIHtcbiAgdmFyIHQgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdO1xuICBpZiAodCkgcmV0dXJuICh0ID0gdC5jYWxsKHIpKS5uZXh0LmJpbmQodCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgXCJudW1iZXJcIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHtcbiAgICB0ICYmIChyID0gdCk7XG4gICAgdmFyIG8gPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbyA+PSByLmxlbmd0aCA/IHtcbiAgICAgICAgZG9uZTogITBcbiAgICAgIH0gOiB7XG4gICAgICAgIGRvbmU6ICExLFxuICAgICAgICB2YWx1ZTogcltvKytdXG4gICAgICB9O1xuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIHJldHVybiBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uIChuKSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciB0ID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgciBpbiB0KSAoe30pLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgJiYgKG5bcl0gPSB0W3JdKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG4gIH0sIF9leHRlbmRzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkge1xuICBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlO1xuICB9O1xuICB2YXIgdCxcbiAgICBlID0ge30sXG4gICAgciA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgbiA9IHIuaGFzT3duUHJvcGVydHksXG4gICAgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikge1xuICAgICAgdFtlXSA9IHIudmFsdWU7XG4gICAgfSxcbiAgICBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSxcbiAgICBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIixcbiAgICBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG4gIGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICB2YWx1ZTogcixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCB0W2VdO1xuICB9XG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAodCkge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uICh0LCBlLCByKSB7XG4gICAgICByZXR1cm4gdFtlXSA9IHI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHtcbiAgICB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLFxuICAgICAgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLFxuICAgICAgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pO1xuICAgIHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKVxuICAgIH0pLCBhO1xuICB9XG4gIGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJub3JtYWxcIixcbiAgICAgICAgYXJnOiB0LmNhbGwoZSwgcilcbiAgICAgIH07XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0aHJvd1wiLFxuICAgICAgICBhcmc6IHRcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGUud3JhcCA9IHdyYXA7XG4gIHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLFxuICAgIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsXG4gICAgZiA9IFwiZXhlY3V0aW5nXCIsXG4gICAgcyA9IFwiY29tcGxldGVkXCIsXG4gICAgeSA9IHt9O1xuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cbiAgdmFyIHAgPSB7fTtcbiAgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7XG4gIHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTtcbiAgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTtcbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkge1xuICAgICAgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTtcbiAgICAgIGlmIChcInRocm93XCIgIT09IGMudHlwZSkge1xuICAgICAgICB2YXIgdSA9IGMuYXJnLFxuICAgICAgICAgIGggPSB1LnZhbHVlO1xuICAgICAgICByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBoICYmIG4uY2FsbChoLCBcIl9fYXdhaXRcIikgPyBlLnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB0LCBpLCBhKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHUudmFsdWUgPSB0LCBpKHUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhKGMuYXJnKTtcbiAgICB9XG4gICAgdmFyIHI7XG4gICAgbyh0aGlzLCBcIl9pbnZva2VcIiwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICAgIHJldHVybiBuZXcgZShmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICAgICAgaW52b2tlKHQsIG4sIGUsIHIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByID0gciA/IHIudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsIHIsIG4pIHtcbiAgICB2YXIgbyA9IGg7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgICBpZiAobyA9PT0gZikgdGhyb3cgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgaWYgKG8gPT09IHMpIHtcbiAgICAgICAgaWYgKFwidGhyb3dcIiA9PT0gaSkgdGhyb3cgYTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICBkb25lOiAhMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZm9yIChuLm1ldGhvZCA9IGksIG4uYXJnID0gYTs7KSB7XG4gICAgICAgIHZhciBjID0gbi5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICB2YXIgdSA9IG1heWJlSW52b2tlRGVsZWdhdGUoYywgbik7XG4gICAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICAgIGlmICh1ID09PSB5KSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiB1O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJuZXh0XCIgPT09IG4ubWV0aG9kKSBuLnNlbnQgPSBuLl9zZW50ID0gbi5hcmc7ZWxzZSBpZiAoXCJ0aHJvd1wiID09PSBuLm1ldGhvZCkge1xuICAgICAgICAgIGlmIChvID09PSBoKSB0aHJvdyBvID0gcywgbi5hcmc7XG4gICAgICAgICAgbi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyk7XG4gICAgICAgIH0gZWxzZSBcInJldHVyblwiID09PSBuLm1ldGhvZCAmJiBuLmFicnVwdChcInJldHVyblwiLCBuLmFyZyk7XG4gICAgICAgIG8gPSBmO1xuICAgICAgICB2YXIgcCA9IHRyeUNhdGNoKGUsIHIsIG4pO1xuICAgICAgICBpZiAoXCJub3JtYWxcIiA9PT0gcC50eXBlKSB7XG4gICAgICAgICAgaWYgKG8gPSBuLmRvbmUgPyBzIDogbCwgcC5hcmcgPT09IHkpIGNvbnRpbnVlO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcC5hcmcsXG4gICAgICAgICAgICBkb25lOiBuLmRvbmVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFwidGhyb3dcIiA9PT0gcC50eXBlICYmIChvID0gcywgbi5tZXRob2QgPSBcInRocm93XCIsIG4uYXJnID0gcC5hcmcpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShlLCByKSB7XG4gICAgdmFyIG4gPSByLm1ldGhvZCxcbiAgICAgIG8gPSBlLml0ZXJhdG9yW25dO1xuICAgIGlmIChvID09PSB0KSByZXR1cm4gci5kZWxlZ2F0ZSA9IG51bGwsIFwidGhyb3dcIiA9PT0gbiAmJiBlLml0ZXJhdG9yLnJldHVybiAmJiAoci5tZXRob2QgPSBcInJldHVyblwiLCByLmFyZyA9IHQsIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgciksIFwidGhyb3dcIiA9PT0gci5tZXRob2QpIHx8IFwicmV0dXJuXCIgIT09IG4gJiYgKHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICdcIiArIG4gKyBcIicgbWV0aG9kXCIpKSwgeTtcbiAgICB2YXIgaSA9IHRyeUNhdGNoKG8sIGUuaXRlcmF0b3IsIHIuYXJnKTtcbiAgICBpZiAoXCJ0aHJvd1wiID09PSBpLnR5cGUpIHJldHVybiByLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBpLmFyZywgci5kZWxlZ2F0ZSA9IG51bGwsIHk7XG4gICAgdmFyIGEgPSBpLmFyZztcbiAgICByZXR1cm4gYSA/IGEuZG9uZSA/IChyW2UucmVzdWx0TmFtZV0gPSBhLnZhbHVlLCByLm5leHQgPSBlLm5leHRMb2MsIFwicmV0dXJuXCIgIT09IHIubWV0aG9kICYmIChyLm1ldGhvZCA9IFwibmV4dFwiLCByLmFyZyA9IHQpLCByLmRlbGVnYXRlID0gbnVsbCwgeSkgOiBhIDogKHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpO1xuICB9XG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeSh0KSB7XG4gICAgdmFyIGUgPSB7XG4gICAgICB0cnlMb2M6IHRbMF1cbiAgICB9O1xuICAgIDEgaW4gdCAmJiAoZS5jYXRjaExvYyA9IHRbMV0pLCAyIGluIHQgJiYgKGUuZmluYWxseUxvYyA9IHRbMl0sIGUuYWZ0ZXJMb2MgPSB0WzNdKSwgdGhpcy50cnlFbnRyaWVzLnB1c2goZSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeSh0KSB7XG4gICAgdmFyIGUgPSB0LmNvbXBsZXRpb24gfHwge307XG4gICAgZS50eXBlID0gXCJub3JtYWxcIiwgZGVsZXRlIGUuYXJnLCB0LmNvbXBsZXRpb24gPSBlO1xuICB9XG4gIGZ1bmN0aW9uIENvbnRleHQodCkge1xuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7XG4gICAgICB0cnlMb2M6IFwicm9vdFwiXG4gICAgfV0sIHQuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpLCB0aGlzLnJlc2V0KCEwKTtcbiAgfVxuICBmdW5jdGlvbiB2YWx1ZXMoZSkge1xuICAgIGlmIChlIHx8IFwiXCIgPT09IGUpIHtcbiAgICAgIHZhciByID0gZVthXTtcbiAgICAgIGlmIChyKSByZXR1cm4gci5jYWxsKGUpO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5uZXh0KSByZXR1cm4gZTtcbiAgICAgIGlmICghaXNOYU4oZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBvID0gLTEsXG4gICAgICAgICAgaSA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgICBmb3IgKDsgKytvIDwgZS5sZW5ndGg7KSBpZiAobi5jYWxsKGUsIG8pKSByZXR1cm4gbmV4dC52YWx1ZSA9IGVbb10sIG5leHQuZG9uZSA9ICExLCBuZXh0O1xuICAgICAgICAgICAgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMCwgbmV4dDtcbiAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaS5uZXh0ID0gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcih0eXBlb2YgZSArIFwiIGlzIG5vdCBpdGVyYWJsZVwiKTtcbiAgfVxuICByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIG8oZywgXCJjb25zdHJ1Y3RvclwiLCB7XG4gICAgdmFsdWU6IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgfSksIG8oR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwge1xuICAgIHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvbixcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgdSwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKSwgZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCAmJiB0LmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiAhIWUgJiYgKGUgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8IFwiR2VuZXJhdG9yRnVuY3Rpb25cIiA9PT0gKGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lKSk7XG4gIH0sIGUubWFyayA9IGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZih0LCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSkgOiAodC5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgZGVmaW5lKHQsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIikpLCB0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoZyksIHQ7XG4gIH0sIGUuYXdyYXAgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB7XG4gICAgICBfX2F3YWl0OiB0XG4gICAgfTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBjLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBlLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yLCBlLmFzeW5jID0gZnVuY3Rpb24gKHQsIHIsIG4sIG8sIGkpIHtcbiAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSBQcm9taXNlKTtcbiAgICB2YXIgYSA9IG5ldyBBc3luY0l0ZXJhdG9yKHdyYXAodCwgciwgbiwgbyksIGkpO1xuICAgIHJldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24ocikgPyBhIDogYS5uZXh0KCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIHQuZG9uZSA/IHQudmFsdWUgOiBhLm5leHQoKTtcbiAgICB9KTtcbiAgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKGcpLCBkZWZpbmUoZywgdSwgXCJHZW5lcmF0b3JcIiksIGRlZmluZShnLCBhLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBkZWZpbmUoZywgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH0pLCBlLmtleXMgPSBmdW5jdGlvbiAodCkge1xuICAgIHZhciBlID0gT2JqZWN0KHQpLFxuICAgICAgciA9IFtdO1xuICAgIGZvciAodmFyIG4gaW4gZSkgci5wdXNoKG4pO1xuICAgIHJldHVybiByLnJldmVyc2UoKSwgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGZvciAoOyByLmxlbmd0aDspIHtcbiAgICAgICAgdmFyIHQgPSByLnBvcCgpO1xuICAgICAgICBpZiAodCBpbiBlKSByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICExLCBuZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHQuZG9uZSA9ICEwLCBuZXh0O1xuICAgIH07XG4gIH0sIGUudmFsdWVzID0gdmFsdWVzLCBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcbiAgICByZXNldDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICh0aGlzLnByZXYgPSAwLCB0aGlzLm5leHQgPSAwLCB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdCwgdGhpcy5kb25lID0gITEsIHRoaXMuZGVsZWdhdGUgPSBudWxsLCB0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLmFyZyA9IHQsIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpLCAhZSkgZm9yICh2YXIgciBpbiB0aGlzKSBcInRcIiA9PT0gci5jaGFyQXQoMCkgJiYgbi5jYWxsKHRoaXMsIHIpICYmICFpc05hTigrci5zbGljZSgxKSkgJiYgKHRoaXNbcl0gPSB0KTtcbiAgICB9LFxuICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZG9uZSA9ICEwO1xuICAgICAgdmFyIHQgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtcbiAgICAgIGlmIChcInRocm93XCIgPT09IHQudHlwZSkgdGhyb3cgdC5hcmc7XG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB0aHJvdyBlO1xuICAgICAgdmFyIHIgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKG4sIG8pIHtcbiAgICAgICAgcmV0dXJuIGEudHlwZSA9IFwidGhyb3dcIiwgYS5hcmcgPSBlLCByLm5leHQgPSBuLCBvICYmIChyLm1ldGhvZCA9IFwibmV4dFwiLCByLmFyZyA9IHQpLCAhIW87XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBvID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IG8gPj0gMDsgLS1vKSB7XG4gICAgICAgIHZhciBpID0gdGhpcy50cnlFbnRyaWVzW29dLFxuICAgICAgICAgIGEgPSBpLmNvbXBsZXRpb247XG4gICAgICAgIGlmIChcInJvb3RcIiA9PT0gaS50cnlMb2MpIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIGlmIChpLnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgYyA9IG4uY2FsbChpLCBcImNhdGNoTG9jXCIpLFxuICAgICAgICAgICAgdSA9IG4uY2FsbChpLCBcImZpbmFsbHlMb2NcIik7XG4gICAgICAgICAgaWYgKGMgJiYgdSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGkuY2F0Y2hMb2MpIHJldHVybiBoYW5kbGUoaS5jYXRjaExvYywgITApO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGkuZmluYWxseUxvYykgcmV0dXJuIGhhbmRsZShpLmZpbmFsbHlMb2MpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGkuY2F0Y2hMb2MpIHJldHVybiBoYW5kbGUoaS5jYXRjaExvYywgITApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXUpIHRocm93IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgaS5maW5hbGx5TG9jKSByZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICBmb3IgKHZhciByID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7XG4gICAgICAgIHZhciBvID0gdGhpcy50cnlFbnRyaWVzW3JdO1xuICAgICAgICBpZiAoby50cnlMb2MgPD0gdGhpcy5wcmV2ICYmIG4uY2FsbChvLCBcImZpbmFsbHlMb2NcIikgJiYgdGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGkgPSBvO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpICYmIChcImJyZWFrXCIgPT09IHQgfHwgXCJjb250aW51ZVwiID09PSB0KSAmJiBpLnRyeUxvYyA8PSBlICYmIGUgPD0gaS5maW5hbGx5TG9jICYmIChpID0gbnVsbCk7XG4gICAgICB2YXIgYSA9IGkgPyBpLmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJldHVybiBhLnR5cGUgPSB0LCBhLmFyZyA9IGUsIGkgPyAodGhpcy5tZXRob2QgPSBcIm5leHRcIiwgdGhpcy5uZXh0ID0gaS5maW5hbGx5TG9jLCB5KSA6IHRoaXMuY29tcGxldGUoYSk7XG4gICAgfSxcbiAgICBjb21wbGV0ZTogZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgIGlmIChcInRocm93XCIgPT09IHQudHlwZSkgdGhyb3cgdC5hcmc7XG4gICAgICByZXR1cm4gXCJicmVha1wiID09PSB0LnR5cGUgfHwgXCJjb250aW51ZVwiID09PSB0LnR5cGUgPyB0aGlzLm5leHQgPSB0LmFyZyA6IFwicmV0dXJuXCIgPT09IHQudHlwZSA/ICh0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHQuYXJnLCB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCIsIHRoaXMubmV4dCA9IFwiZW5kXCIpIDogXCJub3JtYWxcIiA9PT0gdC50eXBlICYmIGUgJiYgKHRoaXMubmV4dCA9IGUpLCB5O1xuICAgIH0sXG4gICAgZmluaXNoOiBmdW5jdGlvbiAodCkge1xuICAgICAgZm9yICh2YXIgZSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkge1xuICAgICAgICB2YXIgciA9IHRoaXMudHJ5RW50cmllc1tlXTtcbiAgICAgICAgaWYgKHIuZmluYWxseUxvYyA9PT0gdCkgcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLCByLmFmdGVyTG9jKSwgcmVzZXRUcnlFbnRyeShyKSwgeTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhdGNoOiBmdW5jdGlvbiAodCkge1xuICAgICAgZm9yICh2YXIgZSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkge1xuICAgICAgICB2YXIgciA9IHRoaXMudHJ5RW50cmllc1tlXTtcbiAgICAgICAgaWYgKHIudHJ5TG9jID09PSB0KSB7XG4gICAgICAgICAgdmFyIG4gPSByLmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKFwidGhyb3dcIiA9PT0gbi50eXBlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IG4uYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24gKGUsIHIsIG4pIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGUpLFxuICAgICAgICByZXN1bHROYW1lOiByLFxuICAgICAgICBuZXh0TG9jOiBuXG4gICAgICB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7XG4gICAgfVxuICB9LCBlO1xufVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHtcbiAgaWYgKHIpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpO1xuICAgIHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7XG4gICAgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIF93cmFwQXN5bmNHZW5lcmF0b3IoZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQXN5bmNHZW5lcmF0b3IoZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIEFzeW5jR2VuZXJhdG9yKGUpIHtcbiAgdmFyIHIsIHQ7XG4gIGZ1bmN0aW9uIHJlc3VtZShyLCB0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBuID0gZVtyXSh0KSxcbiAgICAgICAgbyA9IG4udmFsdWUsXG4gICAgICAgIHUgPSBvIGluc3RhbmNlb2YgX092ZXJsb2FkWWllbGQ7XG4gICAgICBQcm9taXNlLnJlc29sdmUodSA/IG8udiA6IG8pLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICB2YXIgaSA9IFwicmV0dXJuXCIgPT09IHIgPyBcInJldHVyblwiIDogXCJuZXh0XCI7XG4gICAgICAgICAgaWYgKCFvLmsgfHwgdC5kb25lKSByZXR1cm4gcmVzdW1lKGksIHQpO1xuICAgICAgICAgIHQgPSBlW2ldKHQpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHNldHRsZShuLmRvbmUgPyBcInJldHVyblwiIDogXCJub3JtYWxcIiwgdCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXN1bWUoXCJ0aHJvd1wiLCBlKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNldHRsZShcInRocm93XCIsIGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXR0bGUoZSwgbikge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcInJldHVyblwiOlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0aHJvd1wiOlxuICAgICAgICByLnJlamVjdChuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAociA9IHIubmV4dCkgPyByZXN1bWUoci5rZXksIHIuYXJnKSA6IHQgPSBudWxsO1xuICB9XG4gIHRoaXMuX2ludm9rZSA9IGZ1bmN0aW9uIChlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChvLCB1KSB7XG4gICAgICB2YXIgaSA9IHtcbiAgICAgICAga2V5OiBlLFxuICAgICAgICBhcmc6IG4sXG4gICAgICAgIHJlc29sdmU6IG8sXG4gICAgICAgIHJlamVjdDogdSxcbiAgICAgICAgbmV4dDogbnVsbFxuICAgICAgfTtcbiAgICAgIHQgPyB0ID0gdC5uZXh0ID0gaSA6IChyID0gdCA9IGksIHJlc3VtZShlLCBuKSk7XG4gICAgfSk7XG4gIH0sIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5yZXR1cm4gJiYgKHRoaXMucmV0dXJuID0gdm9pZCAwKTtcbn1cbkFzeW5jR2VuZXJhdG9yLnByb3RvdHlwZVtcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXM7XG59LCBBc3luY0dlbmVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJuZXh0XCIsIGUpO1xufSwgQXN5bmNHZW5lcmF0b3IucHJvdG90eXBlLnRocm93ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInRocm93XCIsIGUpO1xufSwgQXN5bmNHZW5lcmF0b3IucHJvdG90eXBlLnJldHVybiA9IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJyZXR1cm5cIiwgZSk7XG59O1xuXG52YXIgTUNQSW50ZXJuYWxBY3Rpb25JY29uU2NoZW1hID0gLyojX19QVVJFX18qL3pbXCJlbnVtXCJdKFtcIkFjdGlvbkJyYWluSWNvblwiLCBcIkFjdGlvbkNsb3VkQXJyb3dMZWZ0UmlnaHRJY29uXCIsIFwiQWN0aW9uRG9jdW1lbnRUZXh0SWNvblwiLCBcIkFjdGlvbkVtb3Rpb25MYXVnaEljb25cIiwgXCJBY3Rpb25HaXRCcmFuY2hJY29uXCIsIFwiQWN0aW9uR2xvYmVBbHRJY29uXCIsIFwiQWN0aW9uSW1hZ2VJY29uXCIsIFwiQWN0aW9uTGlnaHRidWxiSWNvblwiLCBcIkFjdGlvbkxvY2tJY29uXCIsIFwiQWN0aW9uTWFnbmlmeWluZ0dsYXNzSWNvblwiLCBcIkFjdGlvblJvYm90SWNvblwiLCBcIkFjdGlvblNjYW5JY29uXCIsIFwiQWN0aW9uVGFibGVJY29uXCIsIFwiQWN0aW9uVGltZUljb25cIiwgXCJDb21tYW5kTGluZUljb25cIiwgXCJHY2FsTG9nb1wiLCBcIkdtYWlsTG9nb1wiLCBcIkdpdGh1YkxvZ29cIiwgXCJHb29nbGVTcHJlYWRzaGVldExvZ29cIiwgXCJIdWJzcG90TG9nb1wiLCBcIkZyZXNoc2VydmljZUxvZ29cIiwgXCJNb25kYXlMb2dvXCIsIFwiT3V0bG9va0xvZ29cIiwgXCJKaXJhTG9nb1wiLCBcIkxpbmVhckxvZ29cIiwgXCJOb3Rpb25Mb2dvXCIsIFwiU2FsZXNmb3JjZUxvZ29cIiwgXCJTbGFja0xvZ29cIiwgXCJTdHJpcGVMb2dvXCJdKTtcbnZhciBNQ1BFeHRlcm5hbEFjdGlvbkljb25TY2hlbWEgPSAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wiQWN0aW9uQXJtY2hhaXJJY29uXCIsIFwiQWN0aW9uQXJyb3dEb3duT25TcXVhcmVJY29uXCIsIFwiQWN0aW9uQXJyb3dVcE9uU3F1YXJlSWNvblwiLCBcIkFjdGlvbkF0dGFjaG1lbnRJY29uXCIsIFwiQWN0aW9uQmFua0ljb25cIiwgXCJBY3Rpb25CYXJjb2RlSWNvblwiLCBcIkFjdGlvbkJlZXJJY29uXCIsIFwiQWN0aW9uQm9va09wZW5JY29uXCIsIFwiQWN0aW9uQnJhY2VzSWNvblwiLCBcIkFjdGlvbkJyYWluSWNvblwiLCBcIkFjdGlvbkJyaWVmY2FzZUljb25cIiwgXCJBY3Rpb25CdWlsZGluZ0ljb25cIiwgXCJBY3Rpb25DYWxjdWxhdG9ySWNvblwiLCBcIkFjdGlvbkNhbGVuZGFySWNvblwiLCBcIkFjdGlvbkNhbGVuZGFyQ2hlY2tJY29uXCIsIFwiQWN0aW9uQ2FtZXJhSWNvblwiLCBcIkFjdGlvbkNhckljb25cIiwgXCJBY3Rpb25DYXJkSWNvblwiLCBcIkFjdGlvbkNoZWNrQ2lyY2xlSWNvblwiLCBcIkFjdGlvbkNsaXBib2FyZEljb25cIiwgXCJBY3Rpb25DbG91ZEFycm93RG93bkljb25cIiwgXCJBY3Rpb25DbG91ZEFycm93TGVmdFJpZ2h0SWNvblwiLCBcIkFjdGlvbkNsb3VkQXJyb3dVcEljb25cIiwgXCJBY3Rpb25Db2RlQmxvY2tJY29uXCIsIFwiQWN0aW9uQ29kZUJveEljb25cIiwgXCJBY3Rpb25Db21tYW5kSWNvblwiLCBcIkFjdGlvbkNvbW1hbmQxSWNvblwiLCBcIkFjdGlvbkNvbW11bml0eUljb25cIiwgXCJBY3Rpb25Db21wYW55SWNvblwiLCBcIkFjdGlvbkN1YmVJY29uXCIsIFwiQWN0aW9uQ3VwSWNvblwiLCBcIkFjdGlvbkN1c3RvbWVyU2VydmljZUljb25cIiwgXCJBY3Rpb25EYXNoYm9hcmRJY29uXCIsIFwiQWN0aW9uRGF0YWJhc2VJY29uXCIsIFwiQWN0aW9uRG9jdW1lbnRJY29uXCIsIFwiQWN0aW9uRG9jdW1lbnRQaWxlSWNvblwiLCBcIkFjdGlvbkRvY3VtZW50UGx1c0ljb25cIiwgXCJBY3Rpb25Eb2N1bWVudFRleHRJY29uXCIsIFwiQWN0aW9uRG91YmxlUXVvdGVzSWNvblwiLCBcIkFjdGlvbkVtb3Rpb25MYXVnaEljb25cIiwgXCJBY3Rpb25FeHRlcm5hbExpbmtJY29uXCIsIFwiQWN0aW9uRXllSWNvblwiLCBcIkFjdGlvbkV5ZVNsYXNoSWNvblwiLCBcIkFjdGlvbkZpbG1JY29uXCIsIFwiQWN0aW9uRmlsdGVySWNvblwiLCBcIkFjdGlvbkZpbmdlcnByaW50SWNvblwiLCBcIkFjdGlvbkZpcmVJY29uXCIsIFwiQWN0aW9uRmxhZ0ljb25cIiwgXCJBY3Rpb25GbGlnaHRMYW5kSWNvblwiLCBcIkFjdGlvbkZsaWdodFRha2VvZmZJY29uXCIsIFwiQWN0aW9uRm9sZGVySWNvblwiLCBcIkFjdGlvbkZvbGRlckFkZEljb25cIiwgXCJBY3Rpb25Gb2xkZXJPcGVuSWNvblwiLCBcIkFjdGlvbkZ1bGxzY3JlZW5JY29uXCIsIFwiQWN0aW9uRnVsbHNjcmVlbkV4aXRJY29uXCIsIFwiQWN0aW9uR2FtZXBhZEljb25cIiwgXCJBY3Rpb25HaXRCcmFuY2hJY29uXCIsIFwiQWN0aW9uR2l0Rm9ya0ljb25cIiwgXCJBY3Rpb25HbG9iZUljb25cIiwgXCJBY3Rpb25HbG9iZUFsdEljb25cIiwgXCJBY3Rpb25HcmFkdWF0aW9uQ2FwSWNvblwiLCBcIkFjdGlvbkhhbmRIZWFydEljb25cIiwgXCJBY3Rpb25IYW5kVGh1bWJEb3duSWNvblwiLCBcIkFjdGlvbkhhbmRUaHVtYlVwSWNvblwiLCBcIkFjdGlvbkhlYXJ0SWNvblwiLCBcIkFjdGlvbkhvbWVJY29uXCIsIFwiQWN0aW9uSG9zcGl0YWxJY29uXCIsIFwiQWN0aW9uSW1hZ2VJY29uXCIsIFwiQWN0aW9uSW5ib3hJY29uXCIsIFwiQWN0aW9uSW5jbHVkZUljb25cIiwgXCJBY3Rpb25MYXlvdXRJY29uXCIsIFwiQWN0aW9uTGlnaHRidWxiSWNvblwiLCBcIkFjdGlvbkxpc3RJY29uXCIsIFwiQWN0aW9uTGlzdENoZWNrSWNvblwiLCBcIkFjdGlvbkxvY2tJY29uXCIsIFwiQWN0aW9uTG9nb3V0SWNvblwiLCBcIkFjdGlvbk1hZ2ljSWNvblwiLCBcIkFjdGlvbk1hZ25pZnlpbmdHbGFzc0ljb25cIiwgXCJBY3Rpb25NYWlsSWNvblwiLCBcIkFjdGlvbk1haWxBaUljb25cIiwgXCJBY3Rpb25NYWlsQ2xvc2VJY29uXCIsIFwiQWN0aW9uTWFwSWNvblwiLCBcIkFjdGlvbk1hcFBpbkljb25cIiwgXCJBY3Rpb25NYXJrUGVuSWNvblwiLCBcIkFjdGlvbk1lZGFsSWNvblwiLCBcIkFjdGlvbk1lZ2FwaG9uZUljb25cIiwgXCJBY3Rpb25NZW51SWNvblwiLCBcIkFjdGlvbk1pY0ljb25cIiwgXCJBY3Rpb25Nb29uSWNvblwiLCBcIkFjdGlvbk1vdmllSWNvblwiLCBcIkFjdGlvbk51bWJlcnNJY29uXCIsIFwiQWN0aW9uUGFpbnRJY29uXCIsIFwiQWN0aW9uUGVuY2lsU3F1YXJlSWNvblwiLCBcIkFjdGlvblBpZUNoYXJ0SWNvblwiLCBcIkFjdGlvblBpbkRpc3RhbmNlSWNvblwiLCBcIkFjdGlvblBpbmdQb25nSWNvblwiLCBcIkFjdGlvblBsYW5ldEljb25cIiwgXCJBY3Rpb25QbHVzSWNvblwiLCBcIkFjdGlvblBsdXNDaXJjbGVJY29uXCIsIFwiQWN0aW9uUHJpbnRlckljb25cIiwgXCJBY3Rpb25QdXNocGluSWNvblwiLCBcIkFjdGlvblJhaW5ib3dJY29uXCIsIFwiQWN0aW9uUm9ib3RJY29uXCIsIFwiQWN0aW9uUm9ja2V0SWNvblwiLCBcIkFjdGlvblNhZmVJY29uXCIsIFwiQWN0aW9uU2F2ZUljb25cIiwgXCJBY3Rpb25TY2FsZXNJY29uXCIsIFwiQWN0aW9uU2Nhbkljb25cIiwgXCJBY3Rpb25TZWVkbGluZ0ljb25cIiwgXCJBY3Rpb25TZXJ2ZXJJY29uXCIsIFwiQWN0aW9uU2hha2VIYW5kc0ljb25cIiwgXCJBY3Rpb25TaGlwSWNvblwiLCBcIkFjdGlvblNoaXJ0SWNvblwiLCBcIkFjdGlvblNob3BwaW5nQmFza2V0SWNvblwiLCBcIkFjdGlvblNsaWRlc2hvd0ljb25cIiwgXCJBY3Rpb25TcGFya2xlc0ljb25cIiwgXCJBY3Rpb25TcXVhcmUzU3RhY2szREljb25cIiwgXCJBY3Rpb25TdG9wU2lnbkljb25cIiwgXCJBY3Rpb25TdG9yZUljb25cIiwgXCJBY3Rpb25TdW5JY29uXCIsIFwiQWN0aW9uU3dvcmRJY29uXCIsIFwiQWN0aW9uVGFibGVJY29uXCIsIFwiQWN0aW9uVGFnSWNvblwiLCBcIkFjdGlvblRlc3RUdWJlSWNvblwiLCBcIkFjdGlvblRpbWVJY29uXCIsIFwiQWN0aW9uVHJhaW5JY29uXCIsIFwiQWN0aW9uVHJhbnNsYXRlSWNvblwiLCBcIkFjdGlvblRyYXNoSWNvblwiLCBcIkFjdGlvblRyb3BoeUljb25cIiwgXCJBY3Rpb25UU2hpcnRJY29uXCIsIFwiQWN0aW9uVW1icmVsbGFJY29uXCIsIFwiQWN0aW9uVXNlckljb25cIiwgXCJBY3Rpb25Vc2VyR3JvdXBJY29uXCIsIFwiQWN0aW9uVmlkaWNvbkljb25cIiwgXCJBY3Rpb25Wb2x1bWVVcEljb25cIiwgXCJBY3Rpb25YQ2lyY2xlSWNvblwiXSk7XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBnZW5lcmF0ZXMgbWltZSB0eXBlcyBmb3IgYSBnaXZlbiBwcm92aWRlciBhbmQgcmVzb3VyY2UgdHlwZXMuXG4gKiBUaGUgbWltZSB0eXBlcyBhcmUgaW4gdGhlIGZvcm1hdCBgYXBwbGljYXRpb24vdm5kLmR1c3QuUFJPVklERVIuUkVTT1VSQ0VfVFlQRWAuXG4gKiBOb3RlczpcbiAqIC0gVGhlIHVuZGVyc2NvcmVzIGluIHRoZSBwcm92aWRlciBuYW1lIGFyZSBzdHJpcHBlZCBpbiB0aGUgZ2VuZXJhdGVkIG1pbWUgdHlwZS5cbiAqIC0gVGhlIHVuZGVyc2NvcmVzIGluIHRoZSByZXNvdXJjZSB0eXBlIGFyZSByZXBsYWNlZCB3aXRoIGRhc2hlcyBpbiB0aGUgZ2VuZXJhdGVkIG1pbWUgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVDb25uZWN0b3JSZWxhdGl2ZU1pbWVUeXBlcyhfcmVmKSB7XG4gIHZhciBwcm92aWRlciA9IF9yZWYucHJvdmlkZXIsXG4gICAgcmVzb3VyY2VUeXBlcyA9IF9yZWYucmVzb3VyY2VUeXBlcztcbiAgcmV0dXJuIHJlc291cmNlVHlwZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHMpIHtcbiAgICB2YXIgX2V4dGVuZHMyO1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgYWNjLCAoX2V4dGVuZHMyID0ge30sIF9leHRlbmRzMltzXSA9IFwiYXBwbGljYXRpb24vdm5kLmR1c3QuXCIgKyBwcm92aWRlci5yZXBsYWNlKFwiX1wiLCBcIlwiKSArIFwiLlwiICsgcy5yZXBsYWNlKFwiX1wiLCBcIi1cIikudG9Mb3dlckNhc2UoKSwgX2V4dGVuZHMyKSk7XG4gIH0sIHt9KTtcbn1cbi8vIE1pbWUgdHlwZSB0aGF0IHJlcHJlc2VudHMgYSBkYXRhc291cmNlLlxudmFyIERBVEFfU09VUkNFX01JTUVfVFlQRSA9IFwiYXBwbGljYXRpb24vdm5kLmR1c3QuZGF0YXNvdXJjZVwiO1xuLy8gTWltZSB0eXBlIHRoYXQgcmVwcmVzZW50cyBhIGRhdGEgd2FyZWhvdXNlLCBsaWtlIFNub3dmbGFrZSBvciBCaWdRdWVyeS5cbnZhciBEQVRBX1dBUkVIT1VTRV9NSU1FX1RZUEUgPSBcImFwcGxpY2F0aW9uL3ZuZC5kdXN0LmRhdGEtd2FyZWhvdXNlXCI7XG52YXIgREFUQV9TT1VSQ0VfRk9MREVSX1NQUkVBRFNIRUVUX01JTUVfVFlQRSA9IFwiYXBwbGljYXRpb24vdm5kLmR1c3QuZm9sZGVyLnNwcmVhZHNoZWV0XCI7XG52YXIgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMgPSB7XG4gIEdFTkVSSUM6IHtcbiAgICBEQVRBX1NPVVJDRTogREFUQV9TT1VSQ0VfTUlNRV9UWVBFLFxuICAgIERBVEFfV0FSRUhPVVNFOiBEQVRBX1dBUkVIT1VTRV9NSU1FX1RZUEVcbiAgfSxcbiAgRk9MREVSOiB7XG4gICAgU1BSRUFEU0hFRVQ6IERBVEFfU09VUkNFX0ZPTERFUl9TUFJFQURTSEVFVF9NSU1FX1RZUEVcbiAgfSxcbiAgQ09ORkxVRU5DRTogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcImNvbmZsdWVuY2VcIixcbiAgICByZXNvdXJjZVR5cGVzOiBbXCJGT0xERVJcIiwgXCJQQUdFXCIsIFwiU1BBQ0VcIl1cbiAgfSksXG4gIEdJVEhVQjogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcImdpdGh1YlwiLFxuICAgIHJlc291cmNlVHlwZXM6IFtcIlJFUE9TSVRPUllcIiwgXCJDT0RFX1JPT1RcIiwgXCJDT0RFX0RJUkVDVE9SWVwiLCBcIkNPREVfRklMRVwiLFxuICAgIC8vIElTU1VFUyBpcyB0aGUgZm9sZGVyIGNvbnRhaW5pbmcgYWxsIGlzc3Vlcy5cbiAgICBcIklTU1VFU1wiLFxuICAgIC8vIElTU1VFIGlzIGEgc2luZ2xlIGlzc3VlLlxuICAgIFwiSVNTVUVcIixcbiAgICAvLyBESVNDVVNTSU9OUyBpcyB0aGUgZm9sZGVyIGNvbnRhaW5pbmcgYWxsIGRpc2N1c3Npb25zLlxuICAgIFwiRElTQ1VTU0lPTlNcIixcbiAgICAvLyBESVNDVVNTSU9OIGlzIGEgc2luZ2xlIGRpc2N1c3Npb24uXG4gICAgXCJESVNDVVNTSU9OXCJdXG4gIH0pLFxuICBHT09HTEVfRFJJVkU6IC8qI19fUFVSRV9fKi9nZW5lcmF0ZUNvbm5lY3RvclJlbGF0aXZlTWltZVR5cGVzKHtcbiAgICBwcm92aWRlcjogXCJnb29nbGVfZHJpdmVcIixcbiAgICAvLyBTcHJlYWRzaGVldHMgbWF5IGNvbnRhaW4gbWFueSBzaGVldHMsIHRodXMgcmVzZW1ibGUgZm9sZGVycyBhbmQgYXJlIHN0b3JlZCBhcyBzdWNoLCBidXQgd2l0aFxuICAgIC8vIHRoZSBzcGVjaWFsIG1pbWVUeXBlIGJlbG93LiAgRm9yIGZpbGVzIGFuZCBzaGVldHMsIHdlIGtlZXAgR29vZ2xlJ3MgbWltZSB0eXBlcy5cbiAgICByZXNvdXJjZVR5cGVzOiBbXCJTSEFSRURfV0lUSF9NRVwiLCBcIkZPTERFUlwiLCBcIlNQUkVBRFNIRUVUXCJdXG4gIH0pLFxuICBJTlRFUkNPTTogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcImludGVyY29tXCIsXG4gICAgcmVzb3VyY2VUeXBlczogW1wiQ09MTEVDVElPTlwiLCBcIlRFQU1TX0ZPTERFUlwiLCBcIkNPTlZFUlNBVElPTlwiLCBcIlRFQU1cIiwgXCJBUlRJQ0xFXCIsIFwiSEVMUF9DRU5URVJcIl1cbiAgfSksXG4gIE1JQ1JPU09GVDogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcIm1pY3Jvc29mdFwiLFxuICAgIC8vIFNwcmVhZHNoZWV0cyBtYXkgY29udGFpbiBtYW55IHNoZWV0cywgdGh1cyByZXNlbWJsZSBmb2xkZXJzIGFuZCBhcmVcbiAgICAvLyBzdG9yZWQgYXMgc3VjaCwgYnV0IHdpdGggdGhlIHNwZWNpYWwgbWltZVR5cGUgYmVsb3cuXG4gICAgLy8gRm9yIGZpbGVzIGFuZCBzaGVldHMsIHdlIGtlZXAgTWljcm9zb2Z0J3MgbWltZSB0eXBlcy5cbiAgICByZXNvdXJjZVR5cGVzOiBbXCJGT0xERVJcIiwgXCJTUFJFQURTSEVFVFwiXVxuICB9KSxcbiAgTk9USU9OOiAvKiNfX1BVUkVfXyovZ2VuZXJhdGVDb25uZWN0b3JSZWxhdGl2ZU1pbWVUeXBlcyh7XG4gICAgcHJvdmlkZXI6IFwibm90aW9uXCIsXG4gICAgcmVzb3VyY2VUeXBlczogW1wiVU5LTk9XTl9GT0xERVJcIiwgXCJTWU5DSU5HX0ZPTERFUlwiLCBcIkRBVEFCQVNFXCIsIFwiUEFHRVwiXVxuICB9KSxcbiAgU0xBQ0s6IC8qI19fUFVSRV9fKi9nZW5lcmF0ZUNvbm5lY3RvclJlbGF0aXZlTWltZVR5cGVzKHtcbiAgICBwcm92aWRlcjogXCJzbGFja1wiLFxuICAgIHJlc291cmNlVHlwZXM6IFtcIkNIQU5ORUxcIiwgXCJUSFJFQURcIiwgXCJNRVNTQUdFU1wiXVxuICB9KSxcbiAgU05PV0ZMQUtFOiAvKiNfX1BVUkVfXyovZ2VuZXJhdGVDb25uZWN0b3JSZWxhdGl2ZU1pbWVUeXBlcyh7XG4gICAgcHJvdmlkZXI6IFwic25vd2ZsYWtlXCIsXG4gICAgcmVzb3VyY2VUeXBlczogW1wiREFUQUJBU0VcIiwgXCJTQ0hFTUFcIiwgXCJUQUJMRVwiXVxuICB9KSxcbiAgV0VCQ1JBV0xFUjogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcIndlYmNyYXdsZXJcIixcbiAgICByZXNvdXJjZVR5cGVzOiBbXCJGT0xERVJcIl0gLy8gcGFnZXMgYXJlIHVwc2VydGVkIGFzIHRleHQvaHRtbCwgbm90IGFuIGludGVybmFsIG1pbWUgdHlwZVxuICB9KSxcbiAgWkVOREVTSzogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcInplbmRlc2tcIixcbiAgICByZXNvdXJjZVR5cGVzOiBbXCJCUkFORFwiLCBcIkhFTFBfQ0VOVEVSXCIsIFwiQ0FURUdPUllcIiwgXCJBUlRJQ0xFXCIsXG4gICAgLy8gVElDS0VUUyBpcyB0aGUgZm9sZGVyIGNvbnRhaW5pbmcgYWxsIHRpY2tldHMuXG4gICAgXCJUSUNLRVRTXCIsXG4gICAgLy8gVElDS0VUIGlzIGEgc2luZ2xlIHRpY2tldC5cbiAgICBcIlRJQ0tFVFwiXVxuICB9KSxcbiAgQklHUVVFUlk6IC8qI19fUFVSRV9fKi9nZW5lcmF0ZUNvbm5lY3RvclJlbGF0aXZlTWltZVR5cGVzKHtcbiAgICBwcm92aWRlcjogXCJiaWdxdWVyeVwiLFxuICAgIHJlc291cmNlVHlwZXM6IFtcIkRBVEFCQVNFXCIsIFwiU0NIRU1BXCIsIFwiVEFCTEVcIl1cbiAgfSksXG4gIFNBTEVTRk9SQ0U6IC8qI19fUFVSRV9fKi9nZW5lcmF0ZUNvbm5lY3RvclJlbGF0aXZlTWltZVR5cGVzKHtcbiAgICBwcm92aWRlcjogXCJzYWxlc2ZvcmNlXCIsXG4gICAgcmVzb3VyY2VUeXBlczogW1wiU1lOQ0VEX1FVRVJZX0ZPTERFUlwiXVxuICB9KSxcbiAgR09ORzogLyojX19QVVJFX18qL2dlbmVyYXRlQ29ubmVjdG9yUmVsYXRpdmVNaW1lVHlwZXMoe1xuICAgIHByb3ZpZGVyOiBcImdvbmdcIixcbiAgICByZXNvdXJjZVR5cGVzOiBbXCJUUkFOU0NSSVBUXCIsIFwiVFJBTlNDUklQVF9GT0xERVJcIl1cbiAgfSlcbn07XG52YXIgSU5DTFVEQUJMRV9JTlRFUk5BTF9DT05URU5UX05PREVfTUlNRV9UWVBFUyA9IHtcbiAgQ09ORkxVRU5DRTogW0NPTlRFTlRfTk9ERV9NSU1FX1RZUEVTLkNPTkZMVUVOQ0UuUEFHRV0sXG4gIEdJVEhVQjogW0NPTlRFTlRfTk9ERV9NSU1FX1RZUEVTLkdJVEhVQi5JU1NVRSwgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMuR0lUSFVCLkRJU0NVU1NJT05dLFxuICBHT09HTEVfRFJJVkU6IFtdLFxuICBJTlRFUkNPTTogW0NPTlRFTlRfTk9ERV9NSU1FX1RZUEVTLklOVEVSQ09NLkNPTlZFUlNBVElPTiwgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMuSU5URVJDT00uQVJUSUNMRV0sXG4gIE1JQ1JPU09GVDogW10sXG4gIE5PVElPTjogW0NPTlRFTlRfTk9ERV9NSU1FX1RZUEVTLk5PVElPTi5QQUdFXSxcbiAgU0xBQ0s6IFtDT05URU5UX05PREVfTUlNRV9UWVBFUy5TTEFDSy5USFJFQUQsIENPTlRFTlRfTk9ERV9NSU1FX1RZUEVTLlNMQUNLLk1FU1NBR0VTXSxcbiAgU05PV0ZMQUtFOiBbXSxcbiAgV0VCQ1JBV0xFUjogW10sXG4gIFpFTkRFU0s6IFtDT05URU5UX05PREVfTUlNRV9UWVBFUy5aRU5ERVNLLlRJQ0tFVCwgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMuWkVOREVTSy5BUlRJQ0xFXSxcbiAgQklHUVVFUlk6IFtdLFxuICBTQUxFU0ZPUkNFOiBbXSxcbiAgR09ORzogW11cbn07XG5mdW5jdGlvbiBnZW5lcmF0ZVRvb2xNaW1lVHlwZXMoX3JlZjIpIHtcbiAgdmFyIGNhdGVnb3J5ID0gX3JlZjIuY2F0ZWdvcnksXG4gICAgcmVzb3VyY2VUeXBlcyA9IF9yZWYyLnJlc291cmNlVHlwZXM7XG4gIHJldHVybiByZXNvdXJjZVR5cGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBzKSB7XG4gICAgdmFyIF9leHRlbmRzMztcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGFjYywgKF9leHRlbmRzMyA9IHt9LCBfZXh0ZW5kczNbc10gPSBcImFwcGxpY2F0aW9uL3ZuZC5kdXN0LlwiICsgY2F0ZWdvcnkucmVwbGFjZSgvXy9nLCBcIi1cIikudG9Mb3dlckNhc2UoKSArIFwiLlwiICsgcy5yZXBsYWNlKC9fL2csIFwiLVwiKS50b0xvd2VyQ2FzZSgpLCBfZXh0ZW5kczMpKTtcbiAgfSwge30pO1xufVxudmFyIFRPT0xfTUlNRV9UWVBFUyA9IHtcbiAgVE9PTF9JTlBVVDogLyojX19QVVJFX18qL2dlbmVyYXRlVG9vbE1pbWVUeXBlcyh7XG4gICAgY2F0ZWdvcnk6IFwiVE9PTF9JTlBVVFwiLFxuICAgIHJlc291cmNlVHlwZXM6IFtcIkRBVEFfU09VUkNFXCIsIFwiREFUQV9XQVJFSE9VU0VcIiwgXCJUQUJMRVwiLCBcIkFHRU5UXCIsIFwiU1RSSU5HXCIsIFwiTlVNQkVSXCIsIFwiQk9PTEVBTlwiLCBcIkVOVU1cIiwgXCJMSVNUXCIsIFwiUkVBU09OSU5HX01PREVMXCIsIFwiRFVTVF9BUFBcIiwgXCJOVUxMQUJMRV9USU1FX0ZSQU1FXCIsIFwiSlNPTl9TQ0hFTUFcIl1cbiAgfSksXG4gIFRPT0xfT1VUUFVUOiAvKiNfX1BVUkVfXyovZ2VuZXJhdGVUb29sTWltZVR5cGVzKHtcbiAgICBjYXRlZ29yeTogXCJUT09MX09VVFBVVFwiLFxuICAgIHJlc291cmNlVHlwZXM6IFtcIkJST1dTRV9SRVNVTFRcIiwgXCJEQVRBX1NPVVJDRV9TRUFSQ0hfUVVFUllcIiwgXCJEQVRBX1NPVVJDRV9TRUFSQ0hfUkVTVUxUXCIsIFwiRklMRVNZU1RFTV9QQVRIXCIsIFwiREFUQV9TT1VSQ0VfTk9ERV9MSVNUXCIsIFwiREFUQV9TT1VSQ0VfTk9ERV9DT05URU5UXCIsIFwiREFUQV9TT1VSQ0VfSU5DTFVERV9RVUVSWVwiLCBcIkRBVEFfU09VUkNFX0lOQ0xVREVfUkVTVUxUXCIsIFwiRVhUUkFDVF9RVUVSWVwiLCBcIkVYVFJBQ1RfUkVTVUxUXCIsXG4gICAgLy8gRmlsZSBnZW5lcmF0ZWQgYnkgdGhlIHRvb2wuXG4gICAgXCJGSUxFXCIsXG4gICAgLy8gRmluYWwgb3V0cHV0IG9mIHRoZSByZWFzb25pbmcgd2hlbiBzdWNjZXNzZnVsIHdpdGggdGhlIG5vbi1Db1QgdG9rZW5zLlxuICAgIFwiUkVBU09OSU5HX1NVQ0NFU1NcIixcbiAgICAvLyBDb250ZW50IG9mIGEgU1FMIHF1ZXJ5IGZvcm11bGF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgIFwiU1FMX1FVRVJZXCIsXG4gICAgLy8gRXJyb3Igd2hlbiBleGVjdXRpbmcgYSBxdWVyeS5cbiAgICBcIkVYRUNVVEVfVEFCTEVTX1FVRVJZX0VSUk9SXCIsXG4gICAgLy8gR2VuZXJpYyB0aGlua2luZyB0b2tlbnMuXG4gICAgXCJUSElOS0lOR1wiLCBcIkRBVEFCQVNFX1NDSEVNQVwiLCBcIlFVRVJZX1dSSVRJTkdfSU5TVFJVQ1RJT05TXCIsIFwiRVhBTVBMRV9ST1dTXCIsIFwiVE9PTF9NQVJLRVJcIiwgXCJXRUJTRUFSQ0hfUVVFUllcIiwgXCJXRUJTRUFSQ0hfUkVTVUxUXCIsIFwiUlVOX0FHRU5UX1JFU1VMVFwiLCBcIlJVTl9BR0VOVF9RVUVSWVwiLCBcIldBUk5JTkdcIiwgXCJBR0VOVF9DUkVBVElPTl9SRVNVTFRcIiwgXCJUT09MU0VUX0xJU1RfUkVTVUxUXCIsIFwiVE9PTFNFVF9ERVNDUklCRV9SRVNVTFRcIixcbiAgICAvLyBMZWdhY3ksIGtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgIFwiR0VUX0RBVEFCQVNFX1NDSEVNQV9NQVJLRVJcIiwgXCJFWEVDVVRFX1RBQkxFU19RVUVSWV9NQVJLRVJcIl1cbiAgfSlcbn07XG52YXIgSU5URVJOQUxfTUlNRV9UWVBFUyA9IC8qI19fUFVSRV9fKi9fZXh0ZW5kcyh7fSwgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMsIFRPT0xfTUlNRV9UWVBFUyk7XG52YXIgSU5URVJOQUxfTUlNRV9UWVBFU19WQUxVRVMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LnZhbHVlcyhDT05URU5UX05PREVfTUlNRV9UWVBFUykuZmxhdE1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXModmFsdWUpLm1hcChmdW5jdGlvbiAodikge1xuICAgIHJldHVybiB2O1xuICB9KTtcbn0pO1xudmFyIElOQ0xVREFCTEVfSU5URVJOQUxfTUlNRV9UWVBFU19WQUxVRVMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LnZhbHVlcyhJTkNMVURBQkxFX0lOVEVSTkFMX0NPTlRFTlRfTk9ERV9NSU1FX1RZUEVTKS5mbGF0TWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyh2YWx1ZSkubWFwKGZ1bmN0aW9uICh2KSB7XG4gICAgcmV0dXJuIHY7XG4gIH0pO1xufSk7XG5mdW5jdGlvbiBpc0R1c3RNaW1lVHlwZShtaW1lVHlwZSkge1xuICByZXR1cm4gSU5URVJOQUxfTUlNRV9UWVBFU19WQUxVRVMuaW5jbHVkZXMobWltZVR5cGUpO1xufVxuZnVuY3Rpb24gaXNJbmNsdWRhYmxlSW50ZXJuYWxNaW1lVHlwZShtaW1lVHlwZSkge1xuICByZXR1cm4gSU5DTFVEQUJMRV9JTlRFUk5BTF9NSU1FX1RZUEVTX1ZBTFVFUy5pbmNsdWRlcyhtaW1lVHlwZSk7XG59XG5cbnZhciBCYXNlTm90aWZpY2F0aW9uUGFyYW1zU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgLyoqXG4gICAqIFNlZSBbTUNQIHNwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9tb2RlbGNvbnRleHRwcm90b2NvbC9tb2RlbGNvbnRleHRwcm90b2NvbC9ibG9iLzQ3MzM5YzAzYzE0M2JiNGVjMDFhMjZlNzIxYTFiOGZlNjY2MzRlYmUvZG9jcy9zcGVjaWZpY2F0aW9uL2RyYWZ0L2Jhc2ljL2luZGV4Lm1keCNnZW5lcmFsLWZpZWxkcylcbiAgICogZm9yIG5vdGVzIG9uIF9tZXRhIHVzYWdlLlxuICAgKi9cbiAgX21ldGE6IHoub3B0aW9uYWwoei5vYmplY3Qoe30pLnBhc3N0aHJvdWdoKCkpXG59KS5wYXNzdGhyb3VnaCgpO1xudmFyIE5vdGlmaWNhdGlvblNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1ldGhvZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHBhcmFtczogLyojX19QVVJFX18qL3oub3B0aW9uYWwoQmFzZU5vdGlmaWNhdGlvblBhcmFtc1NjaGVtYSlcbn0pO1xudmFyIFJlc3VsdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIC8qKlxuICAgKiBTZWUgW01DUCBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vbW9kZWxjb250ZXh0cHJvdG9jb2wvbW9kZWxjb250ZXh0cHJvdG9jb2wvYmxvYi80NzMzOWMwM2MxNDNiYjRlYzAxYTI2ZTcyMWExYjhmZTY2NjM0ZWJlL2RvY3Mvc3BlY2lmaWNhdGlvbi9kcmFmdC9iYXNpYy9pbmRleC5tZHgjZ2VuZXJhbC1maWVsZHMpXG4gICAqIGZvciBub3RlcyBvbiBfbWV0YSB1c2FnZS5cbiAgICovXG4gIF9tZXRhOiB6Lm9wdGlvbmFsKHoub2JqZWN0KHt9KS5wYXNzdGhyb3VnaCgpKVxufSkucGFzc3Rocm91Z2goKTtcbi8qKlxuICogRXJyb3IgY29kZXMgZGVmaW5lZCBieSB0aGUgSlNPTi1SUEMgc3BlY2lmaWNhdGlvbi5cbiAqL1xudmFyIEVycm9yQ29kZTtcbihmdW5jdGlvbiAoRXJyb3JDb2RlKSB7XG4gIC8vIFNESyBlcnJvciBjb2Rlc1xuICBFcnJvckNvZGVbRXJyb3JDb2RlW1wiQ29ubmVjdGlvbkNsb3NlZFwiXSA9IC0zMjAwMF0gPSBcIkNvbm5lY3Rpb25DbG9zZWRcIjtcbiAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIlJlcXVlc3RUaW1lb3V0XCJdID0gLTMyMDAxXSA9IFwiUmVxdWVzdFRpbWVvdXRcIjtcbiAgLy8gU3RhbmRhcmQgSlNPTi1SUEMgZXJyb3IgY29kZXNcbiAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIlBhcnNlRXJyb3JcIl0gPSAtMzI3MDBdID0gXCJQYXJzZUVycm9yXCI7XG4gIEVycm9yQ29kZVtFcnJvckNvZGVbXCJJbnZhbGlkUmVxdWVzdFwiXSA9IC0zMjYwMF0gPSBcIkludmFsaWRSZXF1ZXN0XCI7XG4gIEVycm9yQ29kZVtFcnJvckNvZGVbXCJNZXRob2ROb3RGb3VuZFwiXSA9IC0zMjYwMV0gPSBcIk1ldGhvZE5vdEZvdW5kXCI7XG4gIEVycm9yQ29kZVtFcnJvckNvZGVbXCJJbnZhbGlkUGFyYW1zXCJdID0gLTMyNjAyXSA9IFwiSW52YWxpZFBhcmFtc1wiO1xuICBFcnJvckNvZGVbRXJyb3JDb2RlW1wiSW50ZXJuYWxFcnJvclwiXSA9IC0zMjYwM10gPSBcIkludGVybmFsRXJyb3JcIjtcbn0pKEVycm9yQ29kZSB8fCAoRXJyb3JDb2RlID0ge30pKTtcbi8qIEJhc2UgTWV0YWRhdGEgKi9cbi8qKlxuICogQmFzZSBtZXRhZGF0YSBpbnRlcmZhY2UgZm9yIGNvbW1vbiBwcm9wZXJ0aWVzIGFjcm9zcyByZXNvdXJjZXMsIHRvb2xzLCBwcm9tcHRzLCBhbmQgaW1wbGVtZW50YXRpb25zLlxuICovXG52YXIgQmFzZU1ldGFkYXRhU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgLyoqIEludGVuZGVkIGZvciBwcm9ncmFtbWF0aWMgb3IgbG9naWNhbCB1c2UsIGJ1dCB1c2VkIGFzIGEgZGlzcGxheSBuYW1lIGluIHBhc3Qgc3BlY3Mgb3IgZmFsbGJhY2sgKi9cbiAgbmFtZTogei5zdHJpbmcoKSxcbiAgLyoqXG4gICAqIEludGVuZGVkIGZvciBVSSBhbmQgZW5kLXVzZXIgY29udGV4dHMg4oCUIG9wdGltaXplZCB0byBiZSBodW1hbi1yZWFkYWJsZSBhbmQgZWFzaWx5IHVuZGVyc3Rvb2QsXG4gICAqIGV2ZW4gYnkgdGhvc2UgdW5mYW1pbGlhciB3aXRoIGRvbWFpbi1zcGVjaWZpYyB0ZXJtaW5vbG9neS5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGUgbmFtZSBzaG91bGQgYmUgdXNlZCBmb3IgZGlzcGxheSAoZXhjZXB0IGZvciBUb29sLFxuICAgKiB3aGVyZSBgYW5ub3RhdGlvbnMudGl0bGVgIHNob3VsZCBiZSBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgdXNpbmcgYG5hbWVgLFxuICAgKiBpZiBwcmVzZW50KS5cbiAgICovXG4gIHRpdGxlOiB6Lm9wdGlvbmFsKHouc3RyaW5nKCkpXG59KS5wYXNzdGhyb3VnaCgpO1xuLyogUmVzb3VyY2VzICovXG4vKipcbiAqIFRoZSBjb250ZW50cyBvZiBhIHNwZWNpZmljIHJlc291cmNlIG9yIHN1Yi1yZXNvdXJjZS5cbiAqL1xudmFyIFJlc291cmNlQ29udGVudHNTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAvKipcbiAgICogVGhlIFVSSSBvZiB0aGlzIHJlc291cmNlLlxuICAgKi9cbiAgdXJpOiB6LnN0cmluZygpLFxuICAvKipcbiAgICogVGhlIE1JTUUgdHlwZSBvZiB0aGlzIHJlc291cmNlLCBpZiBrbm93bi5cbiAgICovXG4gIG1pbWVUeXBlOiB6Lm9wdGlvbmFsKHouc3RyaW5nKCkpLFxuICAvKipcbiAgICogU2VlIFtNQ1Agc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL21vZGVsY29udGV4dHByb3RvY29sL21vZGVsY29udGV4dHByb3RvY29sL2Jsb2IvNDczMzljMDNjMTQzYmI0ZWMwMWEyNmU3MjFhMWI4ZmU2NjYzNGViZS9kb2NzL3NwZWNpZmljYXRpb24vZHJhZnQvYmFzaWMvaW5kZXgubWR4I2dlbmVyYWwtZmllbGRzKVxuICAgKiBmb3Igbm90ZXMgb24gX21ldGEgdXNhZ2UuXG4gICAqL1xuICBfbWV0YTogei5vcHRpb25hbCh6Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKSlcbn0pLnBhc3N0aHJvdWdoKCk7XG52YXIgVGV4dFJlc291cmNlQ29udGVudHNTY2hlbWEgPSAvKiNfX1BVUkVfXyovUmVzb3VyY2VDb250ZW50c1NjaGVtYS5leHRlbmQoe1xuICAvKipcbiAgICogVGhlIHRleHQgb2YgdGhlIGl0ZW0uIFRoaXMgbXVzdCBvbmx5IGJlIHNldCBpZiB0aGUgaXRlbSBjYW4gYWN0dWFsbHkgYmUgcmVwcmVzZW50ZWQgYXMgdGV4dCAobm90IGJpbmFyeSBkYXRhKS5cbiAgICovXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbi8qKlxuICogQSBab2Qgc2NoZW1hIGZvciB2YWxpZGF0aW5nIEJhc2U2NCBzdHJpbmdzIHRoYXQgaXMgbW9yZSBwZXJmb3JtYW50IGFuZFxuICogcm9idXN0IGZvciB2ZXJ5IGxhcmdlIGlucHV0cyB0aGFuIHRoZSBkZWZhdWx0IHJlZ2V4LWJhc2VkIGNoZWNrLiBJdCBhdm9pZHNcbiAqIHN0YWNrIG92ZXJmbG93cyBieSB1c2luZyB0aGUgbmF0aXZlIGBhdG9iYCBmdW5jdGlvbiBmb3IgdmFsaWRhdGlvbi5cbiAqL1xudmFyIEJhc2U2NFNjaGVtYSA9IC8qI19fUFVSRV9fKi96LnN0cmluZygpLnJlZmluZShmdW5jdGlvbiAodmFsKSB7XG4gIHRyeSB7XG4gICAgLy8gYXRvYiB0aHJvd3MgYSBET01FeGNlcHRpb24gaWYgdGhlIHN0cmluZyBjb250YWlucyBjaGFyYWN0ZXJzXG4gICAgLy8gdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIEJhc2U2NCBjaGFyYWN0ZXIgc2V0LlxuICAgIGF0b2IodmFsKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSwge1xuICBtZXNzYWdlOiBcIkludmFsaWQgQmFzZTY0IHN0cmluZ1wiXG59KTtcbnZhciBCbG9iUmVzb3VyY2VDb250ZW50c1NjaGVtYSA9IC8qI19fUFVSRV9fKi9SZXNvdXJjZUNvbnRlbnRzU2NoZW1hLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBBIGJhc2U2NC1lbmNvZGVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGJpbmFyeSBkYXRhIG9mIHRoZSBpdGVtLlxuICAgKi9cbiAgYmxvYjogQmFzZTY0U2NoZW1hXG59KTtcbi8qKlxuICogQSBrbm93biByZXNvdXJjZSB0aGF0IHRoZSBzZXJ2ZXIgaXMgY2FwYWJsZSBvZiByZWFkaW5nLlxuICovXG52YXIgUmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovQmFzZU1ldGFkYXRhU2NoZW1hLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBUaGUgVVJJIG9mIHRoaXMgcmVzb3VyY2UuXG4gICAqL1xuICB1cmk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAvKipcbiAgICogQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoaXMgcmVzb3VyY2UgcmVwcmVzZW50cy5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgdXNlZCBieSBjbGllbnRzIHRvIGltcHJvdmUgdGhlIExMTSdzIHVuZGVyc3RhbmRpbmcgb2YgYXZhaWxhYmxlIHJlc291cmNlcy4gSXQgY2FuIGJlIHRob3VnaHQgb2YgbGlrZSBhIFwiaGludFwiIHRvIHRoZSBtb2RlbC5cbiAgICovXG4gIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5vcHRpb25hbCgvKiNfX1BVUkVfXyovei5zdHJpbmcoKSksXG4gIC8qKlxuICAgKiBUaGUgTUlNRSB0eXBlIG9mIHRoaXMgcmVzb3VyY2UsIGlmIGtub3duLlxuICAgKi9cbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96Lm9wdGlvbmFsKC8qI19fUFVSRV9fKi96LnN0cmluZygpKSxcbiAgLyoqXG4gICAqIFNlZSBbTUNQIHNwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9tb2RlbGNvbnRleHRwcm90b2NvbC9tb2RlbGNvbnRleHRwcm90b2NvbC9ibG9iLzQ3MzM5YzAzYzE0M2JiNGVjMDFhMjZlNzIxYTFiOGZlNjY2MzRlYmUvZG9jcy9zcGVjaWZpY2F0aW9uL2RyYWZ0L2Jhc2ljL2luZGV4Lm1keCNnZW5lcmFsLWZpZWxkcylcbiAgICogZm9yIG5vdGVzIG9uIF9tZXRhIHVzYWdlLlxuICAgKi9cbiAgX21ldGE6IC8qI19fUFVSRV9fKi96Lm9wdGlvbmFsKC8qI19fUFVSRV9fKi96Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKSlcbn0pO1xuLyoqXG4gKiBUZXh0IHByb3ZpZGVkIHRvIG9yIGZyb20gYW4gTExNLlxuICovXG52YXIgVGV4dENvbnRlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJ0ZXh0XCIpLFxuICAvKipcbiAgICogVGhlIHRleHQgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICovXG4gIHRleHQ6IHouc3RyaW5nKCksXG4gIC8qKlxuICAgKiBTZWUgW01DUCBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vbW9kZWxjb250ZXh0cHJvdG9jb2wvbW9kZWxjb250ZXh0cHJvdG9jb2wvYmxvYi80NzMzOWMwM2MxNDNiYjRlYzAxYTI2ZTcyMWExYjhmZTY2NjM0ZWJlL2RvY3Mvc3BlY2lmaWNhdGlvbi9kcmFmdC9iYXNpYy9pbmRleC5tZHgjZ2VuZXJhbC1maWVsZHMpXG4gICAqIGZvciBub3RlcyBvbiBfbWV0YSB1c2FnZS5cbiAgICovXG4gIF9tZXRhOiB6Lm9wdGlvbmFsKHoub2JqZWN0KHt9KS5wYXNzdGhyb3VnaCgpKVxufSkucGFzc3Rocm91Z2goKTtcbi8qKlxuICogQW4gaW1hZ2UgcHJvdmlkZWQgdG8gb3IgZnJvbSBhbiBMTE0uXG4gKi9cbnZhciBJbWFnZUNvbnRlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJpbWFnZVwiKSxcbiAgLyoqXG4gICAqIFRoZSBiYXNlNjQtZW5jb2RlZCBpbWFnZSBkYXRhLlxuICAgKi9cbiAgZGF0YTogQmFzZTY0U2NoZW1hLFxuICAvKipcbiAgICogVGhlIE1JTUUgdHlwZSBvZiB0aGUgaW1hZ2UuIERpZmZlcmVudCBwcm92aWRlcnMgbWF5IHN1cHBvcnQgZGlmZmVyZW50IGltYWdlIHR5cGVzLlxuICAgKi9cbiAgbWltZVR5cGU6IHouc3RyaW5nKCksXG4gIC8qKlxuICAgKiBTZWUgW01DUCBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vbW9kZWxjb250ZXh0cHJvdG9jb2wvbW9kZWxjb250ZXh0cHJvdG9jb2wvYmxvYi80NzMzOWMwM2MxNDNiYjRlYzAxYTI2ZTcyMWExYjhmZTY2NjM0ZWJlL2RvY3Mvc3BlY2lmaWNhdGlvbi9kcmFmdC9iYXNpYy9pbmRleC5tZHgjZ2VuZXJhbC1maWVsZHMpXG4gICAqIGZvciBub3RlcyBvbiBfbWV0YSB1c2FnZS5cbiAgICovXG4gIF9tZXRhOiB6Lm9wdGlvbmFsKHoub2JqZWN0KHt9KS5wYXNzdGhyb3VnaCgpKVxufSkucGFzc3Rocm91Z2goKTtcbi8qKlxuICogQW4gQXVkaW8gcHJvdmlkZWQgdG8gb3IgZnJvbSBhbiBMTE0uXG4gKi9cbnZhciBBdWRpb0NvbnRlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJhdWRpb1wiKSxcbiAgLyoqXG4gICAqIFRoZSBiYXNlNjQtZW5jb2RlZCBhdWRpbyBkYXRhLlxuICAgKi9cbiAgZGF0YTogQmFzZTY0U2NoZW1hLFxuICAvKipcbiAgICogVGhlIE1JTUUgdHlwZSBvZiB0aGUgYXVkaW8uIERpZmZlcmVudCBwcm92aWRlcnMgbWF5IHN1cHBvcnQgZGlmZmVyZW50IGF1ZGlvIHR5cGVzLlxuICAgKi9cbiAgbWltZVR5cGU6IHouc3RyaW5nKCksXG4gIC8qKlxuICAgKiBTZWUgW01DUCBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vbW9kZWxjb250ZXh0cHJvdG9jb2wvbW9kZWxjb250ZXh0cHJvdG9jb2wvYmxvYi80NzMzOWMwM2MxNDNiYjRlYzAxYTI2ZTcyMWExYjhmZTY2NjM0ZWJlL2RvY3Mvc3BlY2lmaWNhdGlvbi9kcmFmdC9iYXNpYy9pbmRleC5tZHgjZ2VuZXJhbC1maWVsZHMpXG4gICAqIGZvciBub3RlcyBvbiBfbWV0YSB1c2FnZS5cbiAgICovXG4gIF9tZXRhOiB6Lm9wdGlvbmFsKHoub2JqZWN0KHt9KS5wYXNzdGhyb3VnaCgpKVxufSkucGFzc3Rocm91Z2goKTtcbi8qKlxuICogVGhlIGNvbnRlbnRzIG9mIGEgcmVzb3VyY2UsIGVtYmVkZGVkIGludG8gYSBwcm9tcHQgb3IgdG9vbCBjYWxsIHJlc3VsdC5cbiAqL1xudmFyIEVtYmVkZGVkUmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoXCJyZXNvdXJjZVwiKSxcbiAgcmVzb3VyY2U6IHoudW5pb24oW1RleHRSZXNvdXJjZUNvbnRlbnRzU2NoZW1hLCBCbG9iUmVzb3VyY2VDb250ZW50c1NjaGVtYV0pLFxuICAvKipcbiAgICogU2VlIFtNQ1Agc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL21vZGVsY29udGV4dHByb3RvY29sL21vZGVsY29udGV4dHByb3RvY29sL2Jsb2IvNDczMzljMDNjMTQzYmI0ZWMwMWEyNmU3MjFhMWI4ZmU2NjYzNGViZS9kb2NzL3NwZWNpZmljYXRpb24vZHJhZnQvYmFzaWMvaW5kZXgubWR4I2dlbmVyYWwtZmllbGRzKVxuICAgKiBmb3Igbm90ZXMgb24gX21ldGEgdXNhZ2UuXG4gICAqL1xuICBfbWV0YTogei5vcHRpb25hbCh6Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKSlcbn0pLnBhc3N0aHJvdWdoKCk7XG4vKipcbiAqIEEgcmVzb3VyY2UgdGhhdCB0aGUgc2VydmVyIGlzIGNhcGFibGUgb2YgcmVhZGluZywgaW5jbHVkZWQgaW4gYSBwcm9tcHQgb3IgdG9vbCBjYWxsIHJlc3VsdC5cbiAqXG4gKiBOb3RlOiByZXNvdXJjZSBsaW5rcyByZXR1cm5lZCBieSB0b29scyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYXBwZWFyIGluIHRoZSByZXN1bHRzIG9mIGByZXNvdXJjZXMvbGlzdGAgcmVxdWVzdHMuXG4gKi9cbnZhciBSZXNvdXJjZUxpbmtTY2hlbWEgPSAvKiNfX1BVUkVfXyovUmVzb3VyY2VTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcInJlc291cmNlX2xpbmtcIilcbn0pO1xuLyoqXG4gKiBBIGNvbnRlbnQgYmxvY2sgdGhhdCBjYW4gYmUgdXNlZCBpbiBwcm9tcHRzIGFuZCB0b29sIHJlc3VsdHMuXG4gKi9cbnZhciBDb250ZW50QmxvY2tTY2hlbWEgPSAvKiNfX1BVUkVfXyovei51bmlvbihbVGV4dENvbnRlbnRTY2hlbWEsIEltYWdlQ29udGVudFNjaGVtYSwgQXVkaW9Db250ZW50U2NoZW1hLCBSZXNvdXJjZUxpbmtTY2hlbWEsIEVtYmVkZGVkUmVzb3VyY2VTY2hlbWFdKTtcbi8qKlxuICogVGhlIHNlcnZlcidzIHJlc3BvbnNlIHRvIGEgdG9vbCBjYWxsLlxuICovXG52YXIgQ2FsbFRvb2xSZXN1bHRTY2hlbWEgPSAvKiNfX1BVUkVfXyovUmVzdWx0U2NoZW1hLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgY29udGVudCBvYmplY3RzIHRoYXQgcmVwcmVzZW50IHRoZSByZXN1bHQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICpcbiAgICogSWYgdGhlIFRvb2wgZG9lcyBub3QgZGVmaW5lIGFuIG91dHB1dFNjaGVtYSwgdGhpcyBmaWVsZCBNVVNUIGJlIHByZXNlbnQgaW4gdGhlIHJlc3VsdC5cbiAgICogRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB0aGlzIGZpZWxkIGlzIGFsd2F5cyBwcmVzZW50LCBidXQgaXQgbWF5IGJlIGVtcHR5LlxuICAgKi9cbiAgY29udGVudDogLyojX19QVVJFX18qL3ouYXJyYXkoQ29udGVudEJsb2NrU2NoZW1hKVtcImRlZmF1bHRcIl0oW10pLFxuICAvKipcbiAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgc3RydWN0dXJlZCB0b29sIG91dHB1dC5cbiAgICpcbiAgICogSWYgdGhlIFRvb2wgZGVmaW5lcyBhbiBvdXRwdXRTY2hlbWEsIHRoaXMgZmllbGQgTVVTVCBiZSBwcmVzZW50IGluIHRoZSByZXN1bHQsIGFuZCBjb250YWluIGEgSlNPTiBvYmplY3QgdGhhdCBtYXRjaGVzIHRoZSBzY2hlbWEuXG4gICAqL1xuICBzdHJ1Y3R1cmVkQ29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHt9KS5wYXNzdGhyb3VnaCgpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSB0b29sIGNhbGwgZW5kZWQgaW4gYW4gZXJyb3IuXG4gICAqXG4gICAqIElmIG5vdCBzZXQsIHRoaXMgaXMgYXNzdW1lZCB0byBiZSBmYWxzZSAodGhlIGNhbGwgd2FzIHN1Y2Nlc3NmdWwpLlxuICAgKlxuICAgKiBBbnkgZXJyb3JzIHRoYXQgb3JpZ2luYXRlIGZyb20gdGhlIHRvb2wgU0hPVUxEIGJlIHJlcG9ydGVkIGluc2lkZSB0aGUgcmVzdWx0XG4gICAqIG9iamVjdCwgd2l0aCBgaXNFcnJvcmAgc2V0IHRvIHRydWUsIF9ub3RfIGFzIGFuIE1DUCBwcm90b2NvbC1sZXZlbCBlcnJvclxuICAgKiByZXNwb25zZS4gT3RoZXJ3aXNlLCB0aGUgTExNIHdvdWxkIG5vdCBiZSBhYmxlIHRvIHNlZSB0aGF0IGFuIGVycm9yIG9jY3VycmVkXG4gICAqIGFuZCBzZWxmLWNvcnJlY3QuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGFueSBlcnJvcnMgaW4gX2ZpbmRpbmdfIHRoZSB0b29sLCBhbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgdGhlXG4gICAqIHNlcnZlciBkb2VzIG5vdCBzdXBwb3J0IHRvb2wgY2FsbHMsIG9yIGFueSBvdGhlciBleGNlcHRpb25hbCBjb25kaXRpb25zLFxuICAgKiBzaG91bGQgYmUgcmVwb3J0ZWQgYXMgYW4gTUNQIGVycm9yIHJlc3BvbnNlLlxuICAgKi9cbiAgaXNFcnJvcjogLyojX19QVVJFX18qL3oub3B0aW9uYWwoLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCkpXG59KTtcblxuLy8gRmlsZSBnZW5lcmF0ZWQgYnkgdGhlIHRvb2wgZHVyaW5nIGl0cyBleGVjdXRpb24uXG52YXIgVG9vbEdlbmVyYXRlZEZpbGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoSU5URVJOQUxfTUlNRV9UWVBFUy5UT09MX09VVFBVVC5GSUxFKSxcbiAgZmlsZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb250ZW50VHlwZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHNuaXBwZXQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKClcbn0pO1xuZnVuY3Rpb24gaXNUb29sR2VuZXJhdGVkRmlsZShvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFRvb2xHZW5lcmF0ZWRGaWxlU2NoZW1hLnNhZmVQYXJzZShvdXRwdXRCbG9jay5yZXNvdXJjZSkuc3VjY2Vzcztcbn1cbi8vIFRoaW5raW5nIHRva2VucyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSB0b29sIGV4ZWN1dGlvbi5cbnZhciBUaGlua2luZ091dHB1dFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuVEhJTktJTkcpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiXCIpXG59KTtcbmZ1bmN0aW9uIGlzVGhpbmtpbmdPdXRwdXQob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBUaGlua2luZ091dHB1dFNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59XG4vLyBGaW5hbCBvdXRwdXQgb2YgdGhlIHJlYXNvbmluZyB3aGVuIHN1Y2Nlc3NmdWwgd2l0aCB0aGUgbm9uLUNvVCB0b2tlbnMuXG52YXIgUmVhc29uaW5nU3VjY2Vzc091dHB1dFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuUkVBU09OSU5HX1NVQ0NFU1MpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiXCIpXG59KTtcbmZ1bmN0aW9uIGlzUmVhc29uaW5nU3VjY2Vzc091dHB1dChvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFJlYXNvbmluZ1N1Y2Nlc3NPdXRwdXRTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufVxuLy8gU1FMIHF1ZXJ5IGdlbmVyYXRlZCBkdXJpbmcgdGhlIHRvb2wgZXhlY3V0aW9uLlxudmFyIFNxbFF1ZXJ5T3V0cHV0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoSU5URVJOQUxfTUlNRV9UWVBFUy5UT09MX09VVFBVVC5TUUxfUVVFUlkpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiXCIpXG59KTtcbmZ1bmN0aW9uIGlzU3FsUXVlcnlPdXRwdXQob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBTcWxRdWVyeU91dHB1dFNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59XG52YXIgaXNSZXNvdXJjZVdpdGhOYW1lID0gZnVuY3Rpb24gaXNSZXNvdXJjZVdpdGhOYW1lKHJlc291cmNlKSB7XG4gIHJldHVybiBcIm5hbWVcIiBpbiByZXNvdXJjZSAmJiB0eXBlb2YgcmVzb3VyY2UubmFtZSA9PT0gXCJzdHJpbmdcIjtcbn07XG52YXIgRGF0YWJhc2VTY2hlbWFSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuREFUQUJBU0VfU0NIRU1BKSxcbiAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVyaTogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xudmFyIGlzRGF0YWJhc2VTY2hlbWFSZXNvdXJjZVR5cGUgPSBmdW5jdGlvbiBpc0RhdGFiYXNlU2NoZW1hUmVzb3VyY2VUeXBlKG91dHB1dEJsb2NrKSB7XG4gIHJldHVybiBvdXRwdXRCbG9jay50eXBlID09PSBcInJlc291cmNlXCIgJiYgRGF0YWJhc2VTY2hlbWFSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xudmFyIFF1ZXJ5V3JpdGluZ0luc3RydWN0aW9uc1Jlc291cmNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoSU5URVJOQUxfTUlNRV9UWVBFUy5UT09MX09VVFBVVC5RVUVSWV9XUklUSU5HX0lOU1RSVUNUSU9OUyksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBpc1F1ZXJ5V3JpdGluZ0luc3RydWN0aW9uc1Jlc291cmNlVHlwZSA9IGZ1bmN0aW9uIGlzUXVlcnlXcml0aW5nSW5zdHJ1Y3Rpb25zUmVzb3VyY2VUeXBlKG91dHB1dEJsb2NrKSB7XG4gIHJldHVybiBvdXRwdXRCbG9jay50eXBlID09PSBcInJlc291cmNlXCIgJiYgUXVlcnlXcml0aW5nSW5zdHJ1Y3Rpb25zUmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbnZhciBFeGFtcGxlUm93c1Jlc291cmNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoSU5URVJOQUxfTUlNRV9UWVBFUy5UT09MX09VVFBVVC5FWEFNUExFX1JPV1MpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgaXNFeGFtcGxlUm93c1Jlc291cmNlVHlwZSA9IGZ1bmN0aW9uIGlzRXhhbXBsZVJvd3NSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBFeGFtcGxlUm93c1Jlc291cmNlU2NoZW1hLnNhZmVQYXJzZShvdXRwdXRCbG9jay5yZXNvdXJjZSkuc3VjY2Vzcztcbn07XG4vLyBEYXRhIHNvdXJjZSBzZWFyY2ggb3V0cHV0czogcXVlcnkgYW5kIHJlc3VsdHMuXG52YXIgU2VhcmNoUXVlcnlSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuREFUQV9TT1VSQ0VfU0VBUkNIX1FVRVJZKSxcbiAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVyaTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcIlwiKVxufSk7XG52YXIgaXNTZWFyY2hRdWVyeVJlc291cmNlVHlwZSA9IGZ1bmN0aW9uIGlzU2VhcmNoUXVlcnlSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBTZWFyY2hRdWVyeVJlc291cmNlU2NoZW1hLnNhZmVQYXJzZShvdXRwdXRCbG9jay5yZXNvdXJjZSkuc3VjY2Vzcztcbn07XG52YXIgU2VhcmNoUmVzdWx0UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULkRBVEFfU09VUkNFX1NFQVJDSF9SRVNVTFQpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgLy8gRG9jdW1lbnQgbWV0YWRhdGFcbiAgaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0YWdzOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5zdHJpbmcoKSksXG4gIHJlZjogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGNodW5rczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpLFxuICBzb3VyY2U6IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgcHJvdmlkZXI6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSlcbn0pO1xudmFyIGlzU2VhcmNoUmVzdWx0UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNTZWFyY2hSZXN1bHRSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBTZWFyY2hSZXN1bHRSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xuLy8gRGF0YSBzb3VyY2UgaW5jbHVzaW9uIG91dHB1dHMsIHF1ZXJ5IGFuZCByZXN1bHRzXG52YXIgSW5jbHVkZVF1ZXJ5UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULkRBVEFfU09VUkNFX0lOQ0xVREVfUVVFUlkpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiXCIpXG59KTtcbnZhciBpc0luY2x1ZGVRdWVyeVJlc291cmNlVHlwZSA9IGZ1bmN0aW9uIGlzSW5jbHVkZVF1ZXJ5UmVzb3VyY2VUeXBlKG91dHB1dEJsb2NrKSB7XG4gIHJldHVybiBvdXRwdXRCbG9jay50eXBlID09PSBcInJlc291cmNlXCIgJiYgSW5jbHVkZVF1ZXJ5UmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbnZhciBXYXJuaW5nUmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULldBUk5JTkcpLFxuICB3YXJuaW5nVGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgd2FybmluZ0RhdGE6IC8qI19fUFVSRV9fKi96LnJlY29yZCh6LnN0cmluZygpLCB6LnVua25vd24oKSkub3B0aW9uYWwoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiXCIpXG59KTtcbnZhciBpc1dhcm5pbmdSZXNvdXJjZVR5cGUgPSBmdW5jdGlvbiBpc1dhcm5pbmdSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBXYXJuaW5nUmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbnZhciBJbmNsdWRlUmVzdWx0UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULkRBVEFfU09VUkNFX0lOQ0xVREVfUkVTVUxUKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIC8vIERvY3VtZW50IG1ldGFkYXRhXG4gIGlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGFnczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpLFxuICByZWY6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjaHVua3M6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKSxcbiAgc291cmNlOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIHByb3ZpZGVyOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcbnZhciBpc0luY2x1ZGVSZXN1bHRSZXNvdXJjZVR5cGUgPSBmdW5jdGlvbiBpc0luY2x1ZGVSZXN1bHRSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBJbmNsdWRlUmVzdWx0UmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbi8vIFdlYnNlYXJjaCByZXN1bHRzLlxudmFyIFdlYnNlYXJjaFF1ZXJ5UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULldFQlNFQVJDSF9RVUVSWSksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJcIilcbn0pO1xudmFyIGlzV2Vic2VhcmNoUXVlcnlSZXNvdXJjZVR5cGUgPSBmdW5jdGlvbiBpc1dlYnNlYXJjaFF1ZXJ5UmVzb3VyY2VUeXBlKG91dHB1dEJsb2NrKSB7XG4gIHJldHVybiBvdXRwdXRCbG9jay50eXBlID09PSBcInJlc291cmNlXCIgJiYgV2Vic2VhcmNoUXVlcnlSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xudmFyIFdlYnNlYXJjaFJlc3VsdFJlc291cmNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoSU5URVJOQUxfTUlNRV9UWVBFUy5UT09MX09VVFBVVC5XRUJTRUFSQ0hfUkVTVUxUKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJpOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgcmVmZXJlbmNlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgaXNXZWJzZWFyY2hSZXN1bHRSZXNvdXJjZVR5cGUgPSBmdW5jdGlvbiBpc1dlYnNlYXJjaFJlc3VsdFJlc291cmNlVHlwZShvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFdlYnNlYXJjaFJlc3VsdFJlc291cmNlU2NoZW1hLnNhZmVQYXJzZShvdXRwdXRCbG9jay5yZXNvdXJjZSkuc3VjY2Vzcztcbn07XG4vLyBCcm93c2UgcmVzdWx0cy5cbnZhciBCcm93c2VSZXN1bHRSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuQlJPV1NFX1JFU1VMVCksXG4gIHJlcXVlc3RlZFVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVyaTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIC8vIEJyb3dzZWQgdXJsLCBtaWdodCBkaWZmZXIgZnJvbSB0aGUgcmVxdWVzdGVkIHVybFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICByZXNwb25zZUNvZGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBlcnJvck1lc3NhZ2U6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIGlzQnJvd3NlUmVzdWx0UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNCcm93c2VSZXN1bHRSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBCcm93c2VSZXN1bHRSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xuLy8gUnVuQWdlbnQgcmVzdWx0cy5cbnZhciBSdW5BZ2VudFF1ZXJ5UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULlJVTl9BR0VOVF9RVUVSWSksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjaGlsZEFnZW50SWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJcIilcbn0pO1xudmFyIGlzUnVuQWdlbnRRdWVyeVJlc291cmNlVHlwZSA9IGZ1bmN0aW9uIGlzUnVuQWdlbnRRdWVyeVJlc291cmNlVHlwZShvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFJ1bkFnZW50UXVlcnlSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xudmFyIFJ1bkFnZW50UmVzdWx0UmVzb3VyY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChJTlRFUk5BTF9NSU1FX1RZUEVTLlRPT0xfT1VUUFVULlJVTl9BR0VOVF9SRVNVTFQpLFxuICBjb252ZXJzYXRpb25JZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICByZWZzOiAvKiNfX1BVUkVfXyovei5yZWNvcmQoei5zdHJpbmcoKSwgei5vYmplY3Qoe1xuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaHJlZjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHRpdGxlOiB6LnN0cmluZygpLFxuICAgIHByb3ZpZGVyOiB6LnN0cmluZygpXG4gIH0pKS5vcHRpb25hbCgpXG59KTtcbnZhciBpc1J1bkFnZW50UmVzdWx0UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNSdW5BZ2VudFJlc3VsdFJlc291cmNlVHlwZShvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFJ1bkFnZW50UmVzdWx0UmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbi8vIFRvb2xzZXRzIHJlc3VsdHMuXG52YXIgVG9vbHNldHNSZXN1bHRSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuVE9PTFNFVF9MSVNUX1JFU1VMVCksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJcIiksXG4gIGlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBpc1Rvb2xzZXRzUmVzdWx0UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNUb29sc2V0c1Jlc3VsdFJlc291cmNlVHlwZShvdXRwdXRCbG9jaykge1xuICByZXR1cm4gb3V0cHV0QmxvY2sudHlwZSA9PT0gXCJyZXNvdXJjZVwiICYmIFRvb2xzZXRzUmVzdWx0UmVzb3VyY2VTY2hlbWEuc2FmZVBhcnNlKG91dHB1dEJsb2NrLnJlc291cmNlKS5zdWNjZXNzO1xufTtcbi8vIEV4dHJhY3QgZGF0YSBvdXRwdXRzOiBxdWVyeSBhbmQgcmVzdWx0cy5cbnZhciBFeHRyYWN0UXVlcnlSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuRVhUUkFDVF9RVUVSWSksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJcIilcbn0pO1xudmFyIGlzRXh0cmFjdFF1ZXJ5UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNFeHRyYWN0UXVlcnlSZXNvdXJjZVR5cGUob3V0cHV0QmxvY2spIHtcbiAgcmV0dXJuIG91dHB1dEJsb2NrLnR5cGUgPT09IFwicmVzb3VyY2VcIiAmJiBFeHRyYWN0UXVlcnlSZXNvdXJjZVNjaGVtYS5zYWZlUGFyc2Uob3V0cHV0QmxvY2sucmVzb3VyY2UpLnN1Y2Nlc3M7XG59O1xudmFyIEV4dHJhY3RSZXN1bHRSZXNvdXJjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKElOVEVSTkFMX01JTUVfVFlQRVMuVE9PTF9PVVRQVVQuRVhUUkFDVF9SRVNVTFQpLFxuICB1cmk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgLy8gRmlsZSBtZXRhZGF0YVxuICBmaWxlSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGNvbnRlbnRUeXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgc25pcHBldDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKVxufSk7XG52YXIgaXNFeHRyYWN0UmVzdWx0UmVzb3VyY2VUeXBlID0gZnVuY3Rpb24gaXNFeHRyYWN0UmVzdWx0UmVzb3VyY2VUeXBlKG91dHB1dEJsb2NrKSB7XG4gIHJldHVybiBvdXRwdXRCbG9jay50eXBlID09PSBcInJlc291cmNlXCIgJiYgRXh0cmFjdFJlc3VsdFJlc291cmNlU2NoZW1hLnNhZmVQYXJzZShvdXRwdXRCbG9jay5yZXNvdXJjZSkuc3VjY2Vzcztcbn07XG4vKipcbiAqIE5vdGlmaWNhdGlvbiBvdXRwdXQgdHlwZXMuXG4gKi9cbi8vIEltYWdlLlxudmFyIE5vdGlmaWNhdGlvbkltYWdlQ29udGVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJpbWFnZVwiKSxcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbmZ1bmN0aW9uIGlzSW1hZ2VQcm9ncmVzc091dHB1dChvdXRwdXQpIHtcbiAgcmV0dXJuIG91dHB1dCAhPT0gdW5kZWZpbmVkICYmIG91dHB1dC50eXBlID09PSBcImltYWdlXCI7XG59XG4vLyBDYW52YXMgZmlsZS5cbnZhciBOb3RpZmljYXRpb25DYW52YXNGaWxlQ29udGVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJjYW52YXNfZmlsZVwiKSxcbiAgZmlsZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbWltZVR5cGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVwZGF0ZWRBdDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xuZnVuY3Rpb24gaXNDYW52YXNGaWxlQ29udGVudE91dHB1dChvdXRwdXQpIHtcbiAgcmV0dXJuIG91dHB1dCAhPT0gdW5kZWZpbmVkICYmIG91dHB1dC50eXBlID09PSBcImNhbnZhc19maWxlXCI7XG59XG52YXIgTm90aWZpY2F0aW9uVGV4dENvbnRlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidGV4dFwiKSxcbiAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xudmFyIE5vdGlmaWNhdGlvblJ1bkFnZW50Q29udGVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJydW5fYWdlbnRcIiksXG4gIGNoaWxkQWdlbnRJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGNvbnZlcnNhdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgcXVlcnk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBQcm9ncmVzc05vdGlmaWNhdGlvbk91dHB1dFNjaGVtYSA9IC8qI19fUFVSRV9fKi96LnVuaW9uKFtOb3RpZmljYXRpb25JbWFnZUNvbnRlbnRTY2hlbWEsIE5vdGlmaWNhdGlvbkNhbnZhc0ZpbGVDb250ZW50U2NoZW1hLCBOb3RpZmljYXRpb25SdW5BZ2VudENvbnRlbnRTY2hlbWEsIE5vdGlmaWNhdGlvblRleHRDb250ZW50U2NoZW1hXSkub3B0aW9uYWwoKTtcbnZhciBQcm9ncmVzc05vdGlmaWNhdGlvbkNvbnRlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAvLyBSZXF1aXJlZCBmb3IgdGhlIE1DUCBwcm90b2NvbC5cbiAgcHJvZ3Jlc3M6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICB0b3RhbDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHByb2dyZXNzVG9rZW46IC8qI19fUFVSRV9fKi96LnVuaW9uKFsvKiNfX1BVUkVfXyovei5zdHJpbmcoKSwgLyojX19QVVJFX18qL3oubnVtYmVyKCldKSxcbiAgLy8gQ3VzdG9tIGRhdGEuXG4gIGRhdGE6IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgbGFiZWw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIG91dHB1dDogUHJvZ3Jlc3NOb3RpZmljYXRpb25PdXRwdXRTY2hlbWFcbiAgfSlcbn0pO1xudmFyIE1DUFByb2dyZXNzTm90aWZpY2F0aW9uU2NoZW1hID0gLyojX19QVVJFX18qL05vdGlmaWNhdGlvblNjaGVtYS5leHRlbmQoe1xuICBtZXRob2Q6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJub3RpZmljYXRpb25zL3Byb2dyZXNzXCIpLFxuICBwYXJhbXM6IFByb2dyZXNzTm90aWZpY2F0aW9uQ29udGVudFNjaGVtYVxufSk7XG5mdW5jdGlvbiBpc01DUFByb2dyZXNzTm90aWZpY2F0aW9uVHlwZShub3RpZmljYXRpb24pIHtcbiAgcmV0dXJuIE1DUFByb2dyZXNzTm90aWZpY2F0aW9uU2NoZW1hLnNhZmVQYXJzZShub3RpZmljYXRpb24pLnN1Y2Nlc3M7XG59XG5cbi8vIEN1c3RvbSBzY2hlbWEgdG8gZ2V0IGEgc3RyaW5nIGxpdGVyYWwgdHlwZSBhbmQgeWV0IGFsbG93IGFueSBzdHJpbmcgd2hlbiBwYXJzaW5nXG52YXIgRmxleGlibGVFbnVtU2NoZW1hID0gZnVuY3Rpb24gRmxleGlibGVFbnVtU2NoZW1hKCkge1xuICByZXR1cm4gei5jdXN0b20oZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiO1xuICB9KTtcbn07XG52YXIgTW9kZWxQcm92aWRlcklkU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIE1vZGVsTExNSWRTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgRW1iZWRkaW5nUHJvdmlkZXJJZFNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBDb25uZWN0b3JzQVBJRXJyb3JUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIENvbm5lY3RvcnNBUElFcnJvclNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IENvbm5lY3RvcnNBUElFcnJvclR5cGVTY2hlbWEsXG4gIG1lc3NhZ2U6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBNb2RlbElkU2NoZW1hID0gLyojX19QVVJFX18qL3oubnVtYmVyKCk7XG5mdW5jdGlvbiBpc0Nvbm5lY3RvcnNBUElFcnJvcihvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmIFwibWVzc2FnZVwiIGluIG9iaiAmJiB0eXBlb2Ygb2JqLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiYgXCJ0eXBlXCIgaW4gb2JqICYmIHR5cGVvZiBvYmoudHlwZSA9PT0gXCJzdHJpbmdcIiAmJiBDb25uZWN0b3JzQVBJRXJyb3JTY2hlbWEuc2FmZVBhcnNlKG9iaikuc3VjY2Vzcztcbn1cbi8vIFN1cHBvcnRlZCBjb250ZW50IHR5cGVzIHRoYXQgYXJlIHBsYWluIHRleHQgYW5kIGNhbiBiZSBzZW50IGFzIGZpbGUtbGVzcyBjb250ZW50IGZyYWdtZW50LlxudmFyIHN1cHBvcnRlZE90aGVyRmlsZUZvcm1hdHMgPSB7XG4gIFwiYXBwbGljYXRpb24vbXN3b3JkXCI6IFtcIi5kb2NcIiwgXCIuZG9jeFwiXSxcbiAgXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudFwiOiBbXCIuZG9jXCIsIFwiLmRvY3hcIl0sXG4gIFwiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnRcIjogW1wiLnBwdFwiLCBcIi5wcHR4XCJdLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb25cIjogW1wiLnBwdFwiLCBcIi5wcHR4XCJdLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5kb2N1bWVudFwiOiBbXSxcbiAgXCJhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMucHJlc2VudGF0aW9uXCI6IFtdLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0XCI6IFtcIi54bHN4XCJdLFxuICBcImFwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5zcHJlYWRzaGVldFwiOiBbXSxcbiAgXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWxcIjogW1wiLnhsc1wiXSxcbiAgXCJhcHBsaWNhdGlvbi9wZGZcIjogW1wiLnBkZlwiXSxcbiAgXCJhcHBsaWNhdGlvbi92bmQuZHVzdC5zZWN0aW9uLmpzb25cIjogW1wiLmpzb25cIl0sXG4gIFwidGV4dC9jb21tYS1zZXBhcmF0ZWQtdmFsdWVzXCI6IFtcIi5jc3ZcIl0sXG4gIFwidGV4dC9jc3ZcIjogW1wiLmNzdlwiXSxcbiAgXCJ0ZXh0L21hcmtkb3duXCI6IFtcIi5tZFwiLCBcIi5tYXJrZG93blwiXSxcbiAgXCJ0ZXh0L3BsYWluXCI6IFtcIi50eHRcIiwgXCIubG9nXCIsIFwiLmNmZ1wiLCBcIi5jb25mXCJdLFxuICBcInRleHQvdGFiLXNlcGFyYXRlZC12YWx1ZXNcIjogW1wiLnRzdlwiXSxcbiAgXCJ0ZXh0L3RzdlwiOiBbXCIudHN2XCJdLFxuICBcInRleHQvdm5kLmR1c3QuYXR0YWNobWVudC5zbGFjay50aHJlYWRcIjogW1wiLnR4dFwiXSxcbiAgXCJ0ZXh0L2h0bWxcIjogW1wiLmh0bWxcIiwgXCIuaHRtXCIsIFwiLnhodG1sXCIsIFwiLnhodG1sK3htbFwiXSxcbiAgXCJ0ZXh0L3htbFwiOiBbXCIueG1sXCJdLFxuICBcInRleHQvY2FsZW5kYXJcIjogW1wiLmljc1wiXSxcbiAgXCJ0ZXh0L2Nzc1wiOiBbXCIuY3NzXCJdLFxuICBcInRleHQvamF2YXNjcmlwdFwiOiBbXCIuanNcIiwgXCIubWpzXCIsIFwiLmpzeFwiXSxcbiAgXCJ0ZXh0L3R5cGVzY3JpcHRcIjogW1wiLnRzXCIsIFwiLnRzeFwiXSxcbiAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IFtcIi5qc29uXCJdLFxuICBcImFwcGxpY2F0aW9uL3htbFwiOiBbXCIueG1sXCJdLFxuICBcImFwcGxpY2F0aW9uL3gtc2hcIjogW1wiLnNoXCJdLFxuICBcInRleHQveC1zaFwiOiBbXCIuc2hcIl0sXG4gIFwidGV4dC94LXB5dGhvblwiOiBbXCIucHlcIl0sXG4gIFwidGV4dC94LXB5dGhvbi1zY3JpcHRcIjogW1wiLnB5XCJdLFxuICBcImFwcGxpY2F0aW9uL3gteWFtbFwiOiBbXCIueWFtbFwiLCBcIi55bWxcIl0sXG4gIFwidGV4dC95YW1sXCI6IFtcIi55YW1sXCIsIFwiLnltbFwiXSxcbiAgXCJ0ZXh0L3ZuZC55YW1sXCI6IFtcIi55YW1sXCIsIFwiLnltbFwiXSxcbiAgXCJ0ZXh0L3gtY1wiOiBbXCIuY1wiLCBcIi5jY1wiLCBcIi5jcHBcIiwgXCIuY3h4XCIsIFwiLmRpY1wiLCBcIi5oXCIsIFwiLmhoXCJdLFxuICBcInRleHQveC1jc2hhcnBcIjogW1wiLmNzXCJdLFxuICBcInRleHQveC1qYXZhLXNvdXJjZVwiOiBbXCIuamF2YVwiXSxcbiAgXCJ0ZXh0L3gtcGhwXCI6IFtcIi5waHBcIl0sXG4gIFwidGV4dC94LXJ1YnlcIjogW1wiLnJiXCJdLFxuICBcInRleHQveC1zcWxcIjogW1wiLnNxbFwiXSxcbiAgXCJ0ZXh0L3gtc3dpZnRcIjogW1wiLnN3aWZ0XCJdLFxuICBcInRleHQveC1ydXN0XCI6IFtcIi5yc1wiXSxcbiAgXCJ0ZXh0L3gtZ29cIjogW1wiLmdvXCJdLFxuICBcInRleHQveC1rb3RsaW5cIjogW1wiLmt0XCIsIFwiLmt0c1wiXSxcbiAgXCJ0ZXh0L3gtc2NhbGFcIjogW1wiLnNjYWxhXCJdLFxuICBcInRleHQveC1ncm9vdnlcIjogW1wiLmdyb292eVwiXSxcbiAgXCJ0ZXh0L3gtcGVybFwiOiBbXCIucGxcIiwgXCIucG1cIl0sXG4gIFwidGV4dC94LXBlcmwtc2NyaXB0XCI6IFtcIi5wbFwiLCBcIi5wbVwiXSxcbiAgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjogW11cbn07XG4vLyBTdXBwb3J0ZWQgY29udGVudCB0eXBlcyBmb3IgaW1hZ2VzLlxudmFyIHN1cHBvcnRlZEltYWdlRmlsZUZvcm1hdHMgPSB7XG4gIFwiaW1hZ2UvanBlZ1wiOiBbXCIuanBnXCIsIFwiLmpwZWdcIl0sXG4gIFwiaW1hZ2UvcG5nXCI6IFtcIi5wbmdcIl0sXG4gIFwiaW1hZ2UvZ2lmXCI6IFtcIi5naWZcIl0sXG4gIFwiaW1hZ2Uvd2VicFwiOiBbXCIud2VicFwiXVxufTtcbnZhciBzdXBwb3J0ZWRPdGhlckNvbnRlbnRUeXBlcyA9IC8qI19fUFVSRV9fKi9PYmplY3Qua2V5cyhzdXBwb3J0ZWRPdGhlckZpbGVGb3JtYXRzKTtcbnZhciBzdXBwb3J0ZWRJbWFnZUNvbnRlbnRUeXBlcyA9IC8qI19fUFVSRV9fKi9PYmplY3Qua2V5cyhzdXBwb3J0ZWRJbWFnZUZpbGVGb3JtYXRzKTtcbnZhciBzdXBwb3J0ZWRGaWxlRXh0ZW5zaW9ucyA9IC8qI19fUFVSRV9fKi9bXS5jb25jYXQoLyojX19QVVJFX18qL09iamVjdC5rZXlzKHN1cHBvcnRlZE90aGVyRmlsZUZvcm1hdHMpLCAvKiNfX1BVUkVfXyovT2JqZWN0LmtleXMoc3VwcG9ydGVkSW1hZ2VGaWxlRm9ybWF0cykpO1xudmFyIHN1cHBvcnRlZFVwbG9hZGFibGVDb250ZW50VHlwZSA9IC8qI19fUFVSRV9fKi9bXS5jb25jYXQoc3VwcG9ydGVkT3RoZXJDb250ZW50VHlwZXMsIHN1cHBvcnRlZEltYWdlQ29udGVudFR5cGVzKTtcbnZhciBTdXBwb3J0ZWRDb250ZW50RnJhZ21lbnRUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIFN1cHBvcnRlZEZpbGVDb250ZW50RnJhZ21lbnRUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xuZnVuY3Rpb24gaXNTdXBwb3J0ZWRGaWxlQ29udGVudFR5cGUoY29udGVudFR5cGUpIHtcbiAgcmV0dXJuIHN1cHBvcnRlZFVwbG9hZGFibGVDb250ZW50VHlwZS5pbmNsdWRlcyhjb250ZW50VHlwZSk7XG59XG5mdW5jdGlvbiBpc1N1cHBvcnRlZFBsYWluVGV4dENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlKSB7XG4gIHJldHVybiBzdXBwb3J0ZWRPdGhlckNvbnRlbnRUeXBlcy5pbmNsdWRlcyhjb250ZW50VHlwZSk7XG59XG5mdW5jdGlvbiBpc1N1cHBvcnRlZEltYWdlQ29udGVudFR5cGUoY29udGVudFR5cGUpIHtcbiAgcmV0dXJuIHN1cHBvcnRlZEltYWdlQ29udGVudFR5cGVzLmluY2x1ZGVzKGNvbnRlbnRUeXBlKTtcbn1cbnZhciBVc2VyTWVzc2FnZU9yaWdpblNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKS5vcih6W1wibnVsbFwiXSgpKS5vcigvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKSk7XG52YXIgVmlzaWJpbGl0eVNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBPayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE9rKHZhbHVlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cbiAgdmFyIF9wcm90byA9IE9rLnByb3RvdHlwZTtcbiAgX3Byb3RvLmlzT2sgPSBmdW5jdGlvbiBpc09rKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBfcHJvdG8uaXNFcnIgPSBmdW5jdGlvbiBpc0VycigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIHJldHVybiBPaztcbn0oKTtcbnZhciBFcnIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFcnIoZXJyb3IpIHtcbiAgICB0aGlzLmVycm9yID0gdm9pZCAwO1xuICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgfVxuICB2YXIgX3Byb3RvMiA9IEVyci5wcm90b3R5cGU7XG4gIF9wcm90bzIuaXNPayA9IGZ1bmN0aW9uIGlzT2soKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBfcHJvdG8yLmlzRXJyID0gZnVuY3Rpb24gaXNFcnIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIHJldHVybiBFcnI7XG59KCk7XG4vLyBDdXN0b20gY29kZWMgdG8gdmFsaWRhdGUgdGhlIHRpbWV6b25lXG52YXIgVGltZXpvbmUgPSAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5yZWZpbmUoZnVuY3Rpb24gKHMpIHtcbiAgcmV0dXJuIG1vbWVudC50ei5uYW1lcygpLmluY2x1ZGVzKHMpO1xufSwge1xuICBtZXNzYWdlOiBcIkludmFsaWQgdGltZXpvbmVcIlxufSk7XG52YXIgQ29ubmVjdG9yUHJvdmlkZXJzU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIGlzQ29ubmVjdG9yUHJvdmlkZXIgPSBmdW5jdGlvbiBpc0Nvbm5lY3RvclByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gIHJldHVybiBDb25uZWN0b3JQcm92aWRlcnNTY2hlbWEuc2FmZVBhcnNlKHByb3ZpZGVyKS5zdWNjZXNzO1xufTtcbnZhciBFZGl0ZWRCeVVzZXJTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBlZGl0ZWRBdDogLyojX19QVVJFX18qL3oubnVtYmVyKCkubnVsbGFibGUoKSxcbiAgZnVsbE5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGltYWdlVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBlbWFpbDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgdXNlcklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpXG59KTtcbnZhciBEYXRhU291cmNlVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjcmVhdGVkQXQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGFzc2lzdGFudERlZmF1bHRTZWxlY3RlZDogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCksXG4gIGR1c3RBUElQcm9qZWN0SWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBkdXN0QVBJRGF0YVNvdXJjZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgY29ubmVjdG9ySWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNvbm5lY3RvclByb3ZpZGVyOiAvKiNfX1BVUkVfXyovQ29ubmVjdG9yUHJvdmlkZXJzU2NoZW1hLm51bGxhYmxlKCksXG4gIGVkaXRlZEJ5VXNlcjogLyojX19QVVJFX18qL0VkaXRlZEJ5VXNlclNjaGVtYS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbn0pO1xuZnVuY3Rpb24gaXNGb2xkZXIoZHMpIHtcbiAgLy8gSWYgdGhlcmUgaXMgbm8gY29ubmVjdG9yUHJvdmlkZXIsIGl0J3MgYSBmb2xkZXIuXG4gIHJldHVybiAhZHMuY29ubmVjdG9yUHJvdmlkZXI7XG59XG5mdW5jdGlvbiBpc1dlYnNpdGUoZHMpIHtcbiAgcmV0dXJuIGRzLmNvbm5lY3RvclByb3ZpZGVyID09PSBcIndlYmNyYXdsZXJcIjtcbn1cbnZhciBEYXRhU291cmNlVmlld0NhdGVnb3JpZXNTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgQmxvY2tUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIFN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi96W1wiZW51bVwiXShbXCJydW5uaW5nXCIsIFwic3VjY2VlZGVkXCIsIFwiZXJyb3JlZFwiXSk7XG52YXIgQmxvY2tSdW5Db25maWdTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5yZWNvcmQoLyojX19QVVJFX18qL3ouYW55KCkpO1xudmFyIEJsb2NrU3RhdHVzU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgYmxvY2tfdHlwZTogQmxvY2tUeXBlU2NoZW1hLFxuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgc3RhdHVzOiBTdGF0dXNTY2hlbWEsXG4gIHN1Y2Nlc3NfY291bnQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICBlcnJvcl9jb3VudDogLyojX19QVVJFX18qL3oubnVtYmVyKClcbn0pO1xudmFyIFJ1bkNvbmZpZ1NjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGJsb2NrczogQmxvY2tSdW5Db25maWdTY2hlbWFcbn0pO1xudmFyIFRyYWNlVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHZhbHVlOiAvKiNfX1BVUkVfXyovei51bmtub3duKCkubnVsbGFibGUoKSxcbiAgZXJyb3I6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIG1ldGE6IC8qI19fUFVSRV9fKi96LnVua25vd24oKS5udWxsYWJsZSgpXG59KTtcbnZhciBSdW5TdGF0dXNTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBydW46IFN0YXR1c1NjaGVtYSxcbiAgYmxvY2tzOiAvKiNfX1BVUkVfXyovei5hcnJheShCbG9ja1N0YXR1c1NjaGVtYSlcbn0pO1xudmFyIFJ1blR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBydW5faWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjcmVhdGVkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgcnVuX3R5cGU6IC8qI19fUFVSRV9fKi96W1wiZW51bVwiXShbXCJkZXBsb3lcIiwgXCJsb2NhbFwiLCBcImV4ZWN1dGVcIl0pLFxuICBhcHBfaGFzaDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBzcGVjaWZpY2F0aW9uX2hhc2g6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgY29uZmlnOiBSdW5Db25maWdTY2hlbWEsXG4gIHN0YXR1czogUnVuU3RhdHVzU2NoZW1hLFxuICB0cmFjZXM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnR1cGxlKFsvKiNfX1BVUkVfXyovei50dXBsZShbQmxvY2tUeXBlU2NoZW1hLCAvKiNfX1BVUkVfXyovei5zdHJpbmcoKV0pLCAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5hcnJheShUcmFjZVR5cGVTY2hlbWEpKV0pKSxcbiAgcmVzdWx0czogLyojX19QVVJFX18qL3ouYXJyYXkoei5hcnJheSh6Lm9iamVjdCh7XG4gICAgdmFsdWU6IHoudW5rbm93bigpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBlcnJvcjogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbiAgfSkpKS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIFRva2Vuc0NsYXNzaWZpY2F0aW9uU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIEdlbmVyYXRpb25Ub2tlbnNFdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJnZW5lcmF0aW9uX3Rva2Vuc1wiKSxcbiAgY3JlYXRlZDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIGNvbmZpZ3VyYXRpb25JZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG1lc3NhZ2VJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjbGFzc2lmaWNhdGlvbjogLyojX19QVVJFX18qL3oudW5pb24oW1Rva2Vuc0NsYXNzaWZpY2F0aW9uU2NoZW1hLCAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wib3BlbmluZ19kZWxpbWl0ZXJcIiwgXCJjbG9zaW5nX2RlbGltaXRlclwiXSldKSxcbiAgZGVsaW1pdGVyQ2xhc3NpZmljYXRpb246IC8qI19fUFVSRV9fKi9Ub2tlbnNDbGFzc2lmaWNhdGlvblNjaGVtYS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIERhdGFTb3VyY2VWaWV3S2luZFNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBEYXRhU291cmNlVmlld1NjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGNhdGVnb3J5OiBEYXRhU291cmNlVmlld0NhdGVnb3JpZXNTY2hlbWEsXG4gIGNyZWF0ZWRBdDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VUeXBlU2NoZW1hLFxuICBlZGl0ZWRCeVVzZXI6IC8qI19fUFVSRV9fKi9FZGl0ZWRCeVVzZXJTY2hlbWEubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBpZDogTW9kZWxJZFNjaGVtYSxcbiAga2luZDogRGF0YVNvdXJjZVZpZXdLaW5kU2NoZW1hLFxuICBwYXJlbnRzSW46IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCksXG4gIHNJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVwZGF0ZWRBdDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHNwYWNlSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBSZXRyaWV2YWxEb2N1bWVudENodW5rVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG9mZnNldDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHNjb3JlOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKS5udWxsYWJsZSgpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgUmV0cmlldmFsRG9jdW1lbnRUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgY2h1bmtzOiAvKiNfX1BVUkVfXyovei5hcnJheShSZXRyaWV2YWxEb2N1bWVudENodW5rVHlwZVNjaGVtYSksXG4gIGRvY3VtZW50SWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBkYXRhU291cmNlVmlldzogLyojX19QVVJFX18qL0RhdGFTb3VyY2VWaWV3U2NoZW1hLm51bGxhYmxlKCksXG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICByZWZlcmVuY2U6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBzY29yZTogLyojX19QVVJFX18qL3oubnVtYmVyKCkubnVsbGFibGUoKSxcbiAgc291cmNlVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICB0YWdzOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5zdHJpbmcoKSksXG4gIHRpbWVzdGFtcDogLyojX19QVVJFX18qL3oubnVtYmVyKClcbn0pO1xudmFyIFdoaXRlbGlzdGFibGVGZWF0dXJlc1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBXb3Jrc3BhY2VTZWdtZW50YXRpb25TY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCkubnVsbGFibGUoKTtcbnZhciBSb2xlU2NoZW1hID0gLyojX19QVVJFX18qL3pbXCJlbnVtXCJdKFtcImFkbWluXCIsIFwiYnVpbGRlclwiLCBcInVzZXJcIiwgXCJub25lXCJdKTtcbnZhciBMaWdodFdvcmtzcGFjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgcm9sZTogUm9sZVNjaGVtYSxcbiAgc2VnbWVudGF0aW9uOiBXb3Jrc3BhY2VTZWdtZW50YXRpb25TY2hlbWEsXG4gIHdoaXRlTGlzdGVkUHJvdmlkZXJzOiAvKiNfX1BVUkVfXyovTW9kZWxQcm92aWRlcklkU2NoZW1hLmFycmF5KCkubnVsbGFibGUoKSxcbiAgZGVmYXVsdEVtYmVkZGluZ1Byb3ZpZGVyOiAvKiNfX1BVUkVfXyovRW1iZWRkaW5nUHJvdmlkZXJJZFNjaGVtYS5udWxsYWJsZSgpXG59KTtcbnZhciBXb3Jrc3BhY2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovTGlnaHRXb3Jrc3BhY2VTY2hlbWEuZXh0ZW5kKHtcbiAgc3NvRW5mb3JjZWQ6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIEV4dGVuc2lvbldvcmtzcGFjZVNjaGVtYSA9IC8qI19fUFVSRV9fKi9Xb3Jrc3BhY2VTY2hlbWEuZXh0ZW5kKHtcbiAgYmxhY2tsaXN0ZWREb21haW5zOiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5udWxsYWJsZSgpXG59KTtcbnZhciBVc2VyUHJvdmlkZXJTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCkubnVsbGFibGUoKTtcbnZhciBVc2VyU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgaWQ6IE1vZGVsSWRTY2hlbWEsXG4gIGNyZWF0ZWRBdDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHByb3ZpZGVyOiBVc2VyUHJvdmlkZXJTY2hlbWEsXG4gIHVzZXJuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZW1haWw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBmaXJzdE5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBsYXN0TmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgZnVsbE5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBpbWFnZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKVxufSk7XG52YXIgV2Vic2VhcmNoUmVzdWx0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBzbmlwcGV0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbGluazogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHJlZmVyZW5jZTogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xudmFyIE1DUEFjdGlvblR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBpZDogTW9kZWxJZFNjaGVtYSxcbiAgbWNwU2VydmVySWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGludGVybmFsTUNQU2VydmVyTmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgYWdlbnRNZXNzYWdlSWQ6IE1vZGVsSWRTY2hlbWEsXG4gIGZ1bmN0aW9uQ2FsbE5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHN0YXR1czogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHBhcmFtczogLyojX19QVVJFX18qL3oucmVjb3JkKC8qI19fUFVSRV9fKi96LmFueSgpKSxcbiAgb3V0cHV0OiAvKiNfX1BVUkVfXyovQ2FsbFRvb2xSZXN1bHRTY2hlbWEuc2hhcGUuY29udGVudC5udWxsYWJsZSgpXG59KTtcbnZhciBHbG9iYWxBZ2VudFN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBBZ2VudFN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBBZ2VudENvbmZpZ3VyYXRpb25TdGF0dXNTY2hlbWEgPSAvKiNfX1BVUkVfXyovei51bmlvbihbQWdlbnRTdGF0dXNTY2hlbWEsIEdsb2JhbEFnZW50U3RhdHVzU2NoZW1hXSk7XG52YXIgQWdlbnRDb25maWd1cmF0aW9uU2NvcGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgQWdlbnRDb25maWd1cmF0aW9uVmlld1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBBZ2VudFVzYWdlVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1lc3NhZ2VDb3VudDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIGNvbnZlcnNhdGlvbkNvdW50OiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdXNlckNvdW50OiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdGltZVBlcmlvZFNlYzogLyojX19QVVJFX18qL3oubnVtYmVyKClcbn0pO1xudmFyIEFnZW50UmVjZW50QXV0aG9yc1NjaGVtYSA9IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLnJlYWRvbmx5KCk7XG52YXIgQWdlbnRNb2RlbENvbmZpZ3VyYXRpb25TY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBwcm92aWRlcklkOiBNb2RlbFByb3ZpZGVySWRTY2hlbWEsXG4gIG1vZGVsSWQ6IE1vZGVsTExNSWRTY2hlbWEsXG4gIHRlbXBlcmF0dXJlOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKVxufSk7XG52YXIgTGlnaHRBZ2VudENvbmZpZ3VyYXRpb25TY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBpZDogTW9kZWxJZFNjaGVtYSxcbiAgdmVyc2lvbkNyZWF0ZWRBdDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgc0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdmVyc2lvbjogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHZlcnNpb25BdXRob3JJZDogLyojX19QVVJFX18qL01vZGVsSWRTY2hlbWEubnVsbGFibGUoKSxcbiAgaW5zdHJ1Y3Rpb25zOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBtb2RlbDogQWdlbnRNb2RlbENvbmZpZ3VyYXRpb25TY2hlbWEsXG4gIHN0YXR1czogQWdlbnRDb25maWd1cmF0aW9uU3RhdHVzU2NoZW1hLFxuICBzY29wZTogQWdlbnRDb25maWd1cmF0aW9uU2NvcGVTY2hlbWEsXG4gIHVzZXJGYXZvcml0ZTogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCksXG4gIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBkZXNjcmlwdGlvbjogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHBpY3R1cmVVcmw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBsYXN0QXV0aG9yczogLyojX19QVVJFX18qL0FnZW50UmVjZW50QXV0aG9yc1NjaGVtYS5vcHRpb25hbCgpLFxuICB1c2FnZTogLyojX19QVVJFX18qL0FnZW50VXNhZ2VUeXBlU2NoZW1hLm9wdGlvbmFsKCksXG4gIG1heFN0ZXBzUGVyUnVuOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdmlzdWFsaXphdGlvbkVuYWJsZWQ6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLFxuICB0ZW1wbGF0ZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBncm91cElkczogLyojX19QVVJFX18qL3ouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgcmVxdWVzdGVkR3JvdXBJZHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKSlcbn0pO1xudmFyIENvbnRlbnRGcmFnbWVudENvbnRleHRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB1c2VybmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBmdWxsTmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBlbWFpbDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBwcm9maWxlUGljdHVyZVVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG59KTtcbnZhciBDb250ZW50Tm9kZVR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei51bmlvbihbLyojX19QVVJFX18qL3oubGl0ZXJhbChcImRvY3VtZW50XCIpLCAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidGFibGVcIiksIC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJmb2xkZXJcIildKTtcbnZhciBDb250ZW50Tm9kZXNWaWV3VHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LnVuaW9uKFsvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidGFibGVcIiksIC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJkb2N1bWVudFwiKSwgLyojX19QVVJFX18qL3oubGl0ZXJhbChcImFsbFwiKV0pO1xudmFyIENvbnRlbnRGcmFnbWVudE5vZGVEYXRhID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbm9kZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbm9kZURhdGFTb3VyY2VWaWV3SWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBub2RlVHlwZTogQ29udGVudE5vZGVUeXBlU2NoZW1hLFxuICBwcm92aWRlcjogLyojX19QVVJFX18qL0Nvbm5lY3RvclByb3ZpZGVyc1NjaGVtYS5udWxsYWJsZSgpLFxuICBzcGFjZU5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBCYXNlQ29udGVudEZyYWdtZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcImNvbnRlbnRfZnJhZ21lbnRcIiksXG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjcmVhdGVkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdmlzaWJpbGl0eTogVmlzaWJpbGl0eVNjaGVtYSxcbiAgdmVyc2lvbjogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHNvdXJjZVVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb250ZW50VHlwZTogU3VwcG9ydGVkQ29udGVudEZyYWdtZW50VHlwZVNjaGVtYSxcbiAgY29udGV4dDogQ29udGVudEZyYWdtZW50Q29udGV4dFNjaGVtYSxcbiAgY29udGVudEZyYWdtZW50SWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb250ZW50RnJhZ21lbnRWZXJzaW9uOiAvKiNfX1BVUkVfXyovei51bmlvbihbLyojX19QVVJFX18qL3oubGl0ZXJhbChcImxhdGVzdFwiKSwgLyojX19QVVJFX18qL3oubGl0ZXJhbChcInN1cGVyc2VkZWRcIildKVxufSk7XG52YXIgRmlsZUNvbnRlbnRGcmFnbWVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi9CYXNlQ29udGVudEZyYWdtZW50U2NoZW1hLmV4dGVuZCh7XG4gIGNvbnRlbnRGcmFnbWVudFR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJmaWxlXCIpLFxuICBmaWxlSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHNuaXBwZXQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGdlbmVyYXRlZFRhYmxlczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpLFxuICB0ZXh0VXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGV4dEJ5dGVzOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKS5udWxsYWJsZSgpXG59KTtcbnZhciBDb250ZW50Tm9kZUNvbnRlbnRGcmFnbWVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi9CYXNlQ29udGVudEZyYWdtZW50U2NoZW1hLmV4dGVuZCh7XG4gIGNvbnRlbnRGcmFnbWVudFR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJjb250ZW50X25vZGVcIiksXG4gIG5vZGVJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG5vZGVEYXRhU291cmNlVmlld0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbm9kZVR5cGU6IENvbnRlbnROb2RlVHlwZVNjaGVtYSxcbiAgY29udGVudE5vZGVEYXRhOiBDb250ZW50RnJhZ21lbnROb2RlRGF0YVxufSk7XG52YXIgQ29udGVudEZyYWdtZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oudW5pb24oW0ZpbGVDb250ZW50RnJhZ21lbnRTY2hlbWEsIENvbnRlbnROb2RlQ29udGVudEZyYWdtZW50U2NoZW1hXSk7XG52YXIgQWdlbnRNZW50aW9uU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgY29uZmlndXJhdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgVXNlck1lc3NhZ2VDb250ZXh0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdXNlcm5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0aW1lem9uZTogVGltZXpvbmUsXG4gIGZ1bGxOYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIGVtYWlsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIHByb2ZpbGVQaWN0dXJlVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIG9yaWdpbjogVXNlck1lc3NhZ2VPcmlnaW5TY2hlbWEsXG4gIGNsaWVudFNpZGVNQ1BTZXJ2ZXJJZHM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgc2VsZWN0ZWRNQ1BTZXJ2ZXJWaWV3SWRzOiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKClcbn0pO1xudmFyIFVzZXJNZXNzYWdlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgaWQ6IE1vZGVsSWRTY2hlbWEsXG4gIGNyZWF0ZWQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICB0eXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidXNlcl9tZXNzYWdlXCIpLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB2aXNpYmlsaXR5OiBWaXNpYmlsaXR5U2NoZW1hLFxuICB2ZXJzaW9uOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdXNlcjogLyojX19QVVJFX18qL1VzZXJTY2hlbWEubnVsbGFibGUoKSxcbiAgbWVudGlvbnM6IC8qI19fUFVSRV9fKi96LmFycmF5KEFnZW50TWVudGlvblNjaGVtYSksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb250ZXh0OiBVc2VyTWVzc2FnZUNvbnRleHRTY2hlbWFcbn0pO1xudmFyIEFnZW50TWVzc2FnZVN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBBZ2VudE1lc3NhZ2VUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgaWQ6IE1vZGVsSWRTY2hlbWEsXG4gIGFnZW50TWVzc2FnZUlkOiBNb2RlbElkU2NoZW1hLFxuICBjcmVhdGVkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcImFnZW50X21lc3NhZ2VcIiksXG4gIHNJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHZpc2liaWxpdHk6IFZpc2liaWxpdHlTY2hlbWEsXG4gIHZlcnNpb246IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICBwYXJlbnRNZXNzYWdlSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNvbmZpZ3VyYXRpb246IExpZ2h0QWdlbnRDb25maWd1cmF0aW9uU2NoZW1hLFxuICBzdGF0dXM6IEFnZW50TWVzc2FnZVN0YXR1c1NjaGVtYSxcbiAgYWN0aW9uczogLyojX19QVVJFX18qL3ouYXJyYXkoTUNQQWN0aW9uVHlwZVNjaGVtYSksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNoYWluT2ZUaG91Z2h0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICByYXdDb250ZW50czogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBzdGVwOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgICBjb250ZW50OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxuICB9KSksXG4gIGVycm9yOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5hbnkoKSkubnVsbGFibGUoKVxuICB9KS5udWxsYWJsZSgpXG59KTtcbnZhciBBZ2VudE1lc3NhZ2VGZWVkYmFja1NjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1lc3NhZ2VJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGFnZW50TWVzc2FnZUlkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdXNlcklkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdGh1bWJEaXJlY3Rpb246IC8qI19fUFVSRV9fKi96LnVuaW9uKFsvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidXBcIiksIC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJkb3duXCIpXSksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNyZWF0ZWRBdDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIGFnZW50Q29uZmlndXJhdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgYWdlbnRDb25maWd1cmF0aW9uVmVyc2lvbjogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIGlzQ29udmVyc2F0aW9uU2hhcmVkOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKVxufSk7XG52YXIgQ29udmVyc2F0aW9uVmlzaWJpbGl0eVNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBDb252ZXJzYXRpb25XaXRob3V0Q29udGVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICBjcmVhdGVkOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdXBkYXRlZDogLyojX19QVVJFX18qL3oubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgb3duZXI6IFdvcmtzcGFjZVNjaGVtYSxcbiAgc0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHZpc2liaWxpdHk6IENvbnZlcnNhdGlvblZpc2liaWxpdHlTY2hlbWEsXG4gIGdyb3VwSWRzOiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICByZXF1ZXN0ZWRHcm91cElkczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpKVxufSk7XG52YXIgQ29udmVyc2F0aW9uU2NoZW1hID0gLyojX19QVVJFX18qL0NvbnZlcnNhdGlvbldpdGhvdXRDb250ZW50U2NoZW1hLmV4dGVuZCh7XG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnVuaW9uKFsvKiNfX1BVUkVfXyovei5hcnJheShVc2VyTWVzc2FnZVNjaGVtYSksIC8qI19fUFVSRV9fKi96LmFycmF5KEFnZW50TWVzc2FnZVR5cGVTY2hlbWEpLCAvKiNfX1BVUkVfXyovei5hcnJheShDb250ZW50RnJhZ21lbnRTY2hlbWEpXSkpXG59KTtcbnZhciBNQ1BTdGFrZUxldmVsU2NoZW1hID0gLyojX19QVVJFX18qL3pbXCJlbnVtXCJdKFtcImxvd1wiLCBcImhpZ2hcIiwgXCJuZXZlcl9hc2tcIl0pLm9wdGlvbmFsKCk7XG52YXIgTUNQVmFsaWRhdGlvbk1ldGFkYXRhU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWNwU2VydmVyTmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHRvb2xOYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgYWdlbnROYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgcHVic3ViTWVzc2FnZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpY29uOiAvKiNfX1BVUkVfXyovei51bmlvbihbTUNQSW50ZXJuYWxBY3Rpb25JY29uU2NoZW1hLCBNQ1BFeHRlcm5hbEFjdGlvbkljb25TY2hlbWFdKS5vcHRpb25hbCgpXG59KTtcbnZhciBUb29sRXhlY3V0aW9uQmxvY2tlZFN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi96W1wiZW51bVwiXShbXCJibG9ja2VkX2F1dGhlbnRpY2F0aW9uX3JlcXVpcmVkXCIsIFwiYmxvY2tlZF92YWxpZGF0aW9uX3JlcXVpcmVkXCIsIFwiYmxvY2tlZF9jaGlsZF9hY3Rpb25faW5wdXRfcmVxdWlyZWRcIl0pO1xudmFyIFRvb2xFeGVjdXRpb25NZXRhZGF0YVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGFjdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgaW5wdXRzOiAvKiNfX1BVUkVfXyovei5yZWNvcmQoLyojX19QVVJFX18qL3ouYW55KCkpLFxuICBzdGFrZTogTUNQU3Rha2VMZXZlbFNjaGVtYSxcbiAgbWV0YWRhdGE6IE1DUFZhbGlkYXRpb25NZXRhZGF0YVNjaGVtYVxufSk7XG52YXIgQmxvY2tlZEFjdGlvbkV4ZWN1dGlvblNjaGVtYSA9IC8qI19fUFVSRV9fKi9Ub29sRXhlY3V0aW9uTWV0YWRhdGFTY2hlbWEuZXh0ZW5kKHtcbiAgbWVzc2FnZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgY29udmVyc2F0aW9uSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBzdGF0dXM6IFRvb2xFeGVjdXRpb25CbG9ja2VkU3RhdHVzU2NoZW1hXG59KTtcbmZ1bmN0aW9uIGlzTUNQU2VydmVyUGVyc29uYWxBdXRoUmVxdWlyZWRFcnJvcihlcnJvcikge1xuICByZXR1cm4gZXJyb3IuY29kZSA9PT0gXCJtY3Bfc2VydmVyX3BlcnNvbmFsX2F1dGhlbnRpY2F0aW9uX3JlcXVpcmVkXCIgJiYgZXJyb3IubWV0YWRhdGEgJiYgXCJtY3BTZXJ2ZXJJZFwiIGluIGVycm9yLm1ldGFkYXRhO1xufVxudmFyIENvcmVBUElFcnJvclNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG1lc3NhZ2U6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb2RlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgQ29yZUFQSVRva2VuVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LnR1cGxlKFsvKiNfX1BVUkVfXyovei5udW1iZXIoKSwgLyojX19QVVJFX18qL3ouc3RyaW5nKCldKTtcbnZhciBBUElFcnJvclR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgQVBJRXJyb3JTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiBBUElFcnJvclR5cGVTY2hlbWEsXG4gIG1lc3NhZ2U6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBkYXRhX3NvdXJjZV9lcnJvcjogLyojX19QVVJFX18qL0NvcmVBUElFcnJvclNjaGVtYS5vcHRpb25hbCgpLFxuICBydW5fZXJyb3I6IC8qI19fUFVSRV9fKi9Db3JlQVBJRXJyb3JTY2hlbWEub3B0aW9uYWwoKSxcbiAgYXBwX2Vycm9yOiAvKiNfX1BVUkVfXyovQ29yZUFQSUVycm9yU2NoZW1hLm9wdGlvbmFsKCksXG4gIGNvbm5lY3RvcnNfZXJyb3I6IC8qI19fUFVSRV9fKi9Db25uZWN0b3JzQVBJRXJyb3JTY2hlbWEub3B0aW9uYWwoKVxufSk7XG52YXIgV29ya3NwYWNlRG9tYWluU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZG9tYWluOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZG9tYWluQXV0b0pvaW5FbmFibGVkOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKVxufSk7XG52YXIgRHVzdEFwcFR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBhcHBIYXNoOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgYXBwSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB3b3Jrc3BhY2VJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xudmFyIER1c3RBcHBDb25maWdUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL3oucmVjb3JkKC8qI19fUFVSRV9fKi96LnVua25vd24oKSk7XG52YXIgRHVzdEFwcFJ1bkVycm9yZWRFdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJlcnJvclwiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBjb2RlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBtZXNzYWdlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxuICB9KVxufSk7XG52YXIgRHVzdEFwcFJ1blJ1blN0YXR1c0V2ZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcInJ1bl9zdGF0dXNcIiksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgc3RhdHVzOiAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wicnVubmluZ1wiLCBcInN1Y2NlZWRlZFwiLCBcImVycm9yZWRcIl0pLFxuICAgIHJ1bl9pZDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbiAgfSlcbn0pO1xudmFyIER1c3RBcHBSdW5CbG9ja1N0YXR1c0V2ZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcImJsb2NrX3N0YXR1c1wiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBibG9ja190eXBlOiBCbG9ja1R5cGVTY2hlbWEsXG4gICAgbmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gICAgc3RhdHVzOiBTdGF0dXNTY2hlbWEsXG4gICAgc3VjY2Vzc19jb3VudDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gICAgZXJyb3JfY291bnQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpXG4gIH0pXG59KTtcbnZhciBEdXN0QXBwUnVuQmxvY2tFeGVjdXRpb25FdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJibG9ja19leGVjdXRpb25cIiksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgYmxvY2tfdHlwZTogQmxvY2tUeXBlU2NoZW1hLFxuICAgIGJsb2NrX25hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIGV4ZWN1dGlvbjogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICAgIHZhbHVlOiAvKiNfX1BVUkVfXyovei51bmtub3duKCkubnVsbGFibGUoKSxcbiAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgbWV0YTogLyojX19QVVJFX18qL3oudW5rbm93bigpLm51bGxhYmxlKClcbiAgICB9KSkpXG4gIH0pXG59KTtcbnZhciBEdXN0QXBwUnVuRmluYWxFdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJmaW5hbFwiKVxufSk7XG52YXIgRHVzdEFwcFJ1blRva2Vuc0V2ZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdHlwZTogLyojX19QVVJFX18qL3oubGl0ZXJhbChcInRva2Vuc1wiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBibG9ja190eXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBibG9ja19uYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBpbnB1dF9pbmRleDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gICAgbWFwOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIGl0ZXJhdGlvbjogei5udW1iZXIoKVxuICAgIH0pLm51bGxhYmxlKCksXG4gICAgdG9rZW5zOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gICAgICB0b2tlbnM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICBsb2dwcm9iczogLyojX19QVVJFX18qL3ouYXJyYXkoei5udW1iZXIoKSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIH0pXG59KTtcbnZhciBEdXN0QXBwUnVuUmVhc29uaW5nVG9rZW5zRXZlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwicmVhc29uaW5nX3Rva2Vuc1wiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBibG9ja190eXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBibG9ja19uYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBpbnB1dF9pbmRleDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gICAgbWFwOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIGl0ZXJhdGlvbjogei5udW1iZXIoKVxuICAgIH0pLm51bGxhYmxlKCksXG4gICAgdG9rZW5zOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgdGV4dDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbiAgICB9KVxuICB9KVxufSk7XG52YXIgRHVzdEFwcFJ1blJlYXNvbmluZ0l0ZW1FdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJyZWFzb25pbmdfaXRlbVwiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBibG9ja190eXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBibG9ja19uYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBpbnB1dF9pbmRleDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gICAgbWFwOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIGl0ZXJhdGlvbjogei5udW1iZXIoKVxuICAgIH0pLm51bGxhYmxlKCksXG4gICAgaXRlbTogLyojX19QVVJFX18qL3oudW5rbm93bigpXG4gIH0pXG59KTtcbnZhciBEdXN0QXBwUnVuRnVuY3Rpb25DYWxsRXZlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0eXBlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiZnVuY3Rpb25fY2FsbFwiKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBibG9ja190eXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBibG9ja19uYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBpbnB1dF9pbmRleDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gICAgbWFwOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIGl0ZXJhdGlvbjogei5udW1iZXIoKVxuICAgIH0pLm51bGxhYmxlKCksXG4gICAgZnVuY3Rpb25fY2FsbDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICAgIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG4gICAgfSlcbiAgfSlcbn0pO1xudmFyIER1c3RBcHBSdW5GdW5jdGlvbkNhbGxBcmd1bWVudHNUb2tlbnNFdmVudFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHR5cGU6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwoXCJmdW5jdGlvbl9jYWxsX2FyZ3VtZW50c190b2tlbnNcIiksXG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgYmxvY2tfdHlwZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gICAgYmxvY2tfbmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gICAgaW5wdXRfaW5kZXg6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICAgIG1hcDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICBpdGVyYXRpb246IHoubnVtYmVyKClcbiAgICB9KS5udWxsYWJsZSgpLFxuICAgIHRva2VuczogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICAgIHRleHQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG4gICAgfSlcbiAgfSlcbn0pO1xudmFyIFNwYWNlS2luZFNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBTcGFjZVR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBjcmVhdGVkQXQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICBncm91cElkczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpLFxuICBpc1Jlc3RyaWN0ZWQ6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLFxuICBraW5kOiBTcGFjZUtpbmRTY2hlbWEsXG4gIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cGRhdGVkQXQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpXG59KTtcbnZhciBEYXRhc2V0U2NoZW1hRW50cnlUeXBlID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIERhdGFzZXRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGRhdGE6IC8qI19fUFVSRV9fKi96LmFycmF5KHoucmVjb3JkKHouYW55KCkpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHNjaGVtYTogLyojX19QVVJFX18qL3ouYXJyYXkoei5vYmplY3Qoe1xuICAgIGtleTogei5zdHJpbmcoKSxcbiAgICB0eXBlOiBEYXRhc2V0U2NoZW1hRW50cnlUeXBlLFxuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKClcbiAgfSkpLm51bGxhYmxlKCkub3B0aW9uYWwoKVxufSk7XG52YXIgQXBwVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGlkOiBNb2RlbElkU2NoZW1hLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHNhdmVkU3BlY2lmaWNhdGlvbjogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgc2F2ZWRDb25maWc6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHNhdmVkUnVuOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBkdXN0QVBJUHJvamVjdElkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgc3BhY2U6IFNwYWNlVHlwZVNjaGVtYSxcbiAgZGF0YXNldHM6IC8qI19fUFVSRV9fKi96LmFycmF5KERhdGFzZXRTY2hlbWEpLm9wdGlvbmFsKCksXG4gIGNvcmVTcGVjaWZpY2F0aW9uczogLyojX19QVVJFX18qL3oucmVjb3JkKHouc3RyaW5nKCkpLm9wdGlvbmFsKClcbn0pO1xudmFyIEFwcEltcG9ydFR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBpZDogLyojX19QVVJFX18qL01vZGVsSWRTY2hlbWEub3B0aW9uYWwoKSxcbiAgc0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBzYXZlZFNwZWNpZmljYXRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCksXG4gIHNhdmVkQ29uZmlnOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBzYXZlZFJ1bjogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgZHVzdEFQSVByb2plY3RJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGRhdGFzZXRzOiAvKiNfX1BVUkVfXyovei5hcnJheShEYXRhc2V0U2NoZW1hKS5vcHRpb25hbCgpLFxuICBjb3JlU3BlY2lmaWNhdGlvbnM6IC8qI19fUFVSRV9fKi96LnJlY29yZCh6LnN0cmluZygpKS5vcHRpb25hbCgpXG59KTtcbnZhciBSdW5BcHBSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHJ1bjogUnVuVHlwZVNjaGVtYVxufSk7XG52YXIgR2V0RGF0YVNvdXJjZXNSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFfc291cmNlczogLyojX19QVVJFX18qL0RhdGFTb3VyY2VUeXBlU2NoZW1hLmFycmF5KClcbn0pO1xudmFyIEdldE9yUGF0Y2hBZ2VudENvbmZpZ3VyYXRpb25SZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGFnZW50Q29uZmlndXJhdGlvbjogTGlnaHRBZ2VudENvbmZpZ3VyYXRpb25TY2hlbWFcbn0pO1xudmFyIFBhdGNoQWdlbnRDb25maWd1cmF0aW9uUmVxdWVzdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHVzZXJGYXZvcml0ZTogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKVxufSk7XG52YXIgR2V0QWdlbnRDb25maWd1cmF0aW9uc1Jlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgYWdlbnRDb25maWd1cmF0aW9uczogLyojX19QVVJFX18qL0xpZ2h0QWdlbnRDb25maWd1cmF0aW9uU2NoZW1hLmFycmF5KClcbn0pO1xudmFyIENyZWF0ZUdlbmVyaWNBZ2VudENvbmZpZ3VyYXRpb25SZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgaW5zdHJ1Y3Rpb25zOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZW1vamk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN1YkFnZW50TmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3ViQWdlbnREZXNjcmlwdGlvbjogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3ViQWdlbnRJbnN0cnVjdGlvbnM6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN1YkFnZW50RW1vamk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIENyZWF0ZUdlbmVyaWNBZ2VudENvbmZpZ3VyYXRpb25SZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGFnZW50Q29uZmlndXJhdGlvbjogTGlnaHRBZ2VudENvbmZpZ3VyYXRpb25TY2hlbWEsXG4gIHN1YkFnZW50Q29uZmlndXJhdGlvbjogLyojX19QVVJFX18qL0xpZ2h0QWdlbnRDb25maWd1cmF0aW9uU2NoZW1hLm9wdGlvbmFsKClcbn0pO1xudmFyIFBvc3RDb250ZW50RnJhZ21lbnRSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGNvbnRlbnRGcmFnbWVudDogQ29udGVudEZyYWdtZW50U2NoZW1hXG59KTtcbnZhciBDcmVhdGVDb252ZXJzYXRpb25SZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uU2NoZW1hLFxuICBtZXNzYWdlOiAvKiNfX1BVUkVfXyovVXNlck1lc3NhZ2VTY2hlbWEub3B0aW9uYWwoKVxufSk7XG52YXIgR2V0RmVlZGJhY2tzUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBmZWVkYmFja3M6IC8qI19fUFVSRV9fKi96LmFycmF5KEFnZW50TWVzc2FnZUZlZWRiYWNrU2NoZW1hKVxufSk7XG52YXIgUHVibGljUG9zdE1lc3NhZ2VGZWVkYmFja1JlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdGh1bWJEaXJlY3Rpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBmZWVkYmFja0NvbnRlbnQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgaXNDb252ZXJzYXRpb25TaGFyZWQ6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIFBvc3RNZXNzYWdlRmVlZGJhY2tSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHN1Y2Nlc3M6IC8qI19fUFVSRV9fKi96LmxpdGVyYWwodHJ1ZSlcbn0pO1xudmFyIFBvc3RVc2VyTWVzc2FnZVJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWVzc2FnZTogVXNlck1lc3NhZ2VTY2hlbWFcbn0pO1xudmFyIFJldHJ5TWVzc2FnZVJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWVzc2FnZTogQWdlbnRNZXNzYWdlVHlwZVNjaGVtYVxufSk7XG52YXIgR2V0Q29udmVyc2F0aW9uUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvblNjaGVtYVxufSk7XG52YXIgVG9rZW5pemVSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHRva2VuczogLyojX19QVVJFX18qL0NvcmVBUElUb2tlblR5cGVTY2hlbWEuYXJyYXkoKVxufSk7XG52YXIgR2V0QWN0aXZlTWVtYmVyRW1haWxzSW5Xb3Jrc3BhY2VSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGVtYWlsczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpXG59KTtcbnZhciBHZXRXb3Jrc3BhY2VWZXJpZmllZERvbWFpbnNSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHZlcmlmaWVkX2RvbWFpbnM6IC8qI19fUFVSRV9fKi9Xb3Jrc3BhY2VEb21haW5TY2hlbWEuYXJyYXkoKVxufSk7XG52YXIgR2V0V29ya3NwYWNlRmVhdHVyZUZsYWdzUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBmZWF0dXJlX2ZsYWdzOiAvKiNfX1BVUkVfXyovV2hpdGVsaXN0YWJsZUZlYXR1cmVzU2NoZW1hLmFycmF5KClcbn0pO1xudmFyIFB1YmxpY1Bvc3RNZXNzYWdlc1JlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3ouaW50ZXJzZWN0aW9uKC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGNvbnRlbnQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm1pbigxKSxcbiAgbWVudGlvbnM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgY29uZmlndXJhdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxuICB9KSksXG4gIGNvbnRleHQ6IC8qI19fUFVSRV9fKi9Vc2VyTWVzc2FnZUNvbnRleHRTY2hlbWEuZXh0ZW5kKHtcbiAgICBjbGllbnRTaWRlTUNQU2VydmVySWRzOiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKClcbiAgfSlcbn0pLCAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBibG9ja2luZzogeltcImJvb2xlYW5cIl0oKS5vcHRpb25hbCgpLFxuICBza2lwVG9vbHNWYWxpZGF0aW9uOiB6W1wiYm9vbGVhblwiXSgpLm9wdGlvbmFsKClcbn0pLnBhcnRpYWwoKSk7XG52YXIgUHVibGljUG9zdEVkaXRNZXNzYWdlc1JlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgY29udGVudDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG1lbnRpb25zOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIGNvbmZpZ3VyYXRpb25JZDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbiAgfSkpLFxuICBza2lwVG9vbHNWYWxpZGF0aW9uOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKS5vcHRpb25hbCgpW1wiZGVmYXVsdFwiXShmYWxzZSlcbn0pO1xudmFyIFB1YmxpY0NvbnRlbnRGcmFnbWVudFdpdGhDb250ZW50U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB1cmw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgY29udGVudDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGNvbnRlbnRUeXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZmlsZUlkOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBub2RlSWQ6IC8qI19fUFVSRV9fKi96LnVuZGVmaW5lZCgpLm51bGxhYmxlKCksXG4gIG5vZGVEYXRhU291cmNlVmlld0lkOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBjb250ZXh0OiAvKiNfX1BVUkVfXyovQ29udGVudEZyYWdtZW50Q29udGV4dFNjaGVtYS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIC8vIFVuZG9jdW1lbnRlZCBmb3Igbm93IC0tIGFsbG93cyB0byBzdXBlcnNlZGUgYW4gZXhpc3RpbmcgY29udGVudCBmcmFnbWVudC5cbiAgc3VwZXJzZWRlZENvbnRlbnRGcmFnbWVudElkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKClcbn0pO1xudmFyIFB1YmxpY0NvbnRlbnRGcmFnbWVudFdpdGhGaWxlSWRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGZpbGVJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICBjb250ZW50OiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBjb250ZW50VHlwZTogLyojX19QVVJFX18qL3oudW5kZWZpbmVkKCkubnVsbGFibGUoKSxcbiAgbm9kZUlkOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBub2RlRGF0YVNvdXJjZVZpZXdJZDogLyojX19QVVJFX18qL3oudW5kZWZpbmVkKCkubnVsbGFibGUoKSxcbiAgY29udGV4dDogLyojX19QVVJFX18qL0NvbnRlbnRGcmFnbWVudENvbnRleHRTY2hlbWEub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAvLyBVbmRvY3VtZW50ZWQgZm9yIG5vdyAtLSBhbGxvd3MgdG8gc3VwZXJzZWRlIGFuIGV4aXN0aW5nIGNvbnRlbnQgZnJhZ21lbnQuXG4gIHN1cGVyc2VkZWRDb250ZW50RnJhZ21lbnRJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG59KTtcbnZhciBQdWJsaWNDb250ZW50RnJhZ21lbnRXaXRoQ29udGVudE5vZGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG5vZGVJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG5vZGVEYXRhU291cmNlVmlld0lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdXJsOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBjb250ZW50OiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBjb250ZW50VHlwZTogLyojX19QVVJFX18qL3oudW5kZWZpbmVkKCkubnVsbGFibGUoKSxcbiAgZmlsZUlkOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBjb250ZXh0OiAvKiNfX1BVUkVfXyovQ29udGVudEZyYWdtZW50Q29udGV4dFNjaGVtYS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIHN1cGVyc2VkZWRDb250ZW50RnJhZ21lbnRJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG59KTtcbnZhciBQdWJsaWNQb3N0Q29udGVudEZyYWdtZW50UmVxdWVzdEJvZHlTY2hlbWEgPSAvKiNfX1BVUkVfXyovei51bmlvbihbUHVibGljQ29udGVudEZyYWdtZW50V2l0aENvbnRlbnRTY2hlbWEsIFB1YmxpY0NvbnRlbnRGcmFnbWVudFdpdGhGaWxlSWRTY2hlbWEsIFB1YmxpY0NvbnRlbnRGcmFnbWVudFdpdGhDb250ZW50Tm9kZVNjaGVtYV0pO1xudmFyIFB1YmxpY1Bvc3RDb252ZXJzYXRpb25zUmVxdWVzdEJvZHlTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5pbnRlcnNlY3Rpb24oLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgdmlzaWJpbGl0eTogLyojX19QVVJFX18qL3pbXCJlbnVtXCJdKFtcIndvcmtzcGFjZVwiLCBcInVubGlzdGVkXCIsIFwiZGVsZXRlZFwiLCBcInRlc3RcIl0pLm9wdGlvbmFsKClbXCJkZWZhdWx0XCJdKFwidW5saXN0ZWRcIiksXG4gIGRlcHRoOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBtZXNzYWdlOiAvKiNfX1BVUkVfXyovei51bmlvbihbLyojX19QVVJFX18qL3ouaW50ZXJzZWN0aW9uKC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgY29udGVudDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubWluKDEpLFxuICAgIG1lbnRpb25zOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgICAgY29uZmlndXJhdGlvbklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxuICAgIH0pKSxcbiAgICBjb250ZXh0OiBVc2VyTWVzc2FnZUNvbnRleHRTY2hlbWFcbiAgfSksIC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgYmxvY2tpbmc6IHpbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKVxuICB9KS5wYXJ0aWFsKCkpLCAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKV0pLFxuICBjb250ZW50RnJhZ21lbnQ6IC8qI19fUFVSRV9fKi96LnVuaW9uKFtQdWJsaWNDb250ZW50RnJhZ21lbnRXaXRoQ29udGVudFNjaGVtYSwgUHVibGljQ29udGVudEZyYWdtZW50V2l0aEZpbGVJZFNjaGVtYSwgUHVibGljQ29udGVudEZyYWdtZW50V2l0aENvbnRlbnROb2RlU2NoZW1hLCAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKV0pLFxuICBjb250ZW50RnJhZ21lbnRzOiAvKiNfX1BVUkVfXyovei51bmlvbihbLyojX19QVVJFX18qL3oudW5pb24oW1B1YmxpY0NvbnRlbnRGcmFnbWVudFdpdGhDb250ZW50U2NoZW1hLCBQdWJsaWNDb250ZW50RnJhZ21lbnRXaXRoRmlsZUlkU2NoZW1hLCBQdWJsaWNDb250ZW50RnJhZ21lbnRXaXRoQ29udGVudE5vZGVTY2hlbWFdKS5hcnJheSgpLCAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKV0pXG59KSwgLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgYmxvY2tpbmc6IHpbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKSxcbiAgc2tpcFRvb2xzVmFsaWRhdGlvbjogeltcImJvb2xlYW5cIl0oKS5vcHRpb25hbCgpXG59KS5wYXJ0aWFsKCkpO1xudmFyIFBvc3RDb252ZXJzYXRpb25zUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvblNjaGVtYSxcbiAgbWVzc2FnZTogLyojX19QVVJFX18qL1VzZXJNZXNzYWdlU2NoZW1hLm9wdGlvbmFsKCksXG4gIGNvbnRlbnRGcmFnbWVudDogLyojX19QVVJFX18qL0NvbnRlbnRGcmFnbWVudFNjaGVtYS5vcHRpb25hbCgpXG59KTtcbnZhciBHZXRDb252ZXJzYXRpb25zUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBjb252ZXJzYXRpb25zOiAvKiNfX1BVUkVfXyovQ29udmVyc2F0aW9uV2l0aG91dENvbnRlbnRTY2hlbWEuYXJyYXkoKVxufSk7XG52YXIgU2VhcmNoRGF0YVNvdXJjZVZpZXdzUmVxdWVzdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFTb3VyY2VJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAga2luZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdmF1bHRJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdmF1bHRLaW5kOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBTZWFyY2hEYXRhU291cmNlVmlld3NSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFfc291cmNlX3ZpZXdzOiAvKiNfX1BVUkVfXyovRGF0YVNvdXJjZVZpZXdTY2hlbWEuYXJyYXkoKVxufSk7XG52YXIgVmFsaWRhdGVNZW1iZXJSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZW1haWw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBHZXRBcHBzUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBhcHBzOiAvKiNfX1BVUkVfXyovQXBwVHlwZVNjaGVtYS5hcnJheSgpXG59KTtcbnZhciBQb3N0QXBwc1JlcXVlc3RTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBhcHBzOiAvKiNfX1BVUkVfXyovQXBwSW1wb3J0VHlwZVNjaGVtYS5hcnJheSgpXG59KTtcbnZhciBJbXBvcnRBcHBzUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBhcHBzOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIHNJZDogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIGVycm9yOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSkuYXJyYXkoKVxufSk7XG52YXIgRGF0YVNvdXJjZVZpZXdSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFTb3VyY2VWaWV3OiBEYXRhU291cmNlVmlld1NjaGVtYVxufSk7XG52YXIgUGF0Y2hEYXRhU291cmNlVmlld1JlcXVlc3RTY2hlbWEgPSAvKiNfX1BVUkVfXyovei51bmlvbihbLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgcGFyZW50c1RvQWRkOiB6LnVuaW9uKFt6LmFycmF5KHouc3RyaW5nKCkpLCB6LnVuZGVmaW5lZCgpXSksXG4gIHBhcmVudHNUb1JlbW92ZTogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG59KVxuLy8gRm9yIHRoZSBmaWVsZHMgdG8gYmUgbm90IG9wdGlvbmFsLCBzZWU6XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MTQ3NzAxNS9zcGVjaWZ5LWEtem9kLXNjaGVtYS13aXRoLWEtbm9uLW9wdGlvbmFsLWJ1dC1wb3NzaWJseS11bmRlZmluZWQtZmllbGRcbi50cmFuc2Zvcm0oZnVuY3Rpb24gKG8pIHtcbiAgcmV0dXJuIHtcbiAgICBwYXJlbnRzVG9BZGQ6IG8ucGFyZW50c1RvQWRkLFxuICAgIHBhcmVudHNUb1JlbW92ZTogby5wYXJlbnRzVG9SZW1vdmVcbiAgfTtcbn0pLCAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBwYXJlbnRzSW46IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKVxufSldKTtcbnZhciBEYXRhU291cmNlU2VhcmNoUXVlcnlTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBxdWVyeTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHRvcF9rOiAvKiNfX1BVUkVfXyovei5jb2VyY2UubnVtYmVyKCksXG4gIGZ1bGxfdGV4dDogLyojX19QVVJFX18qL3ouY29lcmNlW1wiYm9vbGVhblwiXSgpLFxuICB0YXJnZXRfZG9jdW1lbnRfdG9rZW5zOiAvKiNfX1BVUkVfXyovei5jb2VyY2UubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdGltZXN0YW1wX2d0OiAvKiNfX1BVUkVfXyovei5jb2VyY2UubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdGltZXN0YW1wX2x0OiAvKiNfX1BVUkVfXyovei5jb2VyY2UubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdGFnc19pbjogLyojX19QVVJFX18qL3ouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgdGFnc19ub3Q6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHBhcmVudHNfaW46IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHBhcmVudHNfbm90OiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG59KTtcbnZhciBGcm9udERhdGFTb3VyY2VEb2N1bWVudFNlY3Rpb25TY2hlbWEgPSAvKiNfX1BVUkVfXyovei5sYXp5KGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHoub2JqZWN0KHtcbiAgICBwcmVmaXg6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBjb250ZW50OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgc2VjdGlvbnM6IHouYXJyYXkoRnJvbnREYXRhU291cmNlRG9jdW1lbnRTZWN0aW9uU2NoZW1hKVxuICB9KTtcbn0pO1xudmFyIFBvc3REYXRhU291cmNlRG9jdW1lbnRSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdGltZXN0YW1wOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHRhZ3M6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgcGFyZW50X2lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgc291cmNlX3VybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICB1cHNlcnRfY29udGV4dDogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBzeW5jX3R5cGU6IHoudW5pb24oW3pbXCJlbnVtXCJdKFtcImJhdGNoXCIsIFwiaW5jcmVtZW50YWxcIl0pLCB6LnVuZGVmaW5lZCgpXSlcbiAgfSlcbiAgLy8gRm9yIHRoZSBmaWVsZHMgdG8gYmUgbm90IG9wdGlvbmFsLCBzZWU6XG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxNDc3MDE1L3NwZWNpZnktYS16b2Qtc2NoZW1hLXdpdGgtYS1ub24tb3B0aW9uYWwtYnV0LXBvc3NpYmx5LXVuZGVmaW5lZC1maWVsZFxuICAudHJhbnNmb3JtKGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN5bmNfdHlwZTogby5zeW5jX3R5cGVcbiAgICB9O1xuICB9KS5vcHRpb25hbCgpLFxuICB0ZXh0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHNlY3Rpb246IC8qI19fUFVSRV9fKi9Gcm9udERhdGFTb3VyY2VEb2N1bWVudFNlY3Rpb25TY2hlbWEubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBsaWdodF9kb2N1bWVudF9vdXRwdXQ6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLm9wdGlvbmFsKCksXG4gIGFzeW5jOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIG1pbWVfdHlwZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpXG59KTtcbnZhciBVcHNlcnRUYWJsZVJvd3NSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgcm93czogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICByb3dfaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIHZhbHVlOiAvKiNfX1BVUkVfXyovei5yZWNvcmQoLyojX19QVVJFX18qL3oudW5pb24oW3ouc3RyaW5nKCksIHoubnVtYmVyKCksIHpbXCJib29sZWFuXCJdKCksIHoub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoubGl0ZXJhbChcImRhdGV0aW1lXCIpLFxuICAgICAgZXBvY2g6IHoubnVtYmVyKClcbiAgICB9KV0pLm51bGxhYmxlKCkpXG4gIH0pKSxcbiAgdHJ1bmNhdGU6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLm9wdGlvbmFsKClcbn0pO1xudmFyIFBvc3RUYWJsZVBhcmVudHNSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgcGFyZW50X2lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKVxufSk7XG52YXIgVXBzZXJ0VGFibGVGcm9tQ3N2UmVxdWVzdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBkZXNjcmlwdGlvbjogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHRpbWVzdGFtcDogLyojX19QVVJFX18qL3oubnVtYmVyKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICB0YWdzOiAvKiNfX1BVUkVfXyovei5hcnJheSh6LnN0cmluZygpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHBhcmVudElkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgdHJ1bmNhdGU6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLFxuICBhc3luYzogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBtaW1lVHlwZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHNvdXJjZVVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICB0YWJsZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZmlsZUlkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgYWxsb3dFbXB0eVNjaGVtYTogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKVxufSk7XG52YXIgVXBzZXJ0RGF0YWJhc2VUYWJsZVJlcXVlc3RTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICB0YWJsZV9pZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdGltZXN0YW1wOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHRhZ3M6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgcGFyZW50X2lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgcmVtb3RlX2RhdGFiYXNlX3RhYmxlX2lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHJlbW90ZV9kYXRhYmFzZV9zZWNyZXRfaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgdGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBtaW1lX3R5cGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgc291cmNlX3VybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpXG59KTtcbnZhciBTdXBwb3J0ZWRVc2FnZVRhYmxlc1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbi8vIEZvbGRlcnNcbnZhciBDb3JlQVBJRm9sZGVyU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZGF0YV9zb3VyY2VfaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBmb2xkZXJfaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB0aXRsZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKSxcbiAgdGltZXN0YW1wOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKVxufSk7XG52YXIgR2V0Rm9sZGVyc1Jlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZm9sZGVyczogLyojX19QVVJFX18qL3ouYXJyYXkoQ29yZUFQSUZvbGRlclNjaGVtYSksXG4gIHRvdGFsOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKVxufSk7XG52YXIgR2V0Rm9sZGVyUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBmb2xkZXI6IENvcmVBUElGb2xkZXJTY2hlbWFcbn0pO1xudmFyIERlbGV0ZUZvbGRlclJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZm9sZGVyOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIGZvbGRlcl9pZDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbiAgfSlcbn0pO1xudmFyIFVwc2VydEZvbGRlclJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZm9sZGVyOiBDb3JlQVBJRm9sZGVyU2NoZW1hLFxuICBkYXRhX3NvdXJjZTogRGF0YVNvdXJjZVR5cGVTY2hlbWFcbn0pO1xudmFyIFByb3ZpZGVyVmlzaWJpbGl0eVNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBVcHNlcnREYXRhU291cmNlRm9sZGVyUmVxdWVzdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHRpbWVzdGFtcDogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHBhcmVudHM6IC8qI19fUFVSRV9fKi96LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgcGFyZW50X2lkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHRpdGxlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgbWltZV90eXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgc291cmNlX3VybDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBwcm92aWRlcl92aXNpYmlsaXR5OiAvKiNfX1BVUkVfXyovUHJvdmlkZXJWaXNpYmlsaXR5U2NoZW1hLm51bGxhYmxlKCkub3B0aW9uYWwoKVxufSk7XG52YXIgRGF0ZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LnN0cmluZygpLnJlZmluZShmdW5jdGlvbiAocykge1xuICByZXR1cm4gL15cXGR7NH0tKDBbMS05XXwxWzAtMl0pKC0oWzAtMl1cXGR8M1swMV0pKT8kLy50ZXN0KHMpO1xufSwgXCJZWVlZLU1NIG9yIFlZWVktTU0tRERcIik7XG52YXIgR2V0V29ya3NwYWNlVXNhZ2VSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oudW5pb24oWy8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHN0YXJ0OiBEYXRlU2NoZW1hLFxuICBlbmQ6IC8qI19fUFVSRV9fKi96LnVuZGVmaW5lZCgpLFxuICBtb2RlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwibW9udGhcIiksXG4gIHRhYmxlOiBTdXBwb3J0ZWRVc2FnZVRhYmxlc1NjaGVtYSxcbiAgZm9ybWF0OiAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wiY3N2XCIsIFwianNvblwiXSkub3B0aW9uYWwoKVtcImRlZmF1bHRcIl0oXCJjc3ZcIilcbn0pLCAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBzdGFydDogRGF0ZVNjaGVtYSxcbiAgZW5kOiBEYXRlU2NoZW1hLFxuICBtb2RlOiAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwicmFuZ2VcIiksXG4gIHRhYmxlOiBTdXBwb3J0ZWRVc2FnZVRhYmxlc1NjaGVtYSxcbiAgZm9ybWF0OiAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wiY3N2XCIsIFwianNvblwiXSkub3B0aW9uYWwoKVtcImRlZmF1bHRcIl0oXCJjc3ZcIilcbn0pXSk7XG52YXIgRmlsZVVwbG9hZFVybFJlcXVlc3RTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBjb250ZW50VHlwZTogU3VwcG9ydGVkRmlsZUNvbnRlbnRGcmFnbWVudFR5cGVTY2hlbWEsXG4gIGZpbGVOYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5tYXgoNDA5NiwgXCJGaWxlIG5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gNDA5NiBjaGFyYWN0ZXJzXCIpLFxuICBmaWxlU2l6ZTogLyojX19QVVJFX18qL3oubnVtYmVyKCksXG4gIHVzZUNhc2U6IC8qI19fUFVSRV9fKi96LnVuaW9uKFsvKiNfX1BVUkVfXyovei5saXRlcmFsKFwiY29udmVyc2F0aW9uXCIpLCAvKiNfX1BVUkVfXyovei5saXRlcmFsKFwidXBzZXJ0X3RhYmxlXCIpXSksXG4gIHVzZUNhc2VNZXRhZGF0YTogLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgICBjb252ZXJzYXRpb25JZDogei5zdHJpbmcoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciBGaWxlVHlwZVN0YXR1c1NjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBGaWxlVHlwZVVzZUNhc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgRmlsZVR5cGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAvLyBUT0RPKHNwb2x1KTogbW92ZSB0aGlzIHRvIE1vZGVsSWRTY2hlbWFcbiAgaWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBjb250ZW50VHlwZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGRvd25sb2FkVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBmaWxlTmFtZTogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGZpbGVTaXplOiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgc3RhdHVzOiBGaWxlVHlwZVN0YXR1c1NjaGVtYSxcbiAgdXBsb2FkVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwdWJsaWNVcmw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHVzZUNhc2U6IEZpbGVUeXBlVXNlQ2FzZVNjaGVtYVxufSk7XG52YXIgRmlsZVR5cGVXaXRoVXBsb2FkVXJsU2NoZW1hID0gLyojX19QVVJFX18qL0ZpbGVUeXBlU2NoZW1hLmV4dGVuZCh7XG4gIHVwbG9hZFVybDogLyojX19QVVJFX18qL3ouc3RyaW5nKClcbn0pO1xudmFyIEZpbGVVcGxvYWRSZXF1ZXN0UmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBmaWxlOiBGaWxlVHlwZVdpdGhVcGxvYWRVcmxTY2hlbWFcbn0pO1xudmFyIEZpbGVVcGxvYWRlZFJlcXVlc3RSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGZpbGU6IEZpbGVUeXBlU2NoZW1hXG59KTtcbnZhciBNZVJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgdXNlcjogLyojX19QVVJFX18qL1VzZXJTY2hlbWEuYW5kKC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgd29ya3NwYWNlczogLyojX19QVVJFX18qL1dvcmtzcGFjZVNjaGVtYS5hcnJheSgpLm9yKC8qI19fUFVSRV9fKi9FeHRlbnNpb25Xb3Jrc3BhY2VTY2hlbWEuYXJyYXkoKSlcbiAgfSkpXG59KTtcbnZhciBDYW5jZWxNZXNzYWdlR2VuZXJhdGlvblJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc3VjY2VzczogLyojX19QVVJFX18qL3oubGl0ZXJhbCh0cnVlKVxufSk7XG52YXIgQ2FuY2VsTWVzc2FnZUdlbmVyYXRpb25SZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbWVzc2FnZUlkczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpXG59KTtcbi8vIFR5cGVndWFyZHMuXG5mdW5jdGlvbiBpc0FnZW50TWVudGlvbihhcmcpIHtcbiAgcmV0dXJuIGFyZy5jb25maWd1cmF0aW9uSWQgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGFzc2VydE5ldmVyKHgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiA/IEpTT04uc3RyaW5naWZ5KHgpIDogeCkgKyBcIiBpcyBub3Qgb2YgdHlwZSBuZXZlci4gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLlwiKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZU51bGxzKGFycikge1xuICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAodikge1xuICAgIHJldHVybiB2ICE9PSBudWxsICYmIHYgIT09IHVuZGVmaW5lZDtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRQcm92aWRlckZyb21SZXRyaWV2ZWREb2N1bWVudChkb2N1bWVudCkge1xuICBpZiAoZG9jdW1lbnQuZGF0YVNvdXJjZVZpZXcpIHtcbiAgICBpZiAoZG9jdW1lbnQuZGF0YVNvdXJjZVZpZXcuZGF0YVNvdXJjZS5jb25uZWN0b3JQcm92aWRlciA9PT0gXCJ3ZWJjcmF3bGVyXCIpIHtcbiAgICAgIHJldHVybiBcImRvY3VtZW50XCI7XG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudC5kYXRhU291cmNlVmlldy5kYXRhU291cmNlLmNvbm5lY3RvclByb3ZpZGVyIHx8IFwiZG9jdW1lbnRcIjtcbiAgfVxuICByZXR1cm4gXCJkb2N1bWVudFwiO1xufVxuZnVuY3Rpb24gZ2V0VGl0bGVGcm9tUmV0cmlldmVkRG9jdW1lbnQoZG9jdW1lbnQpIHtcbiAgdmFyIHByb3ZpZGVyID0gZ2V0UHJvdmlkZXJGcm9tUmV0cmlldmVkRG9jdW1lbnQoZG9jdW1lbnQpO1xuICBpZiAocHJvdmlkZXIgPT09IFwic2xhY2tcIikge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZG9jdW1lbnQudGFncyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgdCA9IF9zdGVwLnZhbHVlO1xuICAgICAgaWYgKHQuc3RhcnRzV2l0aChcImNoYW5uZWxOYW1lOlwiKSkge1xuICAgICAgICByZXR1cm4gXCIjXCIgKyB0LnN1YnN0cmluZygxMik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRvY3VtZW50LnRhZ3MpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgIHZhciBfdCA9IF9zdGVwMi52YWx1ZTtcbiAgICBpZiAoX3Quc3RhcnRzV2l0aChcInRpdGxlOlwiKSkge1xuICAgICAgcmV0dXJuIF90LnN1YnN0cmluZyg2KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50SWQ7XG59XG52YXIgQXBwc0NoZWNrUmVxdWVzdFNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGFwcHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gICAgYXBwSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIGFwcEhhc2g6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG4gIH0pKVxufSk7XG52YXIgQXBwc0NoZWNrUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBhcHBzOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIGFwcElkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBhcHBIYXNoOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBkZXBsb3llZDogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKClcbiAgfSkpXG59KTtcbnZhciBHZXRTcGFjZXNSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHNwYWNlczogLyojX19QVVJFX18qL3ouYXJyYXkoU3BhY2VUeXBlU2NoZW1hKVxufSk7XG52YXIgT0F1dGhQcm92aWRlclNjaGVtYSA9IC8qI19fUFVSRV9fKi9GbGV4aWJsZUVudW1TY2hlbWEoKTtcbnZhciBJbnRlcm5hbEFsbG93ZWRJY29uU2NoZW1hID0gLyojX19QVVJFX18qL0ZsZXhpYmxlRW51bVNjaGVtYSgpO1xudmFyIEN1c3RvbVNlcnZlckljb25TY2hlbWEgPSAvKiNfX1BVUkVfXyovRmxleGlibGVFbnVtU2NoZW1hKCk7XG52YXIgTUNQU2VydmVyVHlwZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHNJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICB2ZXJzaW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBpY29uOiAvKiNfX1BVUkVfXyovei51bmlvbihbSW50ZXJuYWxBbGxvd2VkSWNvblNjaGVtYSwgQ3VzdG9tU2VydmVySWNvblNjaGVtYV0pLFxuICBhdXRob3JpemF0aW9uOiAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIHByb3ZpZGVyOiBPQXV0aFByb3ZpZGVyU2NoZW1hLFxuICAgIHN1cHBvcnRlZF91c2VfY2FzZXM6IHouYXJyYXkoeltcImVudW1cIl0oW1wicGVyc29uYWxfYWN0aW9uc1wiLCBcInBsYXRmb3JtX2FjdGlvbnNcIl0pKSxcbiAgICBzY29wZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIH0pLm51bGxhYmxlKCksXG4gIHRvb2xzOiAvKiNfX1BVUkVfXyovei5hcnJheSgvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICAgIG5hbWU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICAgIGRlc2NyaXB0aW9uOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgICBpbnB1dFNjaGVtYTogLyojX19QVVJFX18qL3ouYW55KCkub3B0aW9uYWwoKVxuICB9KSksXG4gIGF2YWlsYWJpbGl0eTogLyojX19QVVJFX18qL3pbXCJlbnVtXCJdKFtcIm1hbnVhbFwiLCBcImF1dG9cIiwgXCJhdXRvX2hpZGRlbl9idWlsZGVyXCJdKSxcbiAgYWxsb3dNdWx0aXBsZUluc3RhbmNlczogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCksXG4gIGRvY3VtZW50YXRpb25Vcmw6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm51bGxhYmxlKClcbn0pO1xudmFyIE1DUFNlcnZlclZpZXdUeXBlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgaWQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLFxuICBzSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBuYW1lOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBkZXNjcmlwdGlvbjogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgY3JlYXRlZEF0OiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgdXBkYXRlZEF0OiAvKiNfX1BVUkVfXyovei5udW1iZXIoKSxcbiAgc3BhY2VJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIHNlcnZlclR5cGU6IC8qI19fUFVSRV9fKi96W1wiZW51bVwiXShbXCJyZW1vdGVcIiwgXCJpbnRlcm5hbFwiXSksXG4gIHNlcnZlcjogTUNQU2VydmVyVHlwZVNjaGVtYSxcbiAgb0F1dGhVc2VDYXNlOiAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wicGVyc29uYWxfYWN0aW9uc1wiLCBcInBsYXRmb3JtX2FjdGlvbnNcIl0pLm51bGxhYmxlKCksXG4gIGVkaXRlZEJ5VXNlcjogLyojX19QVVJFX18qL0VkaXRlZEJ5VXNlclNjaGVtYS5udWxsYWJsZSgpXG59KTtcbnZhciBHZXRNQ1BTZXJ2ZXJWaWV3c1Jlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc3VjY2VzczogLyojX19QVVJFX18qL3oubGl0ZXJhbCh0cnVlKSxcbiAgc2VydmVyVmlld3M6IC8qI19fUFVSRV9fKi96LmFycmF5KE1DUFNlcnZlclZpZXdUeXBlU2NoZW1hKVxufSk7XG52YXIgR2V0TUNQU2VydmVyVmlld3NRdWVyeVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGluY2x1ZGVBdXRvOiAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1widHJ1ZVwiLCBcImZhbHNlXCJdKS50cmFuc2Zvcm0oZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IFwidHJ1ZVwiO1xuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciBCYXNlU2VhcmNoQm9keVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHZpZXdUeXBlOiBDb250ZW50Tm9kZXNWaWV3VHlwZVNjaGVtYSxcbiAgc3BhY2VJZHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKSxcbiAgaW5jbHVkZURhdGFTb3VyY2VzOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKSxcbiAgbGltaXQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpXG59KTtcbnZhciBUZXh0U2VhcmNoQm9keVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LmludGVyc2VjdGlvbihCYXNlU2VhcmNoQm9keVNjaGVtYSwgLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgcXVlcnk6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBub2RlSWRzOiAvKiNfX1BVUkVfXyovei51bmRlZmluZWQoKS5vcHRpb25hbCgpLFxuICBzZWFyY2hTb3VyY2VVcmxzOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKS5vcHRpb25hbCgpXG59KSk7XG52YXIgTm9kZUlkU2VhcmNoQm9keVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LmludGVyc2VjdGlvbihCYXNlU2VhcmNoQm9keVNjaGVtYSwgLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgbm9kZUlkczogLyojX19QVVJFX18qL3ouYXJyYXkoLyojX19QVVJFX18qL3ouc3RyaW5nKCkpLFxuICBxdWVyeTogLyojX19QVVJFX18qL3oudW5kZWZpbmVkKCkub3B0aW9uYWwoKVxufSkpO1xudmFyIFNlYXJjaFJlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oudW5pb24oW1RleHRTZWFyY2hCb2R5U2NoZW1hLCBOb2RlSWRTZWFyY2hCb2R5U2NoZW1hXSk7XG52YXIgQ29udGVudE5vZGVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBleHBhbmRhYmxlOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKSxcbiAgaW50ZXJuYWxJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCksXG4gIGxhc3RVcGRhdGVkQXQ6IC8qI19fUFVSRV9fKi96Lm51bWJlcigpLm51bGxhYmxlKCksXG4gIG1pbWVUeXBlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgLy8gVGhlIGRpcmVjdCBwYXJlbnQgSUQgb2YgdGhpcyBjb250ZW50IG5vZGVcbiAgcGFyZW50SW50ZXJuYWxJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgLy8gcGVybWlzc2lvbjogQ29ubmVjdG9yUGVybWlzc2lvblNjaGVtYSxcbiAgcHJldmVudFNlbGVjdGlvbjogLyojX19QVVJFX18qL3pbXCJib29sZWFuXCJdKCkub3B0aW9uYWwoKSxcbiAgcHJvdmlkZXJWaXNpYmlsaXR5OiAvKiNfX1BVUkVfXyovUHJvdmlkZXJWaXNpYmlsaXR5U2NoZW1hLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgc291cmNlVXJsOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHRpdGxlOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgdHlwZTogQ29udGVudE5vZGVUeXBlU2NoZW1hXG59KTtcbnZhciBDb250ZW50Tm9kZVdpdGhQYXJlbnRTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5pbnRlcnNlY3Rpb24oQ29udGVudE5vZGVTY2hlbWEsIC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHBhcmVudHNJbnRlcm5hbElkczogLyojX19QVVJFX18qL3ouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgcGFyZW50VGl0bGU6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKVxufSkpO1xudmFyIERhdGFTb3VyY2VDb250ZW50Tm9kZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LmludGVyc2VjdGlvbihDb250ZW50Tm9kZVdpdGhQYXJlbnRTY2hlbWEsIC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VUeXBlU2NoZW1hLFxuICBkYXRhU291cmNlVmlld3M6IC8qI19fUFVSRV9fKi9EYXRhU291cmNlVmlld1NjaGVtYS5hcnJheSgpXG59KSk7XG52YXIgRGF0YVNvdXJjZVZpZXdDb250ZW50Tm9kZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96LmludGVyc2VjdGlvbihDb250ZW50Tm9kZVdpdGhQYXJlbnRTY2hlbWEsIC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIGRhdGFTb3VyY2VWaWV3OiBEYXRhU291cmNlVmlld1NjaGVtYVxufSkpO1xudmFyIFNlYXJjaFdhcm5pbmdDb2RlU2NoZW1hID0gLyojX19QVVJFX18qL3oubGl0ZXJhbChcInRydW5jYXRlZC1xdWVyeS1jbGF1c2VzXCIpO1xudmFyIFBvc3RXb3Jrc3BhY2VTZWFyY2hSZXNwb25zZUJvZHlTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBub2RlczogLyojX19QVVJFX18qL0RhdGFTb3VyY2VDb250ZW50Tm9kZVNjaGVtYS5hcnJheSgpLFxuICB3YXJuaW5nQ29kZTogLyojX19QVVJFX18qL1NlYXJjaFdhcm5pbmdDb2RlU2NoZW1hLm9wdGlvbmFsKCkubnVsbGFibGUoKVxufSk7XG52YXIgVE9PTF9SVU5OSU5HX0xBQkVMID0gXCJVc2luZyBhIHRvb2xcIjtcbi8vIE1DUCBSZWxhdGVkLlxudmFyIFZhbGlkYXRlQWN0aW9uUmVzcG9uc2VTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5vYmplY3Qoe1xuICBzdWNjZXNzOiAvKiNfX1BVUkVfXyoveltcImJvb2xlYW5cIl0oKVxufSk7XG52YXIgQWN0aW9uQXBwcm92YWxTdGF0ZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96W1wiZW51bVwiXShbXCJhcHByb3ZlZFwiLCBcInJlamVjdGVkXCIsIFwiYWx3YXlzX2FwcHJvdmVkXCJdKTtcbnZhciBWYWxpZGF0ZUFjdGlvblJlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgYWN0aW9uSWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBhcHByb3ZlZDogQWN0aW9uQXBwcm92YWxTdGF0ZVNjaGVtYVxufSk7XG52YXIgQ2xpZW50U2lkZU1DUFNlcnZlck5hbWVTY2hlbWEgPSAvKiNfX1BVUkVfXyovei5zdHJpbmcoKS5taW4oNSkubWF4KDMwKTtcbnZhciBQdWJsaWNSZWdpc3Rlck1DUFJlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc2VydmVyTmFtZTogQ2xpZW50U2lkZU1DUFNlcnZlck5hbWVTY2hlbWFcbn0pO1xudmFyIFB1YmxpY0hlYXJ0YmVhdE1DUFJlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc2VydmVySWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBSZWdpc3Rlck1DUFJlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgZXhwaXJlc0F0OiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKSxcbiAgc2VydmVySWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBIZWFydGJlYXRNQ1BSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHN1Y2Nlc3M6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpLFxuICBleHBpcmVzQXQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpXG59KTtcbnZhciBQdWJsaWNQb3N0TUNQUmVzdWx0c1JlcXVlc3RCb2R5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgcmVzdWx0OiAvKiNfX1BVUkVfXyovei51bmtub3duKCksXG4gIHNlcnZlcklkOiAvKiNfX1BVUkVfXyovei5zdHJpbmcoKVxufSk7XG52YXIgUG9zdE1DUFJlcXVlc3RzUmVxdWVzdFF1ZXJ5U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc2VydmVySWQ6IC8qI19fUFVSRV9fKi96LnN0cmluZygpLFxuICBsYXN0RXZlbnRJZDogLyojX19QVVJFX18qL3ouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgUG9zdE1DUFJlc3VsdHNSZXNwb25zZVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHN1Y2Nlc3M6IC8qI19fUFVSRV9fKi96W1wiYm9vbGVhblwiXSgpXG59KTtcbnZhciBCbG9ja2VkQWN0aW9uc1Jlc3BvbnNlU2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgYmxvY2tlZEFjdGlvbnM6IC8qI19fUFVSRV9fKi96LmFycmF5KEJsb2NrZWRBY3Rpb25FeGVjdXRpb25TY2hlbWEpXG59KTtcbnZhciBNQ1BWaWV3c1JlcXVlc3RBdmFpbGFiaWxpdHlTY2hlbWEgPSAvKiNfX1BVUkVfXyoveltcImVudW1cIl0oW1wibWFudWFsXCIsIFwiYXV0b1wiXSk7XG52YXIgR2V0TUNQVmlld3NSZXF1ZXN0U2NoZW1hID0gLyojX19QVVJFX18qL3oub2JqZWN0KHtcbiAgc3BhY2VJZHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKSxcbiAgYXZhaWxhYmlsaXRpZXM6IC8qI19fUFVSRV9fKi96LmFycmF5KE1DUFZpZXdzUmVxdWVzdEF2YWlsYWJpbGl0eVNjaGVtYSlcbn0pO1xudmFyIFBvc3RTcGFjZU1lbWJlcnNSZXF1ZXN0Qm9keVNjaGVtYSA9IC8qI19fUFVSRV9fKi96Lm9iamVjdCh7XG4gIHVzZXJJZHM6IC8qI19fUFVSRV9fKi96LmFycmF5KC8qI19fUFVSRV9fKi96LnN0cmluZygpKVxufSk7XG5cbnZhciBsb2dnZXIgPSBjb25zb2xlO1xudmFyIEhFQVJUQkVBVF9JTlRFUlZBTF9NUyA9IDE1ICogNjAgKiAxMDAwOyAvLyAxNSBtaW51dGVzLlxudmFyIFJFQ09OTkVDVF9ERUxBWV9NUyA9IDUgKiAxMDAwOyAvLyA1IHNlY29uZHMuXG4vKipcbiAqIEN1c3RvbSB0cmFuc3BvcnQgaW1wbGVtZW50YXRpb24gZm9yIE1DUFxuICogLSBVc2VzIEV2ZW50U291cmNlIChTU0UpIHRvIHJlY2VpdmUgcmVxdWVzdHMgZnJvbSBEdXN0XG4gKiAtIFVzZXMgZmV0Y2ggKEhUVFAgUE9TVCkgdG8gc2VuZCByZXN1bHRzIGJhY2sgdG8gRHVzdFxuICogLSBTdXBwb3J0cyB3b3Jrc3BhY2Utc2NvcGVkIE1DUCByZWdpc3RyYXRpb24gb25seVxuICovXG52YXIgRHVzdE1jcFNlcnZlclRyYW5zcG9ydCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIER1c3RNY3BTZXJ2ZXJUcmFuc3BvcnQoZHVzdEFQSSwgb25TZXJ2ZXJJZFJlY2VpdmVkLCBzZXJ2ZXJOYW1lLCB2ZXJib3NlLCBldmVudFNvdXJjZUhlYXJ0YmVhdCkge1xuICAgIGlmIChzZXJ2ZXJOYW1lID09PSB2b2lkIDApIHtcbiAgICAgIHNlcnZlck5hbWUgPSBcIkR1c3QgRXh0ZW5zaW9uXCI7XG4gICAgfVxuICAgIGlmICh2ZXJib3NlID09PSB2b2lkIDApIHtcbiAgICAgIHZlcmJvc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50U291cmNlSGVhcnRiZWF0ID09PSB2b2lkIDApIHtcbiAgICAgIGV2ZW50U291cmNlSGVhcnRiZWF0ID0gNDUwMDA7XG4gICAgfVxuICAgIHRoaXMuZHVzdEFQSSA9IHZvaWQgMDtcbiAgICB0aGlzLm9uU2VydmVySWRSZWNlaXZlZCA9IHZvaWQgMDtcbiAgICB0aGlzLnNlcnZlck5hbWUgPSB2b2lkIDA7XG4gICAgdGhpcy52ZXJib3NlID0gdm9pZCAwO1xuICAgIHRoaXMuZXZlbnRTb3VyY2VIZWFydGJlYXQgPSB2b2lkIDA7XG4gICAgdGhpcy5ldmVudFNvdXJjZSA9IG51bGw7XG4gICAgdGhpcy5sYXN0RXZlbnRJZCA9IG51bGw7XG4gICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IG51bGw7XG4gICAgdGhpcy5zZXJ2ZXJJZCA9IG51bGw7XG4gICAgLy8gUmVxdWlyZWQgYnkgVHJhbnNwb3J0IGludGVyZmFjZS5cbiAgICB0aGlzLm9ubWVzc2FnZSA9IHZvaWQgMDtcbiAgICB0aGlzLm9uY2xvc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5vbmVycm9yID0gdm9pZCAwO1xuICAgIHRoaXMuc2Vzc2lvbklkID0gdm9pZCAwO1xuICAgIHRoaXMuZHVzdEFQSSA9IGR1c3RBUEk7XG4gICAgdGhpcy5vblNlcnZlcklkUmVjZWl2ZWQgPSBvblNlcnZlcklkUmVjZWl2ZWQ7XG4gICAgdGhpcy5zZXJ2ZXJOYW1lID0gc2VydmVyTmFtZTtcbiAgICB0aGlzLnZlcmJvc2UgPSB2ZXJib3NlO1xuICAgIHRoaXMuZXZlbnRTb3VyY2VIZWFydGJlYXQgPSBldmVudFNvdXJjZUhlYXJ0YmVhdDtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIE1DUCBzZXJ2ZXIgd2l0aCB0aGUgRHVzdCBiYWNrZW5kXG4gICAqL1xuICB2YXIgX3Byb3RvID0gRHVzdE1jcFNlcnZlclRyYW5zcG9ydC5wcm90b3R5cGU7XG4gIF9wcm90by5yZWdpc3RlclNlcnZlciA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVnaXN0ZXJTZXJ2ZXIgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICB2YXIgcmVnaXN0ZXJSZXMsIHNlcnZlcklkO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kdXN0QVBJLnJlZ2lzdGVyTUNQU2VydmVyKHtcbiAgICAgICAgICAgICAgc2VydmVyTmFtZTogdGhpcy5zZXJ2ZXJOYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZWdpc3RlclJlcyA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXJlZ2lzdGVyUmVzLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBNQ1Agc2VydmVyOiBcIiArIHJlZ2lzdGVyUmVzLmVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgZmFsc2UpO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHNlcnZlcklkID0gcmVnaXN0ZXJSZXMudmFsdWUuc2VydmVySWQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZlcklkID0gc2VydmVySWQ7XG4gICAgICAgICAgICAvLyBOb3RpZnkgdGhlIHBhcmVudCB0aGF0IHRoZSBzZXJ2ZXJJZCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgICAgICAgICAgdGhpcy5vblNlcnZlcklkUmVjZWl2ZWQoc2VydmVySWQpO1xuICAgICAgICAgICAgLy8gU2V0dXAgaGVhcnRiZWF0IHRvIGtlZXAgdGhlIHNlcnZlciByZWdpc3RyYXRpb24gYWxpdmUuXG4gICAgICAgICAgICB0aGlzLnNldHVwSGVhcnRiZWF0KHNlcnZlcklkKTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2ZXIoKSB7XG4gICAgICByZXR1cm4gX3JlZ2lzdGVyU2VydmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiByZWdpc3RlclNlcnZlcjtcbiAgfSgpXG4gIC8qKlxuICAgKiBTZW5kIHBlcmlvZGljIGhlYXJ0YmVhdHMgdG8ga2VlcCB0aGUgc2VydmVyIHJlZ2lzdHJhdGlvbiBhbGl2ZS5cbiAgICovXG4gIDtcbiAgX3Byb3RvLnNldHVwSGVhcnRiZWF0ID0gZnVuY3Rpb24gc2V0dXBIZWFydGJlYXQoc2VydmVySWQpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBoZWFydGJlYXQgdGltZXIuXG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0VGltZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lcik7XG4gICAgfVxuICAgIC8vIFNldCB1cCBhIG5ldyBoZWFydGJlYXQgdGltZXIgKGV2ZXJ5IEhFQVJUQkVBVF9JTlRFUlZBTF9NUykuXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IHNldEludGVydmFsKC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7XG4gICAgICB2YXIgaGVhcnRiZWF0UmVzLCBlcnJvcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZHVzdEFQSS5oZWFydGJlYXRNQ1BTZXJ2ZXIoe1xuICAgICAgICAgICAgICBzZXJ2ZXJJZDogc2VydmVySWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGhlYXJ0YmVhdFJlcyA9IF9jb250ZXh0Mi5zZW50O1xuICAgICAgICAgICAgaWYgKCEoaGVhcnRiZWF0UmVzLmlzRXJyKCkgfHwgaGVhcnRiZWF0UmVzLnZhbHVlLnN1Y2Nlc3MgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyb3IgPSBoZWFydGJlYXRSZXMuaXNFcnIoKSA/IGhlYXJ0YmVhdFJlcy5lcnJvciA6IG5ldyBFcnJvcihcIlNlcnZlciBub3QgcmVnaXN0ZXJlZFwiKTtcbiAgICAgICAgICAgIF90aGlzLmxvZ0Vycm9yKFwiRmFpbGVkIHRvIGhlYXJ0YmVhdCBNQ1Agc2VydmVyOiBcIiArIGVycm9yKTtcbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RlclNlcnZlcigpO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIpO1xuICAgIH0pKSwgSEVBUlRCRUFUX0lOVEVSVkFMX01TKTtcbiAgfVxuICAvKipcbiAgICogU3RhcnQgdGhlIHRyYW5zcG9ydCBhbmQgY29ubmVjdCB0byB0aGUgU1NFIGVuZHBvaW50XG4gICAqIFRoaXMgbWV0aG9kIGlzIHJlcXVpcmVkIGJ5IHRoZSBUcmFuc3BvcnQgaW50ZXJmYWNlXG4gICAqLztcbiAgX3Byb3RvLnN0YXJ0ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zdGFydCA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG4gICAgICB2YXIgcmVnaXN0ZXJlZCwgX3RoaXMkb25lcnJvcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7XG4gICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclNlcnZlcigpO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJlZ2lzdGVyZWQgPSBfY29udGV4dDMuc2VudDtcbiAgICAgICAgICAgIGlmIChyZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgTUNQIHNlcnZlclwiKTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0VG9SZXF1ZXN0c1N0cmVhbSgpO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHRoaXMubG9nSW5mbyhcIk1DUCB0cmFuc3BvcnQgc3RhcnRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTE7XG4gICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbXCJjYXRjaFwiXSgwKTtcbiAgICAgICAgICAgIHRoaXMubG9nRXJyb3IoXCJGYWlsZWQgdG8gc3RhcnQgTUNQIHRyYW5zcG9ydDpcIiwgX2NvbnRleHQzLnQwKTtcbiAgICAgICAgICAgIChfdGhpcyRvbmVycm9yID0gdGhpcy5vbmVycm9yKSA9PSBudWxsIHx8IF90aGlzJG9uZXJyb3IuY2FsbCh0aGlzLCBfY29udGV4dDMudDAgaW5zdGFuY2VvZiBFcnJvciA/IF9jb250ZXh0My50MCA6IG5ldyBFcnJvcihTdHJpbmcoX2NvbnRleHQzLnQwKSkpO1xuICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQzLnQwO1xuICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzAsIDExXV0pO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHJldHVybiBfc3RhcnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0O1xuICB9KClcbiAgLyoqXG4gICAqIENvbm5lY3QgdG8gdGhlIFNTRSBzdHJlYW0gZm9yIHRoZSB3b3Jrc3BhY2VcbiAgICovXG4gIDtcbiAgX3Byb3RvLmNvbm5lY3RUb1JlcXVlc3RzU3RyZWFtID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9jb25uZWN0VG9SZXF1ZXN0c1N0cmVhbSA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIHZhciBjb25uZWN0aW9uUmVzdWx0LCBfY29ubmVjdGlvblJlc3VsdCR2YWwsIHVybCwgaGVhZGVycztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAodGhpcy5zZXJ2ZXJJZCkge1xuICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dFcnJvcihcIlNlcnZlciBJRCBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIik7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgLy8gQ2xvc2UgYW55IGV4aXN0aW5nIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBpZiAodGhpcy5ldmVudFNvdXJjZSkge1xuICAgICAgICAgICAgICB0aGlzLmV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICAgICAgICAgIHRoaXMuZXZlbnRTb3VyY2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHVzdEFQSS5nZXRNQ1BSZXF1ZXN0c0Nvbm5lY3Rpb25EZXRhaWxzKHtcbiAgICAgICAgICAgICAgc2VydmVySWQ6IHRoaXMuc2VydmVySWQsXG4gICAgICAgICAgICAgIGxhc3RFdmVudElkOiB0aGlzLmxhc3RFdmVudElkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBjb25uZWN0aW9uUmVzdWx0ID0gX2NvbnRleHQ0LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb25SZXN1bHQuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCBjb25uZWN0aW9uIGRldGFpbHM6IFwiICsgY29ubmVjdGlvblJlc3VsdC5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICBfY29ubmVjdGlvblJlc3VsdCR2YWwgPSBjb25uZWN0aW9uUmVzdWx0LnZhbHVlLCB1cmwgPSBfY29ubmVjdGlvblJlc3VsdCR2YWwudXJsLCBoZWFkZXJzID0gX2Nvbm5lY3Rpb25SZXN1bHQkdmFsLmhlYWRlcnM7XG4gICAgICAgICAgICB0aGlzLmV2ZW50U291cmNlID0gbmV3IEV2ZW50U291cmNlUG9seWZpbGwodXJsLCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgIGhlYXJ0YmVhdFRpbWVvdXQ6IHRoaXMuZXZlbnRTb3VyY2VIZWFydGJlYXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ldmVudFNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB0aGlzIGV2ZW50LlxuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXZlbnREYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBldmVudElkIGZvciByZWNvbm5lY3Rpb24gcHVycG9zZXMuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5ldmVudElkKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpczIubGFzdEV2ZW50SWQgPSBldmVudERhdGEuZXZlbnRJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGhlIGFjdHVhbCByZXF1ZXN0IGlzIGluIHRoZSBkYXRhIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnREYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpczIubG9nRXJyb3IoXCJObyBkYXRhIGZpZWxkIGZvdW5kIGluIHRoZSBldmVudFwiKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRm9yd2FyZCB0aGUgbWVzc2FnZSB0byB0aGUgaGFuZGxlci5cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLm9ubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgX3RoaXMyLm9ubWVzc2FnZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvZ0Vycm9yKFwiRVJST1I6IG9ubWVzc2FnZSBoYW5kbGVyIG5vdCBzZXQgLSBNQ1AgcmVzcG9uc2Ugd29uJ3QgYmUgc2VudFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmxvZ0Vycm9yKFwiRmFpbGVkIHRvIHBhcnNlIE1DUCByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgX3RoaXMyLm9uZXJyb3IgPT0gbnVsbCB8fCBfdGhpczIub25lcnJvcihuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgTUNQIHJlcXVlc3Q6IFwiICsgZXJyb3IpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRTb3VyY2Uub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICBfdGhpczIubG9nRXJyb3IoXCJFcnJvciBpbiBNQ1AgRXZlbnRTb3VyY2UgY29ubmVjdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICBfdGhpczIub25lcnJvciA9PSBudWxsIHx8IF90aGlzMi5vbmVycm9yKG5ldyBFcnJvcihcIlNTRSBjb25uZWN0aW9uIGVycm9yOiBcIiArIGVycm9yKSk7XG4gICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gcmVjb25uZWN0IGFmdGVyIGEgZGVsYXkuXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczIuZXZlbnRTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzMi5sb2dJbmZvKFwiQXR0ZW1wdGluZyB0byByZWNvbm5lY3QgdG8gU1NFLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgdm9pZCBfdGhpczIuY29ubmVjdFRvUmVxdWVzdHNTdHJlYW0oKVtcImNhdGNoXCJdKGZ1bmN0aW9uIChyZWNvbm5lY3RFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIubG9nRXJyb3IoXCJGYWlsZWQgdG8gcmVjb25uZWN0OlwiLCByZWNvbm5lY3RFcnJvcik7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIFJFQ09OTkVDVF9ERUxBWV9NUyk7IC8vIFdhaXQgYmVmb3JlIHJlY29ubmVjdGluZy5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmV2ZW50U291cmNlLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLmxvZ0luZm8oXCJNQ1AgU1NFIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWRcIik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5ldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczIubG9nSW5mbyhcIk1DUCBTU0UgY29ubmVjdGlvbiBjbG9zZWRcIik7XG4gICAgICAgICAgICAgIF90aGlzMi5vbmNsb3NlID09IG51bGwgfHwgX3RoaXMyLm9uY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gY29ubmVjdFRvUmVxdWVzdHNTdHJlYW0oKSB7XG4gICAgICByZXR1cm4gX2Nvbm5lY3RUb1JlcXVlc3RzU3RyZWFtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBjb25uZWN0VG9SZXF1ZXN0c1N0cmVhbTtcbiAgfSgpXG4gIC8qKlxuICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2VydmVyXG4gICAqIFRoaXMgbWV0aG9kIGlzIHJlcXVpcmVkIGJ5IHRoZSBUcmFuc3BvcnQgaW50ZXJmYWNlXG4gICAqL1xuICA7XG4gIF9wcm90by5zZW5kID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZW5kID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNShtZXNzYWdlKSB7XG4gICAgICB2YXIgcG9zdFJlc3VsdHNSZXMsIF90aGlzJG9uZXJyb3IyO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlcklkKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxvZ0Vycm9yKFwiU2VydmVyIElEIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdChcInJldHVyblwiKTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kdXN0QVBJLnBvc3RNQ1BSZXN1bHRzKHtcbiAgICAgICAgICAgICAgc2VydmVySWQ6IHRoaXMuc2VydmVySWQsXG4gICAgICAgICAgICAgIHJlc3VsdDogbWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcG9zdFJlc3VsdHNSZXMgPSBfY29udGV4dDUuc2VudDtcbiAgICAgICAgICAgIGlmIChwb3N0UmVzdWx0c1Jlcy5pc0VycigpKSB7XG4gICAgICAgICAgICAgIHRoaXMubG9nRXJyb3IoXCJGYWlsZWQgdG8gc2VuZCBNQ1AgcmVzdWx0OlwiLCBwb3N0UmVzdWx0c1Jlcy5lcnJvcik7XG4gICAgICAgICAgICAgIChfdGhpcyRvbmVycm9yMiA9IHRoaXMub25lcnJvcikgPT0gbnVsbCB8fCBfdGhpcyRvbmVycm9yMi5jYWxsKHRoaXMsIG5ldyBFcnJvcihcIkZhaWxlZCB0byBzZW5kIE1DUCByZXN1bHQ6IFwiICsgcG9zdFJlc3VsdHNSZXMuZXJyb3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gc2VuZChfeCkge1xuICAgICAgcmV0dXJuIF9zZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBzZW5kO1xuICB9KClcbiAgLyoqXG4gICAqIENsb3NlIHRoZSB0cmFuc3BvcnQgYW5kIGRpc2Nvbm5lY3QgZnJvbSB0aGUgU1NFIGVuZHBvaW50XG4gICAqIFRoaXMgbWV0aG9kIGlzIHJlcXVpcmVkIGJ5IHRoZSBUcmFuc3BvcnQgaW50ZXJmYWNlXG4gICAqL1xuICA7XG4gIF9wcm90by5jbG9zZSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfY2xvc2UgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkge1xuICAgICAgdmFyIF90aGlzJG9uY2xvc2U7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0Nikge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgLy8gQ2xlYXIgaGVhcnRiZWF0IHRpbWVyLlxuICAgICAgICAgICAgaWYgKHRoaXMuaGVhcnRiZWF0VGltZXIpIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdFRpbWVyKTtcbiAgICAgICAgICAgICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDbG9zZSBTU0UgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50U291cmNlKSB7XG4gICAgICAgICAgICAgIHRoaXMubG9nSW5mbyhcIkNsb3NpbmcgTUNQIFNTRSBjb25uZWN0aW9uXCIpO1xuICAgICAgICAgICAgICB0aGlzLmV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICAgICAgICAgIHRoaXMuZXZlbnRTb3VyY2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJpZ2dlciBvbmNsb3NlIGNhbGxiYWNrLlxuICAgICAgICAgICAgKF90aGlzJG9uY2xvc2UgPSB0aGlzLm9uY2xvc2UpID09IG51bGwgfHwgX3RoaXMkb25jbG9zZS5jYWxsKHRoaXMpO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTYsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgIHJldHVybiBfY2xvc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb3NlO1xuICB9KCk7XG4gIF9wcm90by5sb2dFcnJvciA9IGZ1bmN0aW9uIGxvZ0Vycm9yKCkge1xuICAgIGlmICh0aGlzLnZlcmJvc2UpIHtcbiAgICAgIGxvZ2dlci5lcnJvci5hcHBseShsb2dnZXIsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuICBfcHJvdG8ubG9nSW5mbyA9IGZ1bmN0aW9uIGxvZ0luZm8oKSB7XG4gICAgaWYgKHRoaXMudmVyYm9zZSkge1xuICAgICAgbG9nZ2VyLmxvZy5hcHBseShsb2dnZXIsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgc2VydmVyIElEXG4gICAqLztcbiAgX3Byb3RvLmdldFNlcnZlcklkID0gZnVuY3Rpb24gZ2V0U2VydmVySWQoKSB7XG4gICAgdmFyIF90aGlzJHNlcnZlcklkO1xuICAgIHJldHVybiAoX3RoaXMkc2VydmVySWQgPSB0aGlzLnNlcnZlcklkKSAhPSBudWxsID8gX3RoaXMkc2VydmVySWQgOiB1bmRlZmluZWQ7XG4gIH07XG4gIHJldHVybiBEdXN0TWNwU2VydmVyVHJhbnNwb3J0O1xufSgpO1xuXG4vLyBDb3BpZWQgZnJvbSBmcm9udC9ob29rcy91c2VFdmVudFNvdXJjZS50c1xudmFyIERFRkFVTFRfTUFYX1JFQ09OTkVDVF9BVFRFTVBUUyA9IDEwO1xudmFyIERFRkFVTFRfUkVDT05ORUNUX0RFTEFZID0gNTAwMDtcbnZhciB0ZXh0RnJvbVJlc3BvbnNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIF9yZWYzID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3BvbnNlKSB7XG4gICAgdmFyIHJlYWRlciwgZGVjb2RlciwgcmVzdWx0LCBkb25lLCBfeWllbGQkcmVhZGVyJHJlYWQsIHZhbHVlLCBkb25lUmVhZGluZztcbiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBpZiAoISh0eXBlb2YgcmVzcG9uc2UuYm9keSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAvLyBDb252ZXJ0IFJlYWRhYmxlU3RyZWFtIHRvIHN0cmluZ1xuICAgICAgICAgIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICAgIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgX2NvbnRleHQucHJldiA9IDU7XG4gICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7XG4gICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgX3lpZWxkJHJlYWRlciRyZWFkID0gX2NvbnRleHQuc2VudDtcbiAgICAgICAgICB2YWx1ZSA9IF95aWVsZCRyZWFkZXIkcmVhZC52YWx1ZTtcbiAgICAgICAgICBkb25lUmVhZGluZyA9IF95aWVsZCRyZWFkZXIkcmVhZC5kb25lO1xuICAgICAgICAgIGRvbmUgPSBkb25lUmVhZGluZztcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwge1xuICAgICAgICAgICAgICBzdHJlYW06IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICByZXN1bHQgKz0gZGVjb2Rlci5kZWNvZGUoKTtcbiAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7XG4gICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxOCk7XG4gICAgICAgIGNhc2UgMjE6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCByZXN1bHQpO1xuICAgICAgICBjYXNlIDIyOlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzUsLCAxOCwgMjFdXSk7XG4gIH0pKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHRGcm9tUmVzcG9uc2UoX3gpIHtcbiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0oKTtcbnZhciBEdXN0QVBJID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSBjcmVkZW50aWFscyBEdXN0QVBJQ3JlZGVkZW50aWFsc1xuICAgKi9cbiAgZnVuY3Rpb24gRHVzdEFQSShjb25maWcsIGNyZWRlbnRpYWxzLCBsb2dnZXIsIHVybE92ZXJyaWRlKSB7XG4gICAgdGhpcy5fdXJsID0gdm9pZCAwO1xuICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gdm9pZCAwO1xuICAgIHRoaXMuX2xvZ2dlciA9IHZvaWQgMDtcbiAgICB0aGlzLl91cmxPdmVycmlkZSA9IHZvaWQgMDtcbiAgICB0aGlzLl91cmwgPSBjb25maWcudXJsO1xuICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XG4gICAgdGhpcy5fbG9nZ2VyID0gbG9nZ2VyO1xuICAgIHRoaXMuX3VybE92ZXJyaWRlID0gdXJsT3ZlcnJpZGU7XG4gIH1cbiAgdmFyIF9wcm90byA9IER1c3RBUEkucHJvdG90eXBlO1xuICBfcHJvdG8ud29ya3NwYWNlSWQgPSBmdW5jdGlvbiB3b3Jrc3BhY2VJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbHMud29ya3NwYWNlSWQ7XG4gIH07XG4gIF9wcm90by5zZXRXb3Jrc3BhY2VJZCA9IGZ1bmN0aW9uIHNldFdvcmtzcGFjZUlkKHdvcmtzcGFjZUlkKSB7XG4gICAgdGhpcy5fY3JlZGVudGlhbHMud29ya3NwYWNlSWQgPSB3b3Jrc3BhY2VJZDtcbiAgfTtcbiAgX3Byb3RvLmFwaVVybCA9IGZ1bmN0aW9uIGFwaVVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXJsT3ZlcnJpZGUgPyB0aGlzLl91cmxPdmVycmlkZSA6IHRoaXMuX3VybDtcbiAgfTtcbiAgX3Byb3RvLmdldEFwaUtleSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9nZXRBcGlLZXkgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkge1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGlmICghKHR5cGVvZiB0aGlzLl9jcmVkZW50aWFscy5hcGlLZXkgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIHRoaXMuX2NyZWRlbnRpYWxzLmFwaUtleSgpKTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdChcInJldHVyblwiLCB0aGlzLl9jcmVkZW50aWFscy5hcGlLZXkpO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBnZXRBcGlLZXkoKSB7XG4gICAgICByZXR1cm4gX2dldEFwaUtleS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0QXBpS2V5O1xuICB9KCk7XG4gIF9wcm90by5iYXNlSGVhZGVycyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9iYXNlSGVhZGVycyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG4gICAgICB2YXIgaGVhZGVycztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBcGlLZXkoKTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDMuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0My50MSA9IFwiQmVhcmVyIFwiICsgX2NvbnRleHQzLnQwO1xuICAgICAgICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogX2NvbnRleHQzLnQxXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NyZWRlbnRpYWxzLmV4dHJhSGVhZGVycykge1xuICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGhlYWRlcnMsIHRoaXMuX2NyZWRlbnRpYWxzLmV4dHJhSGVhZGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdChcInJldHVyblwiLCBoZWFkZXJzKTtcbiAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gYmFzZUhlYWRlcnMoKSB7XG4gICAgICByZXR1cm4gX2Jhc2VIZWFkZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBiYXNlSGVhZGVycztcbiAgfSgpXG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgR0VUIHJlcXVlc3QgdG8gdGhlIGAvYXBpL3YxL21lYCBlbmRwb2ludCB3aXRoIHRoZSBuZWNlc3NhcnkgYXV0aG9yaXphdGlvblxuICAgKiBoZWFkZXJzLiBJdCB0aGVuIHByb2Nlc3NlcyB0aGUgcmVzcG9uc2UgdG8gZXh0cmFjdCB0aGUgdXNlciBpbmZvcm1hdGlvbi4gIE5vdGUgdGhhdCB0aGlzIHdpbGxcbiAgICogb25seSB3b3JrIGlmIHlvdSBhcmUgdXNpbmcgYW4gT0F1dGgyIHRva2VuLiBJdCB3aWxsIGFsd2F5cyBmYWlsIHdpdGggYSB3b3Jrc3BhY2UgQVBJIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8UmVzdWx0PFVzZXIsIEVycm9yPj59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgUmVzdWx0IG9iamVjdCBjb250YWluaW5nXG4gICAqIGVpdGhlciB0aGUgdXNlciBpbmZvcm1hdGlvbiBvciBhbiBlcnJvci5cbiAgICovXG4gIDtcbiAgX3Byb3RvLm1lID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9tZSA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG4gICAgICB2YXIgaGVhZGVycywgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFwaUtleSgpO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQ0LnQxID0gXCJCZWFyZXIgXCIgKyBfY29udGV4dDQudDA7XG4gICAgICAgICAgICBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogX2NvbnRleHQ0LnQxXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoV2l0aEVycm9yKHRoaXMuYXBpVXJsKCkgKyBcIi9hcGkvdjEvbWVcIiwge1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoTWVSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgciA9IF9jb250ZXh0NC5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUudXNlcikpO1xuICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gbWUoKSB7XG4gICAgICByZXR1cm4gX21lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBtZTtcbiAgfSgpO1xuICBfcHJvdG8ucmVxdWVzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZXF1ZXN0ID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNShhcmdzKSB7XG4gICAgICB2YXIgX2FyZ3Mkb3ZlcnJpZGVXb3Jrc3BhO1xuICAgICAgdmFyIHVybCwgaGVhZGVycywgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIC8vIENvbnZlbmllbnRseSBjbGVhbiBwYXRoIGZyb20gYW55IGxlYWRpbmcgXCIvXCIganVzdCBpbiBjYXNlXG4gICAgICAgICAgICBhcmdzLnBhdGggPSBhcmdzLnBhdGgucmVwbGFjZSgvXlxcLysvLCBcIlwiKTtcbiAgICAgICAgICAgIHVybCA9IHRoaXMuYXBpVXJsKCkgKyBcIi9hcGkvdjEvdy9cIiArICgoX2FyZ3Mkb3ZlcnJpZGVXb3Jrc3BhID0gYXJncy5vdmVycmlkZVdvcmtzcGFjZUlkKSAhPSBudWxsID8gX2FyZ3Mkb3ZlcnJpZGVXb3Jrc3BhIDogdGhpcy53b3Jrc3BhY2VJZCgpKSArIFwiL1wiICsgYXJncy5wYXRoO1xuICAgICAgICAgICAgaWYgKGFyZ3MucXVlcnkpIHtcbiAgICAgICAgICAgICAgdXJsICs9IFwiP1wiICsgYXJncy5xdWVyeS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gX2V4dGVuZHM7XG4gICAgICAgICAgICBfY29udGV4dDUudDEgPSB7fTtcbiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2VIZWFkZXJzKCk7XG4gICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgX2NvbnRleHQ1LnQyID0gX2NvbnRleHQ1LnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDUudDMgPSBhcmdzLmhlYWRlcnM7XG4gICAgICAgICAgICBoZWFkZXJzID0gKDAsIF9jb250ZXh0NS50MCkoX2NvbnRleHQ1LnQxLCBfY29udGV4dDUudDIsIF9jb250ZXh0NS50Myk7XG4gICAgICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgICAgICAgICBpZiAoYXJncy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgaGVhZGVyc1tcIkFjY2VwdFwiXSA9IFwidGV4dC9ldmVudC1zdHJlYW1cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2hXaXRoRXJyb3IodXJsLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogYXJncy5tZXRob2QsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgIGJvZHk6IGFyZ3MuYm9keSA/IEpTT04uc3RyaW5naWZ5KGFyZ3MuYm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHNpZ25hbDogYXJncy5zaWduYWwsXG4gICAgICAgICAgICAgIHN0cmVhbTogYXJncy5zdHJlYW1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG4gICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiByZXF1ZXN0KF94Mikge1xuICAgICAgcmV0dXJuIF9yZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiByZXF1ZXN0O1xuICB9KClcbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb25zIHRhbGtzIGRpcmVjdGx5IHRvIHRoZSBEdXN0IHByb2R1Y3Rpb24gQVBJIHRvIGNyZWF0ZSBhIHJ1bi5cbiAgICpcbiAgICogQHBhcmFtIGFwcCBEdXN0QXBwVHlwZSB0aGUgYXBwIHRvIHJ1biBzdHJlYW1lZFxuICAgKiBAcGFyYW0gY29uZmlnIER1c3RBcHBDb25maWdUeXBlIHRoZSBhcHAgY29uZmlnXG4gICAqIEBwYXJhbSBpbnB1dHMgYW55W10gdGhlIGFwcCBpbnB1dHNcbiAgICovXG4gIDtcbiAgX3Byb3RvLnJ1bkFwcCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcnVuQXBwID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNihfcmVmNCwgY29uZmlnLCBpbnB1dHMsIF90ZW1wKSB7XG4gICAgICB2YXIgd29ya3NwYWNlSWQsIGFwcElkLCBhcHBIYXNoLCBhcHBTcGFjZUlkLCBfcmVmNSwgdXNlV29ya3NwYWNlQ3JlZGVudGlhbHMsIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICB3b3Jrc3BhY2VJZCA9IF9yZWY0LndvcmtzcGFjZUlkLCBhcHBJZCA9IF9yZWY0LmFwcElkLCBhcHBIYXNoID0gX3JlZjQuYXBwSGFzaCwgYXBwU3BhY2VJZCA9IF9yZWY0LmFwcFNwYWNlSWQ7XG4gICAgICAgICAgICBfcmVmNSA9IF90ZW1wID09PSB2b2lkIDAgPyB7XG4gICAgICAgICAgICAgIHVzZVdvcmtzcGFjZUNyZWRlbnRpYWxzOiBmYWxzZVxuICAgICAgICAgICAgfSA6IF90ZW1wLCB1c2VXb3Jrc3BhY2VDcmVkZW50aWFscyA9IF9yZWY1LnVzZVdvcmtzcGFjZUNyZWRlbnRpYWxzO1xuICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG92ZXJyaWRlV29ya3NwYWNlSWQ6IHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgICBwYXRoOiBcInNwYWNlcy9cIiArIGFwcFNwYWNlSWQgKyBcIi9hcHBzL1wiICsgYXBwSWQgKyBcIi9ydW5zXCIsXG4gICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICB1c2Vfd29ya3NwYWNlX2NyZWRlbnRpYWxzOiB1c2VXb3Jrc3BhY2VDcmVkZW50aWFscyA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbl9oYXNoOiBhcHBIYXNoLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYmxvY2tpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5wdXRzOiBpbnB1dHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ2LnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKFJ1bkFwcFJlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDYuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLnJ1bikpO1xuICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gcnVuQXBwKF94MywgX3g0LCBfeDUsIF94Nikge1xuICAgICAgcmV0dXJuIF9ydW5BcHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bkFwcDtcbiAgfSgpXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9ucyB0YWxrcyBkaXJlY3RseSB0byB0aGUgRHVzdCBwcm9kdWN0aW9uIEFQSSB0byBjcmVhdGUgYSBzdHJlYW1lZCBydW4uXG4gICAqXG4gICAqIEBwYXJhbSBhcHAgRHVzdEFwcFR5cGUgdGhlIGFwcCB0byBydW4gc3RyZWFtZWRcbiAgICogQHBhcmFtIGNvbmZpZyBEdXN0QXBwQ29uZmlnVHlwZSB0aGUgYXBwIGNvbmZpZ1xuICAgKiBAcGFyYW0gaW5wdXRzIGFueVtdIHRoZSBhcHAgaW5wdXRzXG4gICAqL1xuICA7XG4gIF9wcm90by5ydW5BcHBTdHJlYW1lZCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcnVuQXBwU3RyZWFtZWQgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KF9yZWY2LCBjb25maWcsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpbnB1dHMsIF90ZW1wMikge1xuICAgICAgdmFyIHdvcmtzcGFjZUlkLCBhcHBJZCwgYXBwSGFzaCwgYXBwU3BhY2VJZCwgX3JlZjcsIHVzZVdvcmtzcGFjZUNyZWRlbnRpYWxzLCByZXMsIHByb2Nlc3NTdHJlYW1lZFJ1blJlc3BvbnNlLCBfcHJvY2Vzc1N0cmVhbWVkUnVuUmVzcG9uc2U7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX3Byb2Nlc3NTdHJlYW1lZFJ1blJlc3BvbnNlID0gZnVuY3Rpb24gX3Byb2Nlc3NTdHJlYW1lZFJ1blJlMigpIHtcbiAgICAgICAgICAgICAgX3Byb2Nlc3NTdHJlYW1lZFJ1blJlc3BvbnNlID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHJlcywgbG9nZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQsIGhhc1J1bklkLCByZWplY3REdXN0UnVuSWRQcm9taXNlLCByZXNvbHZlRHVzdFJ1bklkUHJvbWlzZSwgZHVzdFJ1bklkUHJvbWlzZSwgcGVuZGluZ0V2ZW50cywgcGFyc2VyLCBzdHJlYW1FdmVudHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHtcbiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFyZXMub2sgfHwgIXJlcy5ib2R5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dEZyb21SZXNwb25zZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IF9jb250ZXh0OC5zZW50O1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KFwicmV0dXJuXCIsIG5ldyBFcnIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkdXN0X2FwaV9lcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJFcnJvciBydW5uaW5nIHN0cmVhbWVkIGFwcDogc3RhdHVzX2NvZGU9XCIgKyByZXMuc3RhdHVzICsgXCIgYm9keT1cIiArIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICBoYXNSdW5JZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGR1c3RSdW5JZFByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3REdXN0UnVuSWRQcm9taXNlID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUR1c3RSdW5JZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdFdmVudHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIgPSBjcmVhdGVQYXJzZXIoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJldmVudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZGF0YSRjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogZGF0YS5jb250ZW50LmNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5jb250ZW50Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJydW5fc3RhdHVzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmxvY2tfc3RhdHVzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmxvY2tfZXhlY3V0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidG9rZW5zXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b2tlbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5jb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlYXNvbmluZ190b2tlbnNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ190b2tlbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5jb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlYXNvbmluZ19pdGVtXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdfaXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25fY2FsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdFdmVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25fY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25fY2FsbF9hcmd1bWVudHNfdG9rZW5zXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsX2FyZ3VtZW50c190b2tlbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5jb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbmFsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoX2RhdGEkY29udGVudCA9IGRhdGEuY29udGVudCkgIT0gbnVsbCAmJiBfZGF0YSRjb250ZW50LnJ1bl9pZCAmJiAhaGFzUnVuSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUnVuSWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlRHVzdFJ1bklkUHJvbWlzZShkYXRhLmNvbnRlbnQucnVuX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiRmFpbGVkIHBhcnNpbmcgY2h1bmsgZnJvbSBEdXN0IEFQSVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1FdmVudHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfd3JhcEFzeW5jR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciwgZGVjb2RlciwgX3lpZWxkJF9hd2FpdEFzeW5jR2VuLCB2YWx1ZSwgZG9uZSwgX2ksIF9wZW5kaW5nRXZlbnRzLCBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFyZXMuYm9keSB8fCB0eXBlb2YgcmVzLmJvZHkgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGEgc3RyZWFtIHJlc3BvbnNlLCBidXQgZ290IGEgc3RyaW5nIG9yIG51bGxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlcy5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2F3YWl0QXN5bmNHZW5lcmF0b3IocmVhZGVyLnJlYWQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF95aWVsZCRfYXdhaXRBc3luY0dlbiA9IF9jb250ZXh0Ny5zZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF95aWVsZCRfYXdhaXRBc3luY0dlbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IF95aWVsZCRfYXdhaXRBc3luY0dlbi5kb25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZmVlZChkZWNvZGVyLmRlY29kZSh2YWx1ZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgX3BlbmRpbmdFdmVudHMgPSBwZW5kaW5nRXZlbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBfcGVuZGluZ0V2ZW50cy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IF9wZW5kaW5nRXZlbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nRXZlbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDIzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KFwiYnJlYWtcIiwgMjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzUnVuSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmNlIHRoZSBzdHJlYW0gaXMgZW50aXJlbHkgY29uc3VtZWQsIGlmIHdlIGhhdmVuJ3QgcmVjZWl2ZWQgYSBydW4gaWQsIHJlamVjdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3Ioe30sIFwiTm8gcnVuIGlkIHJlY2VpdmVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdER1c3RSdW5JZFByb21pc2UobmV3IEVycm9yKFwiTm8gcnVuIGlkIHJlY2VpdmVkXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDMzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMjg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IF9jb250ZXh0N1tcImNhdGNoXCJdKDQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDcudDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JTdHI6IEpTT04uc3RyaW5naWZ5KF9jb250ZXh0Ny50MCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JTb3VyY2U6IFwicHJvY2Vzc1N0cmVhbWVkUnVuUmVzcG9uc2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3I6IHN0cmVhbWluZyBjaHVua3NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFwic3RyZWFtX2Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHN0cmVhbWluZyBjaHVua3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcsIG51bGwsIFtbNCwgMjhdXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RyZWFtRXZlbnRzKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICB9KCk7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RyZWFtOiBzdHJlYW1FdmVudHMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1c3RSdW5JZDogZHVzdFJ1bklkUHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTtcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICByZXR1cm4gX3Byb2Nlc3NTdHJlYW1lZFJ1blJlc3BvbnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJvY2Vzc1N0cmVhbWVkUnVuUmVzcG9uc2UgPSBmdW5jdGlvbiBfcHJvY2Vzc1N0cmVhbWVkUnVuUmUoX3gxMSwgX3gxMikge1xuICAgICAgICAgICAgICByZXR1cm4gX3Byb2Nlc3NTdHJlYW1lZFJ1blJlc3BvbnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd29ya3NwYWNlSWQgPSBfcmVmNi53b3Jrc3BhY2VJZCwgYXBwSWQgPSBfcmVmNi5hcHBJZCwgYXBwSGFzaCA9IF9yZWY2LmFwcEhhc2gsIGFwcFNwYWNlSWQgPSBfcmVmNi5hcHBTcGFjZUlkO1xuICAgICAgICAgICAgX3JlZjcgPSBfdGVtcDIgPT09IHZvaWQgMCA/IHtcbiAgICAgICAgICAgICAgdXNlV29ya3NwYWNlQ3JlZGVudGlhbHM6IGZhbHNlXG4gICAgICAgICAgICB9IDogX3RlbXAyLCB1c2VXb3Jrc3BhY2VDcmVkZW50aWFscyA9IF9yZWY3LnVzZVdvcmtzcGFjZUNyZWRlbnRpYWxzO1xuICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG92ZXJyaWRlV29ya3NwYWNlSWQ6IHdvcmtzcGFjZUlkLFxuICAgICAgICAgICAgICBwYXRoOiBcInNwYWNlcy9cIiArIGFwcFNwYWNlSWQgKyBcIi9hcHBzL1wiICsgYXBwSWQgKyBcIi9ydW5zXCIsXG4gICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICB1c2Vfd29ya3NwYWNlX2NyZWRlbnRpYWxzOiB1c2VXb3Jrc3BhY2VDcmVkZW50aWFscyA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbl9oYXNoOiBhcHBIYXNoLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBibG9ja2luZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgaW5wdXRzOiBpbnB1dHNcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDkuc2VudDtcbiAgICAgICAgICAgIGlmICghcmVzLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoXCJyZXR1cm5cIiwgcHJvY2Vzc1N0cmVhbWVkUnVuUmVzcG9uc2UocmVzLnZhbHVlLnJlc3BvbnNlLCB0aGlzLl9sb2dnZXIpKTtcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHJ1bkFwcFN0cmVhbWVkKF94NywgX3g4LCBfeDksIF94MTApIHtcbiAgICAgIHJldHVybiBfcnVuQXBwU3RyZWFtZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bkFwcFN0cmVhbWVkO1xuICB9KClcbiAgLyoqXG4gICAqIFRoaXMgYWN0aW9ucyB0YWxrcyB0byB0aGUgRHVzdCBwcm9kdWN0aW9uIEFQSSB0byByZXRyaWV2ZSB0aGUgbGlzdCBvZiBkYXRhIHNvdXJjZXMgb2YgdGhlXG4gICAqIGN1cnJlbnQgd29ya3NwYWNlLlxuICAgKi9cbiAgO1xuICBfcHJvdG8uZ2V0RGF0YVNvdXJjZXMgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2dldERhdGFTb3VyY2VzID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7XG4gICAgICB2YXIgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJkYXRhX3NvdXJjZXNcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoR2V0RGF0YVNvdXJjZXNSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQxMC5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmRhdGFfc291cmNlcykpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGdldERhdGFTb3VyY2VzKCkge1xuICAgICAgcmV0dXJuIF9nZXREYXRhU291cmNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0RGF0YVNvdXJjZXM7XG4gIH0oKTtcbiAgX3Byb3RvLmdldEFnZW50Q29uZmlndXJhdGlvbnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0QWdlbnRDb25maWd1cmF0aW9ucyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKF9yZWY4KSB7XG4gICAgICB2YXIgdmlldywgX3JlZjgkaW5jbHVkZXMsIGluY2x1ZGVzLCBnZXRRdWVyeVN0cmluZywgcXVlcnlTdHJpbmcsIHBhdGgsIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgZ2V0UXVlcnlTdHJpbmcgPSBmdW5jdGlvbiBfZ2V0UXVlcnlTdHJpbmcoKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdmlldyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJ2aWV3XCIsIHZpZXcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpbmNsdWRlcy5pbmNsdWRlcyhcImF1dGhvcnNcIikpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwid2l0aEF1dGhvcnNcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2aWV3ID0gX3JlZjgudmlldywgX3JlZjgkaW5jbHVkZXMgPSBfcmVmOC5pbmNsdWRlcywgaW5jbHVkZXMgPSBfcmVmOCRpbmNsdWRlcyA9PT0gdm9pZCAwID8gW10gOiBfcmVmOCRpbmNsdWRlczsgLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgcXVlcnkgcGFyYW1ldGVycy5cbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gdmlldyB8fCBpbmNsdWRlcy5sZW5ndGggPiAwID8gZ2V0UXVlcnlTdHJpbmcoKSA6IG51bGw7XG4gICAgICAgICAgICBwYXRoID0gcXVlcnlTdHJpbmcgPyBcImFzc2lzdGFudC9hZ2VudF9jb25maWd1cmF0aW9ucz9cIiArIHF1ZXJ5U3RyaW5nIDogXCJhc3Npc3RhbnQvYWdlbnRfY29uZmlndXJhdGlvbnNcIjtcbiAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDY7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDExLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA5O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShHZXRBZ2VudENvbmZpZ3VyYXRpb25zUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0MTEuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEyO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmFnZW50Q29uZmlndXJhdGlvbnMpKTtcbiAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTExLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gZ2V0QWdlbnRDb25maWd1cmF0aW9ucyhfeDEzKSB7XG4gICAgICByZXR1cm4gX2dldEFnZW50Q29uZmlndXJhdGlvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldEFnZW50Q29uZmlndXJhdGlvbnM7XG4gIH0oKTtcbiAgX3Byb3RvLnBvc3RDb250ZW50RnJhZ21lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcG9zdENvbnRlbnRGcmFnbWVudCA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKF9yZWY5KSB7XG4gICAgICB2YXIgY29udmVyc2F0aW9uSWQsIGNvbnRlbnRGcmFnbWVudCwgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCA9IF9yZWY5LmNvbnZlcnNhdGlvbklkLCBjb250ZW50RnJhZ21lbnQgPSBfcmVmOS5jb250ZW50RnJhZ21lbnQ7XG4gICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwiYXNzaXN0YW50L2NvbnZlcnNhdGlvbnMvXCIgKyBjb252ZXJzYXRpb25JZCArIFwiL2NvbnRlbnRfZnJhZ21lbnRzXCIsXG4gICAgICAgICAgICAgIGJvZHk6IF9leHRlbmRzKHt9LCBjb250ZW50RnJhZ21lbnQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDEyLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShQb3N0Q29udGVudEZyYWdtZW50UmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0MTIuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZS5jb250ZW50RnJhZ21lbnQpKTtcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gcG9zdENvbnRlbnRGcmFnbWVudChfeDE0KSB7XG4gICAgICByZXR1cm4gX3Bvc3RDb250ZW50RnJhZ21lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHBvc3RDb250ZW50RnJhZ21lbnQ7XG4gIH0oKTtcbiAgX3Byb3RvLmNyZWF0ZUdlbmVyaWNBZ2VudENvbmZpZ3VyYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfY3JlYXRlR2VuZXJpY0FnZW50Q29uZmlndXJhdGlvbiA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKF9yZWYxMCkge1xuICAgICAgdmFyIG5hbWUsIGRlc2NyaXB0aW9uLCBpbnN0cnVjdGlvbnMsIGVtb2ppLCBzdWJBZ2VudE5hbWUsIHN1YkFnZW50RGVzY3JpcHRpb24sIHN1YkFnZW50SW5zdHJ1Y3Rpb25zLCBzdWJBZ2VudEVtb2ppLCByZXMsIHI7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIG5hbWUgPSBfcmVmMTAubmFtZSwgZGVzY3JpcHRpb24gPSBfcmVmMTAuZGVzY3JpcHRpb24sIGluc3RydWN0aW9ucyA9IF9yZWYxMC5pbnN0cnVjdGlvbnMsIGVtb2ppID0gX3JlZjEwLmVtb2ppLCBzdWJBZ2VudE5hbWUgPSBfcmVmMTAuc3ViQWdlbnROYW1lLCBzdWJBZ2VudERlc2NyaXB0aW9uID0gX3JlZjEwLnN1YkFnZW50RGVzY3JpcHRpb24sIHN1YkFnZW50SW5zdHJ1Y3Rpb25zID0gX3JlZjEwLnN1YkFnZW50SW5zdHJ1Y3Rpb25zLCBzdWJBZ2VudEVtb2ppID0gX3JlZjEwLnN1YkFnZW50RW1vamk7XG4gICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwiYXNzaXN0YW50L2dlbmVyaWNfYWdlbnRzXCIsXG4gICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgICAgICBlbW9qaTogZW1vamksXG4gICAgICAgICAgICAgICAgc3ViQWdlbnROYW1lOiBzdWJBZ2VudE5hbWUsXG4gICAgICAgICAgICAgICAgc3ViQWdlbnREZXNjcmlwdGlvbjogc3ViQWdlbnREZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBzdWJBZ2VudEluc3RydWN0aW9uczogc3ViQWdlbnRJbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgc3ViQWdlbnRFbW9qaTogc3ViQWdlbnRFbW9qaVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDEzLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShDcmVhdGVHZW5lcmljQWdlbnRDb25maWd1cmF0aW9uUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0MTMuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZSkpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMTMsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBjcmVhdGVHZW5lcmljQWdlbnRDb25maWd1cmF0aW9uKF94MTUpIHtcbiAgICAgIHJldHVybiBfY3JlYXRlR2VuZXJpY0FnZW50Q29uZmlndXJhdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlR2VuZXJpY0FnZW50Q29uZmlndXJhdGlvbjtcbiAgfSgpIC8vIFdoZW4gY3JlYXRpbmcgYSBjb252ZXJzYXRpb24gd2l0aCBhIHVzZXIgbWVzc2FnZSwgdGhlIEFQSSByZXR1cm5zIG9ubHkgYWZ0ZXIgdGhlIHVzZXIgbWVzc2FnZVxuICAvLyB3YXMgY3JlYXRlZCAoYW5kIGlmIGFwcGxpY2FibGUgdGhlIGFzc29jaWF0ZWQgYWdlbnQgbWVzc2FnZXMpLlxuICA7XG4gIF9wcm90by5jcmVhdGVDb252ZXJzYXRpb24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2NyZWF0ZUNvbnZlcnNhdGlvbiA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KF9yZWYxMSkge1xuICAgICAgdmFyIHRpdGxlLCB2aXNpYmlsaXR5LCBkZXB0aCwgbWVzc2FnZSwgY29udGVudEZyYWdtZW50LCBjb250ZW50RnJhZ21lbnRzLCBfcmVmMTEkYmxvY2tpbmcsIGJsb2NraW5nLCBfcmVmMTEkc2tpcFRvb2xzVmFsaWQsIHNraXBUb29sc1ZhbGlkYXRpb24sIHBhcmFtcywgcXVlcnlQYXJhbXMsIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGl0bGUgPSBfcmVmMTEudGl0bGUsIHZpc2liaWxpdHkgPSBfcmVmMTEudmlzaWJpbGl0eSwgZGVwdGggPSBfcmVmMTEuZGVwdGgsIG1lc3NhZ2UgPSBfcmVmMTEubWVzc2FnZSwgY29udGVudEZyYWdtZW50ID0gX3JlZjExLmNvbnRlbnRGcmFnbWVudCwgY29udGVudEZyYWdtZW50cyA9IF9yZWYxMS5jb250ZW50RnJhZ21lbnRzLCBfcmVmMTEkYmxvY2tpbmcgPSBfcmVmMTEuYmxvY2tpbmcsIGJsb2NraW5nID0gX3JlZjExJGJsb2NraW5nID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYxMSRibG9ja2luZywgX3JlZjExJHNraXBUb29sc1ZhbGlkID0gX3JlZjExLnNraXBUb29sc1ZhbGlkYXRpb24sIHNraXBUb29sc1ZhbGlkYXRpb24gPSBfcmVmMTEkc2tpcFRvb2xzVmFsaWQgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjExJHNraXBUb29sc1ZhbGlkLCBwYXJhbXMgPSBfcmVmMTEucGFyYW1zO1xuICAgICAgICAgICAgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcyk7XG4gICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwiYXNzaXN0YW50L2NvbnZlcnNhdGlvbnNcIixcbiAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCkgPyBxdWVyeVBhcmFtcyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmlsaXR5LFxuICAgICAgICAgICAgICAgIGRlcHRoOiBkZXB0aCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRGcmFnbWVudDogY29udGVudEZyYWdtZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnRGcmFnbWVudHM6IGNvbnRlbnRGcmFnbWVudHMsXG4gICAgICAgICAgICAgICAgYmxvY2tpbmc6IGJsb2NraW5nLFxuICAgICAgICAgICAgICAgIHNraXBUb29sc1ZhbGlkYXRpb246IHNraXBUb29sc1ZhbGlkYXRpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxNC5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KFwicmV0dXJuXCIsIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShDcmVhdGVDb252ZXJzYXRpb25SZXNwb25zZVNjaGVtYSwgcmVzKSk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gY3JlYXRlQ29udmVyc2F0aW9uKF94MTYpIHtcbiAgICAgIHJldHVybiBfY3JlYXRlQ29udmVyc2F0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDb252ZXJzYXRpb247XG4gIH0oKTtcbiAgX3Byb3RvLnBvc3RVc2VyTWVzc2FnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9wb3N0VXNlck1lc3NhZ2UgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNShfcmVmMTIpIHtcbiAgICAgIHZhciBjb252ZXJzYXRpb25JZCwgbWVzc2FnZSwgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCA9IF9yZWYxMi5jb252ZXJzYXRpb25JZCwgbWVzc2FnZSA9IF9yZWYxMi5tZXNzYWdlO1xuICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zL1wiICsgY29udmVyc2F0aW9uSWQgKyBcIi9tZXNzYWdlc1wiLFxuICAgICAgICAgICAgICBib2R5OiBfZXh0ZW5kcyh7fSwgbWVzc2FnZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTUuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDY7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKFBvc3RVc2VyTWVzc2FnZVJlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDE1LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUubWVzc2FnZSkpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMTUsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBwb3N0VXNlck1lc3NhZ2UoX3gxNykge1xuICAgICAgcmV0dXJuIF9wb3N0VXNlck1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHBvc3RVc2VyTWVzc2FnZTtcbiAgfSgpO1xuICBfcHJvdG8uc3RyZWFtQWdlbnRBbnN3ZXJFdmVudHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc3RyZWFtQWdlbnRBbnN3ZXJFdmVudHMgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNihfcmVmMTMpIHtcbiAgICAgIHZhciBfb3B0aW9ucyRtYXhSZWNvbm5lY3QsIF9vcHRpb25zJHJlY29ubmVjdERlbCwgX29wdGlvbnMkYXV0b1JlY29ubmVjO1xuICAgICAgdmFyIGNvbnZlcnNhdGlvbiwgdXNlck1lc3NhZ2VJZCwgc2lnbmFsLCBfcmVmMTMkb3B0aW9ucywgb3B0aW9ucywgYWdlbnRNZXNzYWdlcywgYWdlbnRNZXNzYWdlO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb24gPSBfcmVmMTMuY29udmVyc2F0aW9uLCB1c2VyTWVzc2FnZUlkID0gX3JlZjEzLnVzZXJNZXNzYWdlSWQsIHNpZ25hbCA9IF9yZWYxMy5zaWduYWwsIF9yZWYxMyRvcHRpb25zID0gX3JlZjEzLm9wdGlvbnMsIG9wdGlvbnMgPSBfcmVmMTMkb3B0aW9ucyA9PT0gdm9pZCAwID8ge1xuICAgICAgICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogREVGQVVMVF9NQVhfUkVDT05ORUNUX0FUVEVNUFRTLFxuICAgICAgICAgICAgICByZWNvbm5lY3REZWxheTogREVGQVVMVF9SRUNPTk5FQ1RfREVMQVksXG4gICAgICAgICAgICAgIGF1dG9SZWNvbm5lY3Q6IHRydWVcbiAgICAgICAgICAgIH0gOiBfcmVmMTMkb3B0aW9ucztcbiAgICAgICAgICAgIGFnZW50TWVzc2FnZXMgPSBjb252ZXJzYXRpb24uY29udGVudC5tYXAoZnVuY3Rpb24gKHZlcnNpb25zKSB7XG4gICAgICAgICAgICAgIHZhciBtID0gdmVyc2lvbnNbdmVyc2lvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICAgIHJldHVybiBtICYmIG0udHlwZSA9PT0gXCJhZ2VudF9tZXNzYWdlXCIgJiYgbS5wYXJlbnRNZXNzYWdlSWQgPT09IHVzZXJNZXNzYWdlSWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghKGFnZW50TWVzc2FnZXMubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdChcInJldHVyblwiLCBuZXcgRXJyKG5ldyBFcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSBhZ2VudCBtZXNzYWdlXCIpKSk7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgYWdlbnRNZXNzYWdlID0gYWdlbnRNZXNzYWdlc1swXTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdChcInJldHVyblwiLCB0aGlzLnN0cmVhbUFnZW50TWVzc2FnZUV2ZW50cyh7XG4gICAgICAgICAgICAgIGNvbnZlcnNhdGlvbjogY29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICBhZ2VudE1lc3NhZ2U6IGFnZW50TWVzc2FnZSxcbiAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogKF9vcHRpb25zJG1heFJlY29ubmVjdCA9IG9wdGlvbnMubWF4UmVjb25uZWN0QXR0ZW1wdHMpICE9IG51bGwgPyBfb3B0aW9ucyRtYXhSZWNvbm5lY3QgOiBERUZBVUxUX01BWF9SRUNPTk5FQ1RfQVRURU1QVFMsXG4gICAgICAgICAgICAgICAgcmVjb25uZWN0RGVsYXk6IChfb3B0aW9ucyRyZWNvbm5lY3REZWwgPSBvcHRpb25zLnJlY29ubmVjdERlbGF5KSAhPSBudWxsID8gX29wdGlvbnMkcmVjb25uZWN0RGVsIDogREVGQVVMVF9SRUNPTk5FQ1RfREVMQVksXG4gICAgICAgICAgICAgICAgYXV0b1JlY29ubmVjdDogKF9vcHRpb25zJGF1dG9SZWNvbm5lYyA9IG9wdGlvbnMuYXV0b1JlY29ubmVjdCkgIT0gbnVsbCA/IF9vcHRpb25zJGF1dG9SZWNvbm5lYyA6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUxNiwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHN0cmVhbUFnZW50QW5zd2VyRXZlbnRzKF94MTgpIHtcbiAgICAgIHJldHVybiBfc3RyZWFtQWdlbnRBbnN3ZXJFdmVudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmVhbUFnZW50QW5zd2VyRXZlbnRzO1xuICB9KCk7XG4gIF9wcm90by5zdHJlYW1BZ2VudE1lc3NhZ2VFdmVudHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc3RyZWFtQWdlbnRNZXNzYWdlRXZlbnRzID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoX3JlZjE0KSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdmFyIGNvbnZlcnNhdGlvbiwgYWdlbnRNZXNzYWdlLCBzaWduYWwsIG9wdGlvbnMsIG1heFJlY29ubmVjdEF0dGVtcHRzLCByZWNvbm5lY3REZWxheSwgYXV0b1JlY29ubmVjdCwgbGFzdEV2ZW50SWQsIHRlcm1pbmFsRXZlbnRUeXBlcywgY3JlYXRlUmVxdWVzdCwgbG9nZ2VyLCByZWNvbm5lY3RBdHRlbXB0cywgcmVjZWl2ZWRUZXJtaW5hbEV2ZW50LCBzdHJlYW1FdmVudHNXaXRoUmVjb25uZWN0aW9uO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQyMCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb24gPSBfcmVmMTQuY29udmVyc2F0aW9uLCBhZ2VudE1lc3NhZ2UgPSBfcmVmMTQuYWdlbnRNZXNzYWdlLCBzaWduYWwgPSBfcmVmMTQuc2lnbmFsLCBvcHRpb25zID0gX3JlZjE0Lm9wdGlvbnM7XG4gICAgICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0cyA9IG9wdGlvbnMubWF4UmVjb25uZWN0QXR0ZW1wdHMsIHJlY29ubmVjdERlbGF5ID0gb3B0aW9ucy5yZWNvbm5lY3REZWxheSwgYXV0b1JlY29ubmVjdCA9IG9wdGlvbnMuYXV0b1JlY29ubmVjdDtcbiAgICAgICAgICAgIGxhc3RFdmVudElkID0gbnVsbDtcbiAgICAgICAgICAgIHRlcm1pbmFsRXZlbnRUeXBlcyA9IFtcImFnZW50X21lc3NhZ2Vfc3VjY2Vzc1wiLCBcImFnZW50X2Vycm9yXCIsIFwiYWdlbnRfZ2VuZXJhdGlvbl9jYW5jZWxsZWRcIiwgXCJ1c2VyX21lc3NhZ2VfZXJyb3JcIl07XG4gICAgICAgICAgICBjcmVhdGVSZXF1ZXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIF9yZWYxNSA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcobGFzdElkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNyQoX2NvbnRleHQxNykge1xuICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxNy5wcmV2ID0gX2NvbnRleHQxNy5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gXCJhc3Npc3RhbnQvY29udmVyc2F0aW9ucy9cIiArIGNvbnZlcnNhdGlvbi5zSWQgKyBcIi9tZXNzYWdlcy9cIiArIGFnZW50TWVzc2FnZS5zSWQgKyBcIi9ldmVudHNcIjtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoICs9IFwiP2xhc3RFdmVudElkPVwiICsgbGFzdElkO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoXCJyZXR1cm5cIiwgX3RoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTcpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KF94MjApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KCk7XG4gICAgICAgICAgICBsb2dnZXIgPSB0aGlzLl9sb2dnZXI7XG4gICAgICAgICAgICByZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgICAgICAgICByZWNlaXZlZFRlcm1pbmFsRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN0cmVhbUV2ZW50c1dpdGhSZWNvbm5lY3Rpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfd3JhcEFzeW5jR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9sb29wLCBfcmV0O1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTkpIHtcbiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgX2xvb3AgPSAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2xvb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzLCBlcnJvciwgcGVuZGluZ0V2ZW50cywgcGFyc2VyLCByZWFkZXIsIGRlY29kZXIsIF95aWVsZCRfYXdhaXRBc3luY0dlbjIsIHZhbHVlLCBkb25lLCBfaXRlcmF0b3IsIF9zdGVwLCBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfbG9vcCQoX2NvbnRleHQxOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzaWduYWwgIT0gbnVsbCAmJiBzaWduYWwuYWJvcnRlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5hYnJ1cHQoXCJyZXR1cm5cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2OiB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2F3YWl0QXN5bmNHZW5lcmF0b3IoY3JlYXRlUmVxdWVzdChsYXN0RXZlbnRJZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTguc2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHJlcy5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHJlcXVlc3RpbmcgZXZlbnQgc3RyZWFtOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFyZXMudmFsdWUucmVzcG9uc2Uub2sgfHwgIXJlcy52YWx1ZS5yZXNwb25zZS5ib2R5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciByZXF1ZXN0aW5nIGV2ZW50IHN0cmVhbTogc3RhdHVzX2NvZGU9XCIgKyByZXMudmFsdWUucmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyID0gY3JlYXRlUGFyc2VyKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJldmVudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudERhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnREYXRhLmV2ZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0RXZlbnRJZCA9IGV2ZW50RGF0YS5ldmVudElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdFdmVudHMucHVzaChldmVudERhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiRmFpbGVkIHBhcnNpbmcgY2h1bmsgZnJvbSBEdXN0IEFQSVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXJlcy52YWx1ZS5yZXNwb25zZS5ib2R5IHx8IHR5cGVvZiByZXMudmFsdWUucmVzcG9uc2UuYm9keSA9PT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgYSBzdHJlYW0gcmVzcG9uc2UsIGJ1dCBnb3QgYSBzdHJpbmcgb3IgbnVsbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gcmVzLnZhbHVlLnJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4LnByZXYgPSAxNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMTk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2F3YWl0QXN5bmNHZW5lcmF0b3IocmVhZGVyLnJlYWQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF95aWVsZCRfYXdhaXRBc3luY0dlbjIgPSBfY29udGV4dDE4LnNlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF95aWVsZCRfYXdhaXRBc3luY0dlbjIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gX3lpZWxkJF9hd2FpdEFzeW5jR2VuMi5kb25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAzMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZmVlZChkZWNvZGVyLmRlY29kZSh2YWx1ZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UocGVuZGluZ0V2ZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAzMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbEV2ZW50VHlwZXMuaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZWRUZXJtaW5hbEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0V2ZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KFwiYnJlYWtcIiwgMzcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAxNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSA0MztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4LnByZXYgPSAzOTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgudDAgPSBfY29udGV4dDE4W1wiY2F0Y2hcIl0oMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTgudDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiRmFpbGVkIHByb2Nlc3NpbmcgZXZlbnQgc3RyZWFtXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBldmVudCBzdHJlYW06IFwiICsgX2NvbnRleHQxOC50MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDQzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5maW5pc2goNDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghcmVjZWl2ZWRUZXJtaW5hbEV2ZW50ICYmIGF1dG9SZWNvbm5lY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDUzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29ubmVjdEF0dGVtcHRzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWNvbm5lY3RBdHRlbXB0cyA+PSBtYXhSZWNvbm5lY3RBdHRlbXB0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhjZWVkZWQgbWF4aW11bSByZWNvbm5lY3Rpb24gYXR0ZW1wdHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDUyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hd2FpdEFzeW5jR2VuZXJhdG9yKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmUsIHJlY29ubmVjdERlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KFwicmV0dXJuXCIsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5hYnJ1cHQoXCJyZXR1cm5cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2OiB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBfbG9vcCwgbnVsbCwgW1sxNiwgMzksIDQzLCA0Nl1dKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmRlbGVnYXRlWWllbGQoX2xvb3AoKSwgXCJ0MFwiLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgIF9yZXQgPSBfY29udGV4dDE5LnQwO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9yZXQgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdChcImNvbnRpbnVlXCIsIDEpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFfcmV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdChcInJldHVyblwiLCBfcmV0LnYpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTgpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdHJlYW1FdmVudHNXaXRoUmVjb25uZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSgpO1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayh7XG4gICAgICAgICAgICAgIGV2ZW50U3RyZWFtOiBzdHJlYW1FdmVudHNXaXRoUmVjb25uZWN0aW9uKClcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTE5LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gc3RyZWFtQWdlbnRNZXNzYWdlRXZlbnRzKF94MTkpIHtcbiAgICAgIHJldHVybiBfc3RyZWFtQWdlbnRNZXNzYWdlRXZlbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBzdHJlYW1BZ2VudE1lc3NhZ2VFdmVudHM7XG4gIH0oKTtcbiAgX3Byb3RvLmNhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2NhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoX3JlZjE2KSB7XG4gICAgICB2YXIgY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZHMsIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjEpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQgPSBfcmVmMTYuY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZHMgPSBfcmVmMTYubWVzc2FnZUlkcztcbiAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJhc3Npc3RhbnQvY29udmVyc2F0aW9ucy9cIiArIGNvbnZlcnNhdGlvbklkICsgXCIvY2FuY2VsXCIsXG4gICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlSWRzOiBtZXNzYWdlSWRzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MjEuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDY7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKENhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0MjEuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDExO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlKSk7XG4gICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyMCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGNhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uKF94MjEpIHtcbiAgICAgIHJldHVybiBfY2FuY2VsTWVzc2FnZUdlbmVyYXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uO1xuICB9KCk7XG4gIF9wcm90by5nZXRDb252ZXJzYXRpb25zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2dldENvbnZlcnNhdGlvbnMgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMSgpIHtcbiAgICAgIHZhciByZXMsIHI7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIxJChfY29udGV4dDIyKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MjIucHJldiA9IF9jb250ZXh0MjIubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MjIuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKEdldENvbnZlcnNhdGlvbnNSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQyMi5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmNvbnZlcnNhdGlvbnMpKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMjEsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25zKCkge1xuICAgICAgcmV0dXJuIF9nZXRDb252ZXJzYXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBnZXRDb252ZXJzYXRpb25zO1xuICB9KCk7XG4gIF9wcm90by5nZXRDb252ZXJzYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0Q29udmVyc2F0aW9uID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoX3JlZjE3KSB7XG4gICAgICB2YXIgY29udmVyc2F0aW9uSWQsIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjIkKF9jb250ZXh0MjMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQgPSBfcmVmMTcuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJhc3Npc3RhbnQvY29udmVyc2F0aW9ucy9cIiArIGNvbnZlcnNhdGlvbklkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDIzLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSA2O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShHZXRDb252ZXJzYXRpb25SZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByID0gX2NvbnRleHQyMy5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyMy5uZXh0ID0gOTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmNvbnZlcnNhdGlvbikpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMjIsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb24oX3gyMikge1xuICAgICAgcmV0dXJuIF9nZXRDb252ZXJzYXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldENvbnZlcnNhdGlvbjtcbiAgfSgpO1xuICBfcHJvdG8uZ2V0Q29udmVyc2F0aW9uRmVlZGJhY2sgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0Q29udmVyc2F0aW9uRmVlZGJhY2sgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMyhfcmVmMTgpIHtcbiAgICAgIHZhciBjb252ZXJzYXRpb25JZCwgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMyQoX2NvbnRleHQyNCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCA9IF9yZWYxOC5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zL1wiICsgY29udmVyc2F0aW9uSWQgKyBcIi9mZWVkYmFja3NcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyNC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoR2V0RmVlZGJhY2tzUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0MjQuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZS5mZWVkYmFja3MpKTtcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIzLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uRmVlZGJhY2soX3gyMykge1xuICAgICAgcmV0dXJuIF9nZXRDb252ZXJzYXRpb25GZWVkYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0Q29udmVyc2F0aW9uRmVlZGJhY2s7XG4gIH0oKTtcbiAgX3Byb3RvLnBvc3RGZWVkYmFjayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9wb3N0RmVlZGJhY2sgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNChjb252ZXJzYXRpb25JZCwgbWVzc2FnZUlkLCBmZWVkYmFjaykge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjQkKF9jb250ZXh0MjUpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyNS5wcmV2ID0gX2NvbnRleHQyNS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zL1wiICsgY29udmVyc2F0aW9uSWQgKyBcIi9tZXNzYWdlcy9cIiArIG1lc3NhZ2VJZCArIFwiL2ZlZWRiYWNrc1wiLFxuICAgICAgICAgICAgICBib2R5OiBmZWVkYmFja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyNS5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuYWJydXB0KFwicmV0dXJuXCIsIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShQb3N0TWVzc2FnZUZlZWRiYWNrUmVzcG9uc2VTY2hlbWEsIHJlcykpO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyNCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHBvc3RGZWVkYmFjayhfeDI0LCBfeDI1LCBfeDI2KSB7XG4gICAgICByZXR1cm4gX3Bvc3RGZWVkYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gcG9zdEZlZWRiYWNrO1xuICB9KCk7XG4gIF9wcm90by5kZWxldGVGZWVkYmFjayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9kZWxldGVGZWVkYmFjayA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI1KGNvbnZlcnNhdGlvbklkLCBtZXNzYWdlSWQpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI1JChfY29udGV4dDI2KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zL1wiICsgY29udmVyc2F0aW9uSWQgKyBcIi9tZXNzYWdlcy9cIiArIG1lc3NhZ2VJZCArIFwiL2ZlZWRiYWNrc1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDI2LnNlbnQ7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5hYnJ1cHQoXCJyZXR1cm5cIiwgdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKFBvc3RNZXNzYWdlRmVlZGJhY2tSZXNwb25zZVNjaGVtYSwgcmVzKSk7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTI1LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gZGVsZXRlRmVlZGJhY2soX3gyNywgX3gyOCkge1xuICAgICAgcmV0dXJuIF9kZWxldGVGZWVkYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZGVsZXRlRmVlZGJhY2s7XG4gIH0oKTtcbiAgX3Byb3RvLnRva2VuaXplID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX3Rva2VuaXplID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjYodGV4dCwgZGF0YVNvdXJjZUlkKSB7XG4gICAgICB2YXIgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNiQoX2NvbnRleHQyNykge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDI3Lm5leHQgPSAyO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwiZGF0YV9zb3VyY2VzL1wiICsgZGF0YVNvdXJjZUlkICsgXCIvdG9rZW5pemVcIixcbiAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRleHRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyNy5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gNTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoVG9rZW5pemVSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQyNy5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjcuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLnRva2VucykpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyNiwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHRva2VuaXplKF94MjksIF94MzApIHtcbiAgICAgIHJldHVybiBfdG9rZW5pemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuaXplO1xuICB9KCk7XG4gIF9wcm90by51cHNlcnRGb2xkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdXBzZXJ0Rm9sZGVyID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjcoX3JlZjE5KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZUlkLCBmb2xkZXJJZCwgdGltZXN0YW1wLCB0aXRsZSwgcGFyZW50SWQsIHBhcmVudHMsIG1pbWVUeXBlLCBzb3VyY2VVcmwsIHByb3ZpZGVyVmlzaWJpbGl0eSwgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNyQoX2NvbnRleHQyOCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBkYXRhU291cmNlSWQgPSBfcmVmMTkuZGF0YVNvdXJjZUlkLCBmb2xkZXJJZCA9IF9yZWYxOS5mb2xkZXJJZCwgdGltZXN0YW1wID0gX3JlZjE5LnRpbWVzdGFtcCwgdGl0bGUgPSBfcmVmMTkudGl0bGUsIHBhcmVudElkID0gX3JlZjE5LnBhcmVudElkLCBwYXJlbnRzID0gX3JlZjE5LnBhcmVudHMsIG1pbWVUeXBlID0gX3JlZjE5Lm1pbWVUeXBlLCBzb3VyY2VVcmwgPSBfcmVmMTkuc291cmNlVXJsLCBwcm92aWRlclZpc2liaWxpdHkgPSBfcmVmMTkucHJvdmlkZXJWaXNpYmlsaXR5O1xuICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImRhdGFfc291cmNlcy9cIiArIGRhdGFTb3VyY2VJZCArIFwiL2ZvbGRlcnMvXCIgKyBlbmNvZGVVUklDb21wb25lbnQoZm9sZGVySWQpLFxuICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBNYXRoLmZsb29yKHRpbWVzdGFtcCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIHBhcmVudF9pZDogcGFyZW50SWQsXG4gICAgICAgICAgICAgICAgcGFyZW50czogcGFyZW50cyxcbiAgICAgICAgICAgICAgICBtaW1lX3R5cGU6IG1pbWVUeXBlLFxuICAgICAgICAgICAgICAgIHNvdXJjZV91cmw6IHNvdXJjZVVybCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcl92aXNpYmlsaXR5OiBwcm92aWRlclZpc2liaWxpdHlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyOC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoVXBzZXJ0Rm9sZGVyUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0Mjguc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZSkpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjguc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMjcsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiB1cHNlcnRGb2xkZXIoX3gzMSkge1xuICAgICAgcmV0dXJuIF91cHNlcnRGb2xkZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHVwc2VydEZvbGRlcjtcbiAgfSgpO1xuICBfcHJvdG8uZGVsZXRlRm9sZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2RlbGV0ZUZvbGRlciA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI4KF9yZWYyMCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2VJZCwgZm9sZGVySWQsIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjgkKF9jb250ZXh0MjkpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyOS5wcmV2ID0gX2NvbnRleHQyOS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgZGF0YVNvdXJjZUlkID0gX3JlZjIwLmRhdGFTb3VyY2VJZCwgZm9sZGVySWQgPSBfcmVmMjAuZm9sZGVySWQ7XG4gICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJkYXRhX3NvdXJjZXMvXCIgKyBkYXRhU291cmNlSWQgKyBcIi9mb2xkZXJzL1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZvbGRlcklkKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyOS5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQyOS5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoRGVsZXRlRm9sZGVyUmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0Mjkuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZSkpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjkuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMjgsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBkZWxldGVGb2xkZXIoX3gzMikge1xuICAgICAgcmV0dXJuIF9kZWxldGVGb2xkZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlbGV0ZUZvbGRlcjtcbiAgfSgpO1xuICBfcHJvdG8udXBsb2FkRmlsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF91cGxvYWRGaWxlID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjkoX3JlZjIxKSB7XG4gICAgICB2YXIgY29udGVudFR5cGUsIGZpbGVOYW1lLCBmaWxlU2l6ZSwgdXNlQ2FzZSwgdXNlQ2FzZU1ldGFkYXRhLCBmaWxlT2JqZWN0LCByZXMsIGZpbGVSZXMsIGZpbGUsIGZvcm1EYXRhLCBoZWFkZXJzLCByZXNwb25zZSwgX2Vycm9yRGF0YSRlcnJvciwgZXJyb3JEYXRhLCByZXNwb25zZURhdGE7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI5JChfY29udGV4dDMwKSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gX3JlZjIxLmNvbnRlbnRUeXBlLCBmaWxlTmFtZSA9IF9yZWYyMS5maWxlTmFtZSwgZmlsZVNpemUgPSBfcmVmMjEuZmlsZVNpemUsIHVzZUNhc2UgPSBfcmVmMjEudXNlQ2FzZSwgdXNlQ2FzZU1ldGFkYXRhID0gX3JlZjIxLnVzZUNhc2VNZXRhZGF0YSwgZmlsZU9iamVjdCA9IF9yZWYyMS5maWxlT2JqZWN0O1xuICAgICAgICAgICAgX2NvbnRleHQzMC5uZXh0ID0gMztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImZpbGVzXCIsXG4gICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGZpbGVTaXplOiBmaWxlU2l6ZSxcbiAgICAgICAgICAgICAgICB1c2VDYXNlOiB1c2VDYXNlLFxuICAgICAgICAgICAgICAgIHVzZUNhc2VNZXRhZGF0YTogdXNlQ2FzZU1ldGFkYXRhXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MzAuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDY7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKEZpbGVVcGxvYWRSZXF1ZXN0UmVzcG9uc2VTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgZmlsZVJlcyA9IF9jb250ZXh0MzAuc2VudDtcbiAgICAgICAgICAgIGlmICghZmlsZVJlcy5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KFwicmV0dXJuXCIsIGZpbGVSZXMpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIGZpbGUgPSBmaWxlUmVzLnZhbHVlLmZpbGU7XG4gICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlT2JqZWN0KTtcbiAgICAgICAgICAgIC8vIFVwbG9hZCBmaWxlIHRvIHRoZSBvYnRhaW5lZCBVUkwuXG4gICAgICAgICAgICBfY29udGV4dDMwLnByZXYgPSAxMjtcbiAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDE1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZUhlYWRlcnMoKTtcbiAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgaGVhZGVycyA9IF9jb250ZXh0MzAuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MzAubmV4dCA9IDE4O1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoKGZpbGUudXBsb2FkVXJsLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMwLnNlbnQ7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQzMC5uZXh0ID0gMjQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NvbnRleHQzMC5uZXh0ID0gMjI7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgZXJyb3JEYXRhID0gX2NvbnRleHQzMC5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBFcnIobmV3IEVycm9yKChlcnJvckRhdGEgPT0gbnVsbCB8fCAoX2Vycm9yRGF0YSRlcnJvciA9IGVycm9yRGF0YS5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9lcnJvckRhdGEkZXJyb3IubWVzc2FnZSkgfHwgXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGU6IFwiICsgcmVzcG9uc2Uuc3RhdHVzKSkpO1xuICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSAyNjtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0MzAuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdChcInJldHVyblwiLCBuZXcgT2socmVzcG9uc2VEYXRhLmZpbGUpKTtcbiAgICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgICAgX2NvbnRleHQzMC5wcmV2ID0gMzA7XG4gICAgICAgICAgICBfY29udGV4dDMwLnQwID0gX2NvbnRleHQzMFtcImNhdGNoXCJdKDEyKTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdChcInJldHVyblwiLCBuZXcgRXJyKG5ldyBFcnJvcihfY29udGV4dDMwLnQwIGluc3RhbmNlb2YgRXJyb3IgPyBfY29udGV4dDMwLnQwLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIikpKTtcbiAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTI5LCB0aGlzLCBbWzEyLCAzMF1dKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gdXBsb2FkRmlsZShfeDMzKSB7XG4gICAgICByZXR1cm4gX3VwbG9hZEZpbGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHVwbG9hZEZpbGU7XG4gIH0oKTtcbiAgX3Byb3RvLmRlbGV0ZUZpbGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZGVsZXRlRmlsZSA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMwKF9yZWYyMikge1xuICAgICAgdmFyIGZpbGVJRCwgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMCQoX2NvbnRleHQzMSkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMxLnByZXYgPSBfY29udGV4dDMxLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBmaWxlSUQgPSBfcmVmMjIuZmlsZUlEO1xuICAgICAgICAgICAgX2NvbnRleHQzMS5uZXh0ID0gMztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwiZmlsZXMvXCIgKyBmaWxlSURcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MzEuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLmFicnVwdChcInJldHVyblwiLCByZXMpO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzMCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGRlbGV0ZUZpbGUoX3gzNCkge1xuICAgICAgcmV0dXJuIF9kZWxldGVGaWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBkZWxldGVGaWxlO1xuICB9KCk7XG4gIF9wcm90by5nZXRBY3RpdmVNZW1iZXJFbWFpbHNJbldvcmtzcGFjZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9nZXRBY3RpdmVNZW1iZXJFbWFpbHNJbldvcmtzcGFjZSA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMxKCkge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMzEkKF9jb250ZXh0MzIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzMi5wcmV2ID0gX2NvbnRleHQzMi5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQzMi5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwibWVtYmVycy9lbWFpbHNcIixcbiAgICAgICAgICAgICAgcXVlcnk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGFjdGl2ZU9ubHk6IFwidHJ1ZVwiXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDMyLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDMyLm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShHZXRBY3RpdmVNZW1iZXJFbWFpbHNJbldvcmtzcGFjZVJlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDMyLnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDMyLm5leHQgPSA4O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMi5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUuZW1haWxzKSk7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTMxLCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gZ2V0QWN0aXZlTWVtYmVyRW1haWxzSW5Xb3Jrc3BhY2UoKSB7XG4gICAgICByZXR1cm4gX2dldEFjdGl2ZU1lbWJlckVtYWlsc0luV29ya3NwYWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBnZXRBY3RpdmVNZW1iZXJFbWFpbHNJbldvcmtzcGFjZTtcbiAgfSgpO1xuICBfcHJvdG8uZ2V0V29ya3NwYWNlVmVyaWZpZWREb21haW5zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2dldFdvcmtzcGFjZVZlcmlmaWVkRG9tYWlucyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMyKCkge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMzIkKF9jb250ZXh0MzMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzMy5wcmV2ID0gX2NvbnRleHQzMy5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwidmVyaWZpZWRfZG9tYWluc1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDMzLnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDMzLm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShHZXRXb3Jrc3BhY2VWZXJpZmllZERvbWFpbnNSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQzMy5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQzMy5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMy5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLnZlcmlmaWVkX2RvbWFpbnMpKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMzIsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VWZXJpZmllZERvbWFpbnMoKSB7XG4gICAgICByZXR1cm4gX2dldFdvcmtzcGFjZVZlcmlmaWVkRG9tYWlucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0V29ya3NwYWNlVmVyaWZpZWREb21haW5zO1xuICB9KCk7XG4gIF9wcm90by5nZXRXb3Jrc3BhY2VGZWF0dXJlRmxhZ3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0V29ya3NwYWNlRmVhdHVyZUZsYWdzID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMzMoKSB7XG4gICAgICB2YXIgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMyQoX2NvbnRleHQzNCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDM0LnByZXYgPSBfY29udGV4dDM0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBfY29udGV4dDM0Lm5leHQgPSAyO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJmZWF0dXJlX2ZsYWdzXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MzQuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MzQubmV4dCA9IDU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKEdldFdvcmtzcGFjZUZlYXR1cmVGbGFnc1Jlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDM0LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDM0Lm5leHQgPSA4O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM0LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUuZmVhdHVyZV9mbGFncykpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzMywgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGdldFdvcmtzcGFjZUZlYXR1cmVGbGFncygpIHtcbiAgICAgIHJldHVybiBfZ2V0V29ya3NwYWNlRmVhdHVyZUZsYWdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBnZXRXb3Jrc3BhY2VGZWF0dXJlRmxhZ3M7XG4gIH0oKTtcbiAgX3Byb3RvLnNlYXJjaERhdGFTb3VyY2VWaWV3cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWFyY2hEYXRhU291cmNlVmlld3MgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNChzZWFyY2hQYXJhbXMpIHtcbiAgICAgIHZhciByZXMsIHI7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM0JChfY29udGV4dDM1KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MzUucHJldiA9IF9jb250ZXh0MzUubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImRhdGFfc291cmNlX3ZpZXdzL3NlYXJjaFwiLFxuICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoUGFyYW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDM1LnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDM1Lm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShTZWFyY2hEYXRhU291cmNlVmlld3NSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQzNS5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQzNS5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzUuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmRhdGFfc291cmNlX3ZpZXdzKSk7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM1LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTM0LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gc2VhcmNoRGF0YVNvdXJjZVZpZXdzKF94MzUpIHtcbiAgICAgIHJldHVybiBfc2VhcmNoRGF0YVNvdXJjZVZpZXdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBzZWFyY2hEYXRhU291cmNlVmlld3M7XG4gIH0oKTtcbiAgX3Byb3RvLnBhdGNoRGF0YVNvdXJjZVZpZXcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcGF0Y2hEYXRhU291cmNlVmlldyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM1KGRhdGFTb3VyY2VWaWV3LCBwYXRjaCkge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMzUkKF9jb250ZXh0MzYpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzNi5wcmV2ID0gX2NvbnRleHQzNi5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQzNi5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJzcGFjZXMvXCIgKyBkYXRhU291cmNlVmlldy5zcGFjZUlkICsgXCIvZGF0YV9zb3VyY2Vfdmlld3MvXCIgKyBkYXRhU291cmNlVmlldy5zSWQsXG4gICAgICAgICAgICAgIGJvZHk6IHBhdGNoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDM2LnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDM2Lm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShEYXRhU291cmNlVmlld1Jlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDM2LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDM2Lm5leHQgPSA4O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM2LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUuZGF0YVNvdXJjZVZpZXcpKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzYuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMzUsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBwYXRjaERhdGFTb3VyY2VWaWV3KF94MzYsIF94MzcpIHtcbiAgICAgIHJldHVybiBfcGF0Y2hEYXRhU291cmNlVmlldy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0Y2hEYXRhU291cmNlVmlldztcbiAgfSgpO1xuICBfcHJvdG8uZXhwb3J0QXBwcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9leHBvcnRBcHBzID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMzYoX3JlZjIzKSB7XG4gICAgICB2YXIgYXBwU3BhY2VJZCwgcmVzLCByO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzNiQoX2NvbnRleHQzNykge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDM3LnByZXYgPSBfY29udGV4dDM3Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBhcHBTcGFjZUlkID0gX3JlZjIzLmFwcFNwYWNlSWQ7XG4gICAgICAgICAgICBfY29udGV4dDM3Lm5leHQgPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJzcGFjZXMvXCIgKyBhcHBTcGFjZUlkICsgXCIvYXBwcy9leHBvcnRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzNy5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQzNy5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoR2V0QXBwc1Jlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDM3LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDM3Lm5leHQgPSA5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM3LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNy5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUuYXBwcykpO1xuICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mzcuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMzYsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBleHBvcnRBcHBzKF94MzgpIHtcbiAgICAgIHJldHVybiBfZXhwb3J0QXBwcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gZXhwb3J0QXBwcztcbiAgfSgpO1xuICBfcHJvdG8uY2hlY2tBcHBzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2NoZWNrQXBwcyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM3KGFwcHMsIGFwcFNwYWNlSWQpIHtcbiAgICAgIHZhciByZXMsIHI7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM3JChfY29udGV4dDM4KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MzgucHJldiA9IF9jb250ZXh0MzgubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIF9jb250ZXh0MzgubmV4dCA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJzcGFjZXMvXCIgKyBhcHBTcGFjZUlkICsgXCIvYXBwcy9jaGVja1wiLFxuICAgICAgICAgICAgICBib2R5OiBhcHBzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDM4LnNlbnQ7XG4gICAgICAgICAgICBfY29udGV4dDM4Lm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShBcHBzQ2hlY2tSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByID0gX2NvbnRleHQzOC5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQzOC5uZXh0ID0gODtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOC5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzguYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLmFwcHMpKTtcbiAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mzguc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMzcsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBjaGVja0FwcHMoX3gzOSwgX3g0MCkge1xuICAgICAgcmV0dXJuIF9jaGVja0FwcHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrQXBwcztcbiAgfSgpO1xuICBfcHJvdG8uZ2V0U3BhY2VzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX2dldFNwYWNlcyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM4KCkge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMzgkKF9jb250ZXh0MzkpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzOS5wcmV2ID0gX2NvbnRleHQzOS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQzOS5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwic3BhY2VzXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mzkuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0MzkubmV4dCA9IDU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKEdldFNwYWNlc1Jlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDM5LnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDM5Lm5leHQgPSA4O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM5LmFicnVwdChcInJldHVyblwiLCByKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IE9rKHIudmFsdWUuc3BhY2VzKSk7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDM5LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTM4LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gZ2V0U3BhY2VzKCkge1xuICAgICAgcmV0dXJuIF9nZXRTcGFjZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFNwYWNlcztcbiAgfSgpO1xuICBfcHJvdG8uZ2V0TUNQU2VydmVyVmlld3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0TUNQU2VydmVyVmlld3MgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzOShzcGFjZUlkLCBpbmNsdWRlQXV0bykge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMzkkKF9jb250ZXh0NDApIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0MC5wcmV2ID0gX2NvbnRleHQ0MC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgaWYgKGluY2x1ZGVBdXRvID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgaW5jbHVkZUF1dG8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9jb250ZXh0NDAubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcInNwYWNlcy9cIiArIHNwYWNlSWQgKyBcIi9tY3Bfc2VydmVyX3ZpZXdzXCIsXG4gICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlQXV0bzogaW5jbHVkZUF1dG8udG9TdHJpbmcoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0MC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQ0MC5uZXh0ID0gNjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoR2V0TUNQU2VydmVyVmlld3NSZXNwb25zZVNjaGVtYSwgcmVzKTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByID0gX2NvbnRleHQ0MC5zZW50O1xuICAgICAgICAgICAgaWYgKCFyLmlzRXJyKCkpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQ0MC5uZXh0ID0gOTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MC5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDAuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLnZhbHVlLnNlcnZlclZpZXdzKSk7XG4gICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MC5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzOSwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGdldE1DUFNlcnZlclZpZXdzKF94NDEsIF94NDIpIHtcbiAgICAgIHJldHVybiBfZ2V0TUNQU2VydmVyVmlld3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldE1DUFNlcnZlclZpZXdzO1xuICB9KCk7XG4gIF9wcm90by5zZWFyY2hOb2RlcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWFyY2hOb2RlcyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQwKHNlYXJjaFBhcmFtcykge1xuICAgICAgdmFyIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNDAkKF9jb250ZXh0NDEpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0MS5wcmV2ID0gX2NvbnRleHQ0MS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX2NvbnRleHQ0MS5uZXh0ID0gMjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcInNlYXJjaFwiLFxuICAgICAgICAgICAgICBib2R5OiBzZWFyY2hQYXJhbXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NDEuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKFBvc3RXb3Jrc3BhY2VTZWFyY2hSZXNwb25zZUJvZHlTY2hlbWEsIHJlcyk7XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgciA9IF9jb250ZXh0NDEuc2VudDtcbiAgICAgICAgICAgIGlmICghci5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDg7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDEuYWJydXB0KFwicmV0dXJuXCIsIHIpO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZS5ub2RlcykpO1xuICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0MS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0MCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHNlYXJjaE5vZGVzKF94NDMpIHtcbiAgICAgIHJldHVybiBfc2VhcmNoTm9kZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlYXJjaE5vZGVzO1xuICB9KCk7XG4gIF9wcm90by5yZXRyeU1lc3NhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmV0cnlNZXNzYWdlID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNDEoX3JlZjI0KSB7XG4gICAgICB2YXIgY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZCwgX3JlZjI0JGJsb2NrZWRPbmx5LCBibG9ja2VkT25seSwgcXVlcnksIHJlcywgcjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNDEkKF9jb250ZXh0NDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0Mi5wcmV2ID0gX2NvbnRleHQ0Mi5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQgPSBfcmVmMjQuY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZCA9IF9yZWYyNC5tZXNzYWdlSWQsIF9yZWYyNCRibG9ja2VkT25seSA9IF9yZWYyNC5ibG9ja2VkT25seSwgYmxvY2tlZE9ubHkgPSBfcmVmMjQkYmxvY2tlZE9ubHkgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjI0JGJsb2NrZWRPbmx5O1xuICAgICAgICAgICAgcXVlcnkgPSBibG9ja2VkT25seSA/IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICBibG9ja2VkX29ubHk6IFwidHJ1ZVwiXG4gICAgICAgICAgICB9KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIF9jb250ZXh0NDIubmV4dCA9IDQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJhc3Npc3RhbnQvY29udmVyc2F0aW9ucy9cIiArIGNvbnZlcnNhdGlvbklkICsgXCIvbWVzc2FnZXMvXCIgKyBtZXNzYWdlSWQgKyBcIi9yZXRyeVwiLFxuICAgICAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NDIuc2VudDtcbiAgICAgICAgICAgIF9jb250ZXh0NDIubmV4dCA9IDc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0RnJvbVJlc3BvbnNlKFJldHJ5TWVzc2FnZVJlc3BvbnNlU2NoZW1hLCByZXMpO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIHIgPSBfY29udGV4dDQyLnNlbnQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcnIoKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDQyLm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5hYnJ1cHQoXCJyZXR1cm5cIiwgcik7XG4gICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQyLmFicnVwdChcInJldHVyblwiLCBuZXcgT2soci52YWx1ZS5tZXNzYWdlKSk7XG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0MSwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIHJldHJ5TWVzc2FnZShfeDQ0KSB7XG4gICAgICByZXR1cm4gX3JldHJ5TWVzc2FnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0cnlNZXNzYWdlO1xuICB9KCk7XG4gIF9wcm90by5fZmV0Y2hXaXRoRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZmV0Y2hXaXRoRXJyb3IyID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNDIodXJsLCBfdGVtcDMpIHtcbiAgICAgIHZhciBfcmVmMjUsIF9yZWYyNSRtZXRob2QsIG1ldGhvZCwgX3JlZjI1JGhlYWRlcnMsIGhlYWRlcnMsIGJvZHksIHNpZ25hbCwgX3JlZjI1JHN0cmVhbSwgc3RyZWFtLCBub3csIHJlcywgcmVzcG9uc2VCb2R5LCByZXNwb25zZSwgZHVyYXRpb24sIGVycjtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNDIkKF9jb250ZXh0NDMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0My5wcmV2ID0gX2NvbnRleHQ0My5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgX3JlZjI1ID0gX3RlbXAzID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wMywgX3JlZjI1JG1ldGhvZCA9IF9yZWYyNS5tZXRob2QsIG1ldGhvZCA9IF9yZWYyNSRtZXRob2QgPT09IHZvaWQgMCA/IFwiR0VUXCIgOiBfcmVmMjUkbWV0aG9kLCBfcmVmMjUkaGVhZGVycyA9IF9yZWYyNS5oZWFkZXJzLCBoZWFkZXJzID0gX3JlZjI1JGhlYWRlcnMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjI1JGhlYWRlcnMsIGJvZHkgPSBfcmVmMjUuYm9keSwgc2lnbmFsID0gX3JlZjI1LnNpZ25hbCwgX3JlZjI1JHN0cmVhbSA9IF9yZWYyNS5zdHJlYW0sIHN0cmVhbSA9IF9yZWYyNSRzdHJlYW0gPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjI1JHN0cmVhbTtcbiAgICAgICAgICAgIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBfY29udGV4dDQzLnByZXYgPSAyO1xuICAgICAgICAgICAgX2NvbnRleHQ0My5uZXh0ID0gNTtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXMgPSBfY29udGV4dDQzLnNlbnQ7XG4gICAgICAgICAgICBpZiAoIShzdHJlYW0gJiYgcmVzLmJvZHkpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDEwO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9jb250ZXh0NDMudDAgPSByZXMuYm9keTtcbiAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDEzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDEyO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy50ZXh0KCk7XG4gICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgIF9jb250ZXh0NDMudDAgPSBfY29udGV4dDQzLnNlbnQ7XG4gICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgIHJlc3BvbnNlQm9keSA9IF9jb250ZXh0NDMudDA7XG4gICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgc3RhdHVzOiByZXMuc3RhdHVzLFxuICAgICAgICAgICAgICB1cmw6IHJlcy51cmwsXG4gICAgICAgICAgICAgIGJvZHk6IHJlc3BvbnNlQm9keSxcbiAgICAgICAgICAgICAgb2s6IHJlcy5va1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQzLmFicnVwdChcInJldHVyblwiLCBuZXcgT2soe1xuICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gbm93XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgIF9jb250ZXh0NDMucHJldiA9IDE4O1xuICAgICAgICAgICAgX2NvbnRleHQ0My50MSA9IF9jb250ZXh0NDNbXCJjYXRjaFwiXSgyKTtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIG5vdztcbiAgICAgICAgICAgIGVyciA9IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ1bmV4cGVjdGVkX25ldHdvcmtfZXJyb3JcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJVbmV4cGVjdGVkIG5ldHdvcmsgZXJyb3IgZnJvbSBEdXN0QVBJOiBcIiArIF9jb250ZXh0NDMudDFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgICBkdXN0RXJyb3I6IGVycixcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgY29ubmVjdG9yc0Vycm9yOiBlcnIsXG4gICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDQzLnQxXG4gICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IEVycihlcnIpKTtcbiAgICAgICAgICBjYXNlIDI0OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQzLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTQyLCB0aGlzLCBbWzIsIDE4XV0pO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBfZmV0Y2hXaXRoRXJyb3IoX3g0NSwgX3g0Nikge1xuICAgICAgcmV0dXJuIF9mZXRjaFdpdGhFcnJvcjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9mZXRjaFdpdGhFcnJvcjtcbiAgfSgpIC8vIE1DUCBSZWxhdGVkLlxuICA7XG4gIF9wcm90by5nZXRCbG9ja2VkQWN0aW9ucyA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0QmxvY2tlZEFjdGlvbnMgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0MyhfcmVmMjYpIHtcbiAgICAgIHZhciBjb252ZXJzYXRpb25JZCwgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MyQoX2NvbnRleHQ0NCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQ0LnByZXYgPSBfY29udGV4dDQ0Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCA9IF9yZWYyNi5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgIF9jb250ZXh0NDQubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcImFzc2lzdGFudC9jb252ZXJzYXRpb25zL1wiICsgY29udmVyc2F0aW9uSWQgKyBcIi9hY3Rpb25zL2Jsb2NrZWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0NC5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDQuYWJydXB0KFwicmV0dXJuXCIsIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShCbG9ja2VkQWN0aW9uc1Jlc3BvbnNlU2NoZW1hLCByZXMpKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDQuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlNDMsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiBnZXRCbG9ja2VkQWN0aW9ucyhfeDQ3KSB7XG4gICAgICByZXR1cm4gX2dldEJsb2NrZWRBY3Rpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBnZXRCbG9ja2VkQWN0aW9ucztcbiAgfSgpO1xuICBfcHJvdG8udmFsaWRhdGVBY3Rpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdmFsaWRhdGVBY3Rpb24gPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0NChfcmVmMjcpIHtcbiAgICAgIHZhciBjb252ZXJzYXRpb25JZCwgbWVzc2FnZUlkLCBhY3Rpb25JZCwgYXBwcm92ZWQsIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNDQkKF9jb250ZXh0NDUpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0NS5wcmV2ID0gX2NvbnRleHQ0NS5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQgPSBfcmVmMjcuY29udmVyc2F0aW9uSWQsIG1lc3NhZ2VJZCA9IF9yZWYyNy5tZXNzYWdlSWQsIGFjdGlvbklkID0gX3JlZjI3LmFjdGlvbklkLCBhcHByb3ZlZCA9IF9yZWYyNy5hcHByb3ZlZDtcbiAgICAgICAgICAgIF9jb250ZXh0NDUubmV4dCA9IDM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJhc3Npc3RhbnQvY29udmVyc2F0aW9ucy9cIiArIGNvbnZlcnNhdGlvbklkICsgXCIvbWVzc2FnZXMvXCIgKyBtZXNzYWdlSWQgKyBcIi92YWxpZGF0ZS1hY3Rpb25cIixcbiAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGFjdGlvbklkOiBhY3Rpb25JZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogYXBwcm92ZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0NS5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDUuYWJydXB0KFwicmV0dXJuXCIsIHRoaXMuX3Jlc3VsdEZyb21SZXNwb25zZShWYWxpZGF0ZUFjdGlvblJlc3BvbnNlU2NoZW1hLCByZXMpKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDUuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlNDQsIHRoaXMpO1xuICAgIH0pKTtcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUFjdGlvbihfeDQ4KSB7XG4gICAgICByZXR1cm4gX3ZhbGlkYXRlQWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZUFjdGlvbjtcbiAgfSgpO1xuICBfcHJvdG8ucmVnaXN0ZXJNQ1BTZXJ2ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVnaXN0ZXJNQ1BTZXJ2ZXIgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0NShfcmVmMjgpIHtcbiAgICAgIHZhciBzZXJ2ZXJOYW1lLCBib2R5LCByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQ1JChfY29udGV4dDQ2KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NDYucHJldiA9IF9jb250ZXh0NDYubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHNlcnZlck5hbWUgPSBfcmVmMjguc2VydmVyTmFtZTtcbiAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgIHNlcnZlck5hbWU6IHNlcnZlck5hbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfY29udGV4dDQ2Lm5leHQgPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgIHBhdGg6IFwibWNwL3JlZ2lzdGVyXCIsXG4gICAgICAgICAgICAgIGJvZHk6IGJvZHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NDYuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ2LmFicnVwdChcInJldHVyblwiLCB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoUmVnaXN0ZXJNQ1BSZXNwb25zZVNjaGVtYSwgcmVzKSk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ2LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTQ1LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJNQ1BTZXJ2ZXIoX3g0OSkge1xuICAgICAgcmV0dXJuIF9yZWdpc3Rlck1DUFNlcnZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVnaXN0ZXJNQ1BTZXJ2ZXI7XG4gIH0oKTtcbiAgX3Byb3RvLmhlYXJ0YmVhdE1DUFNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9oZWFydGJlYXRNQ1BTZXJ2ZXIgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0NihfcmVmMjkpIHtcbiAgICAgIHZhciBzZXJ2ZXJJZCwgYm9keSwgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0NiQoX2NvbnRleHQ0Nykge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQ3LnByZXYgPSBfY29udGV4dDQ3Lm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBzZXJ2ZXJJZCA9IF9yZWYyOS5zZXJ2ZXJJZDtcbiAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgIHNlcnZlcklkOiBzZXJ2ZXJJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF9jb250ZXh0NDcubmV4dCA9IDQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgcGF0aDogXCJtY3AvaGVhcnRiZWF0XCIsXG4gICAgICAgICAgICAgIGJvZHk6IGJvZHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NDcuc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ3LmFicnVwdChcInJldHVyblwiLCB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoSGVhcnRiZWF0TUNQUmVzcG9uc2VTY2hlbWEsIHJlcykpO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Ny5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0NiwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGhlYXJ0YmVhdE1DUFNlcnZlcihfeDUwKSB7XG4gICAgICByZXR1cm4gX2hlYXJ0YmVhdE1DUFNlcnZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gaGVhcnRiZWF0TUNQU2VydmVyO1xuICB9KCk7XG4gIF9wcm90by5wb3N0TUNQUmVzdWx0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9wb3N0TUNQUmVzdWx0cyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQ3KF9yZWYzMCkge1xuICAgICAgdmFyIHJlc3VsdCwgc2VydmVySWQsIGJvZHksIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNDckKF9jb250ZXh0NDgpIHtcbiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0OC5wcmV2ID0gX2NvbnRleHQ0OC5uZXh0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmVzdWx0ID0gX3JlZjMwLnJlc3VsdCwgc2VydmVySWQgPSBfcmVmMzAuc2VydmVySWQ7XG4gICAgICAgICAgICBib2R5ID0ge1xuICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgc2VydmVySWQ6IHNlcnZlcklkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX2NvbnRleHQ0OC5uZXh0ID0gNDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBwYXRoOiBcIm1jcC9yZXN1bHRzXCIsXG4gICAgICAgICAgICAgIGJvZHk6IGJvZHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NDguc2VudDtcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ4LmFicnVwdChcInJldHVyblwiLCB0aGlzLl9yZXN1bHRGcm9tUmVzcG9uc2UoUG9zdE1DUFJlc3VsdHNSZXNwb25zZVNjaGVtYSwgcmVzKSk7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ4LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTQ3LCB0aGlzKTtcbiAgICB9KSk7XG4gICAgZnVuY3Rpb24gcG9zdE1DUFJlc3VsdHMoX3g1MSkge1xuICAgICAgcmV0dXJuIF9wb3N0TUNQUmVzdWx0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gcG9zdE1DUFJlc3VsdHM7XG4gIH0oKTtcbiAgX3Byb3RvLmdldE1DUFJlcXVlc3RzQ29ubmVjdGlvbkRldGFpbHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZ2V0TUNQUmVxdWVzdHNDb25uZWN0aW9uRGV0YWlscyA9IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQ4KF9yZWYzMSkge1xuICAgICAgdmFyIHNlcnZlcklkLCBsYXN0RXZlbnRJZCwgdXJsLCBwYXJhbXMsIGhlYWRlcnM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQ4JChfY29udGV4dDQ5KSB7XG4gICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NDkucHJldiA9IF9jb250ZXh0NDkubmV4dCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHNlcnZlcklkID0gX3JlZjMxLnNlcnZlcklkLCBsYXN0RXZlbnRJZCA9IF9yZWYzMS5sYXN0RXZlbnRJZDtcbiAgICAgICAgICAgIHVybCA9IHRoaXMuYXBpVXJsKCkgKyBcIi9hcGkvdjEvdy9cIiArIHRoaXMud29ya3NwYWNlSWQoKSArIFwiL21jcC9yZXF1ZXN0c1wiO1xuICAgICAgICAgICAgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhfZXh0ZW5kcyh7XG4gICAgICAgICAgICAgIHNlcnZlcklkOiBzZXJ2ZXJJZFxuICAgICAgICAgICAgfSwgbGFzdEV2ZW50SWQgPyB7XG4gICAgICAgICAgICAgIGxhc3RFdmVudElkOiBsYXN0RXZlbnRJZFxuICAgICAgICAgICAgfSA6IHt9KSk7XG4gICAgICAgICAgICBfY29udGV4dDQ5Lm5leHQgPSA1O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZUhlYWRlcnMoKTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBoZWFkZXJzID0gX2NvbnRleHQ0OS5zZW50O1xuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDkuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayh7XG4gICAgICAgICAgICAgIHVybDogdXJsICsgXCI/XCIgKyBwYXJhbXMudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0OS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU0OCwgdGhpcyk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIGdldE1DUFJlcXVlc3RzQ29ubmVjdGlvbkRldGFpbHMoX3g1Mikge1xuICAgICAgcmV0dXJuIF9nZXRNQ1BSZXF1ZXN0c0Nvbm5lY3Rpb25EZXRhaWxzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBnZXRNQ1BSZXF1ZXN0c0Nvbm5lY3Rpb25EZXRhaWxzO1xuICB9KCk7XG4gIF9wcm90by5fcmVzdWx0RnJvbVJlc3BvbnNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgX3Jlc3VsdEZyb21SZXNwb25zZTIgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0OShzY2hlbWEsIHJlcykge1xuICAgICAgdmFyIGVyciwgdGV4dCwgcmVzcG9uc2UsIHIsIHJFcnIsIF9lcnIsIF9lcnIyO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0OSQoX2NvbnRleHQ1MCkge1xuICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUwLnByZXYgPSBfY29udGV4dDUwLm5leHQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAoIXJlcy5pc0VycigpKSB7XG4gICAgICAgICAgICAgIF9jb250ZXh0NTAubmV4dCA9IDI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTAuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgaWYgKCEocmVzLnZhbHVlLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEzKSkge1xuICAgICAgICAgICAgICBfY29udGV4dDUwLm5leHQgPSA2O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVyciA9IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb250ZW50X3Rvb19sYXJnZVwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIllvdXIgcmVxdWVzdCBjb250ZW50IGlzIHRvbyBsYXJnZSwgcGxlYXNlIHRyeSBhZ2FpbiB3aXRoIGEgc2hvcnRlciBjb250ZW50LlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgZHVzdEVycm9yOiBlcnIsXG4gICAgICAgICAgICAgIHN0YXR1czogcmVzLnZhbHVlLnJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgdXJsOiByZXMudmFsdWUucmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogcmVzLnZhbHVlLmR1cmF0aW9uXG4gICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IEVycihlcnIpKTtcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBfY29udGV4dDUwLm5leHQgPSA4O1xuICAgICAgICAgICAgcmV0dXJuIHRleHRGcm9tUmVzcG9uc2UocmVzLnZhbHVlLnJlc3BvbnNlKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICB0ZXh0ID0gX2NvbnRleHQ1MC5zZW50O1xuICAgICAgICAgICAgX2NvbnRleHQ1MC5wcmV2ID0gOTtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICAgICAgICAgIHIgPSBzY2hlbWEuc2FmZVBhcnNlKHJlc3BvbnNlKTsgLy8gVGhpcyBhc3N1bWUgdGhhdCBzYWZlIHBhcnNpbmcgbWVhbnMgYSAyMDAgc3RhdHVzLlxuICAgICAgICAgICAgaWYgKCFyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQ1MC5uZXh0ID0gMTY7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTAuYWJydXB0KFwicmV0dXJuXCIsIG5ldyBPayhyLmRhdGEpKTtcbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgLy8gV2UgY291bGRuJ3QgcGFyc2UgdGhlIHJlc3BvbnNlIGRpcmVjdGx5LCBtYXliZSBpdCdzIGFuIGVycm9yXG4gICAgICAgICAgICByRXJyID0gQVBJRXJyb3JTY2hlbWEuc2FmZVBhcnNlKHJlc3BvbnNlW1wiZXJyb3JcIl0pO1xuICAgICAgICAgICAgaWYgKCFyRXJyLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgX2NvbnRleHQ1MC5uZXh0ID0gMjI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IHBhcnNlZCBhbiBlcnJvclxuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgZHVzdEVycm9yOiByRXJyLmRhdGEsXG4gICAgICAgICAgICAgIHN0YXR1czogcmVzLnZhbHVlLnJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgdXJsOiByZXMudmFsdWUucmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogcmVzLnZhbHVlLmR1cmF0aW9uXG4gICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IEVycihyRXJyLmRhdGEpKTtcbiAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgLy8gVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQgKG5laXRoZXIgYW4gZXJyb3Igbm9yIGEgdmFsaWQgcmVzcG9uc2UpXG4gICAgICAgICAgICBfZXJyID0ge1xuICAgICAgICAgICAgICB0eXBlOiBcInVuZXhwZWN0ZWRfcmVzcG9uc2VfZm9ybWF0XCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQgZnJvbSBEdXN0QVBJIGNhbGxpbmcgXCIgKyAocmVzLnZhbHVlLnJlc3BvbnNlLnVybCArIFwiIDogXCIgKyByLmVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgZHVzdEVycm9yOiBfZXJyLFxuICAgICAgICAgICAgICBwYXJzZUVycm9yOiByLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgIHJhd1RleHQ6IHRleHQsXG4gICAgICAgICAgICAgIHN0YXR1czogcmVzLnZhbHVlLnJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgdXJsOiByZXMudmFsdWUucmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogcmVzLnZhbHVlLmR1cmF0aW9uXG4gICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IEVycihfZXJyKSk7XG4gICAgICAgICAgY2FzZSAyNTpcbiAgICAgICAgICAgIF9jb250ZXh0NTAubmV4dCA9IDMyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgIF9jb250ZXh0NTAucHJldiA9IDI3O1xuICAgICAgICAgICAgX2NvbnRleHQ1MC50MCA9IF9jb250ZXh0NTBbXCJjYXRjaFwiXSg5KTtcbiAgICAgICAgICAgIF9lcnIyID0ge1xuICAgICAgICAgICAgICB0eXBlOiBcInVuZXhwZWN0ZWRfcmVzcG9uc2VfZm9ybWF0XCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbCB0byBwYXJzZSByZXNwb25zZSBmcm9tIER1c3RBUEkgY2FsbGluZyBcIiArIChyZXMudmFsdWUucmVzcG9uc2UudXJsICsgXCIgOiBcIiArIF9jb250ZXh0NTAudDApXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgZHVzdEVycm9yOiBfZXJyMixcbiAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0NTAudDAsXG4gICAgICAgICAgICAgIHJhd1RleHQ6IHRleHQsXG4gICAgICAgICAgICAgIHN0YXR1czogcmVzLnZhbHVlLnJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgdXJsOiByZXMudmFsdWUucmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogcmVzLnZhbHVlLmR1cmF0aW9uXG4gICAgICAgICAgICB9LCBcIkR1c3RBUEkgZXJyb3JcIik7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1MC5hYnJ1cHQoXCJyZXR1cm5cIiwgbmV3IEVycihfZXJyMikpO1xuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NTAuc3RvcCgpO1xuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlNDksIHRoaXMsIFtbOSwgMjddXSk7XG4gICAgfSkpO1xuICAgIGZ1bmN0aW9uIF9yZXN1bHRGcm9tUmVzcG9uc2UoX3g1MywgX3g1NCkge1xuICAgICAgcmV0dXJuIF9yZXN1bHRGcm9tUmVzcG9uc2UyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0RnJvbVJlc3BvbnNlO1xuICB9KCk7XG4gIHJldHVybiBEdXN0QVBJO1xufSgpO1xuXG5leHBvcnQgeyBBUElFcnJvclNjaGVtYSwgQWN0aW9uQXBwcm92YWxTdGF0ZVNjaGVtYSwgQWdlbnRDb25maWd1cmF0aW9uVmlld1NjaGVtYSwgQXBwc0NoZWNrUmVxdWVzdFNjaGVtYSwgQXBwc0NoZWNrUmVzcG9uc2VTY2hlbWEsIEJhc2VTZWFyY2hCb2R5U2NoZW1hLCBCbG9ja2VkQWN0aW9uc1Jlc3BvbnNlU2NoZW1hLCBCcm93c2VSZXN1bHRSZXNvdXJjZVNjaGVtYSwgQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMsIENhbmNlbE1lc3NhZ2VHZW5lcmF0aW9uUmVxdWVzdFNjaGVtYSwgQ2FuY2VsTWVzc2FnZUdlbmVyYXRpb25SZXNwb25zZVNjaGVtYSwgQ2xpZW50U2lkZU1DUFNlcnZlck5hbWVTY2hlbWEsIENvbnRlbnROb2RlU2NoZW1hLCBDb250ZW50Tm9kZVR5cGVTY2hlbWEsIENvbnRlbnROb2RlV2l0aFBhcmVudFNjaGVtYSwgQ29udGVudE5vZGVzVmlld1R5cGVTY2hlbWEsIENvbnZlcnNhdGlvblNjaGVtYSwgQ29yZUFQSUVycm9yU2NoZW1hLCBDb3JlQVBJVG9rZW5UeXBlU2NoZW1hLCBDcmVhdGVDb252ZXJzYXRpb25SZXNwb25zZVNjaGVtYSwgQ3JlYXRlR2VuZXJpY0FnZW50Q29uZmlndXJhdGlvblJlcXVlc3RTY2hlbWEsIENyZWF0ZUdlbmVyaWNBZ2VudENvbmZpZ3VyYXRpb25SZXNwb25zZVNjaGVtYSwgREFUQV9TT1VSQ0VfRk9MREVSX1NQUkVBRFNIRUVUX01JTUVfVFlQRSwgREFUQV9TT1VSQ0VfTUlNRV9UWVBFLCBEQVRBX1dBUkVIT1VTRV9NSU1FX1RZUEUsIERhdGFTb3VyY2VDb250ZW50Tm9kZVNjaGVtYSwgRGF0YVNvdXJjZVNlYXJjaFF1ZXJ5U2NoZW1hLCBEYXRhU291cmNlVmlld0NvbnRlbnROb2RlU2NoZW1hLCBEYXRhU291cmNlVmlld1Jlc3BvbnNlU2NoZW1hLCBEYXRhYmFzZVNjaGVtYVJlc291cmNlU2NoZW1hLCBEZWxldGVGb2xkZXJSZXNwb25zZVNjaGVtYSwgRHVzdEFQSSwgRHVzdEFwcENvbmZpZ1R5cGVTY2hlbWEsIER1c3RBcHBSdW5CbG9ja0V4ZWN1dGlvbkV2ZW50U2NoZW1hLCBEdXN0QXBwUnVuQmxvY2tTdGF0dXNFdmVudFNjaGVtYSwgRHVzdEFwcFJ1bkVycm9yZWRFdmVudFNjaGVtYSwgRHVzdEFwcFJ1bkZpbmFsRXZlbnRTY2hlbWEsIER1c3RBcHBSdW5GdW5jdGlvbkNhbGxBcmd1bWVudHNUb2tlbnNFdmVudFNjaGVtYSwgRHVzdEFwcFJ1bkZ1bmN0aW9uQ2FsbEV2ZW50U2NoZW1hLCBEdXN0QXBwUnVuUmVhc29uaW5nSXRlbUV2ZW50U2NoZW1hLCBEdXN0QXBwUnVuUmVhc29uaW5nVG9rZW5zRXZlbnRTY2hlbWEsIER1c3RBcHBSdW5SdW5TdGF0dXNFdmVudFNjaGVtYSwgRHVzdEFwcFJ1blRva2Vuc0V2ZW50U2NoZW1hLCBEdXN0QXBwVHlwZVNjaGVtYSwgRHVzdE1jcFNlcnZlclRyYW5zcG9ydCwgRXJyLCBFeGFtcGxlUm93c1Jlc291cmNlU2NoZW1hLCBFeHRyYWN0UXVlcnlSZXNvdXJjZVNjaGVtYSwgRXh0cmFjdFJlc3VsdFJlc291cmNlU2NoZW1hLCBGaWxlVHlwZVNjaGVtYSwgRmlsZVR5cGVXaXRoVXBsb2FkVXJsU2NoZW1hLCBGaWxlVXBsb2FkUmVxdWVzdFJlc3BvbnNlU2NoZW1hLCBGaWxlVXBsb2FkVXJsUmVxdWVzdFNjaGVtYSwgRmlsZVVwbG9hZGVkUmVxdWVzdFJlc3BvbnNlU2NoZW1hLCBHZW5lcmF0aW9uVG9rZW5zRXZlbnRTY2hlbWEsIEdldEFjdGl2ZU1lbWJlckVtYWlsc0luV29ya3NwYWNlUmVzcG9uc2VTY2hlbWEsIEdldEFnZW50Q29uZmlndXJhdGlvbnNSZXNwb25zZVNjaGVtYSwgR2V0QXBwc1Jlc3BvbnNlU2NoZW1hLCBHZXRDb252ZXJzYXRpb25SZXNwb25zZVNjaGVtYSwgR2V0Q29udmVyc2F0aW9uc1Jlc3BvbnNlU2NoZW1hLCBHZXREYXRhU291cmNlc1Jlc3BvbnNlU2NoZW1hLCBHZXRGZWVkYmFja3NSZXNwb25zZVNjaGVtYSwgR2V0Rm9sZGVyUmVzcG9uc2VTY2hlbWEsIEdldEZvbGRlcnNSZXNwb25zZVNjaGVtYSwgR2V0TUNQU2VydmVyVmlld3NRdWVyeVNjaGVtYSwgR2V0TUNQU2VydmVyVmlld3NSZXNwb25zZVNjaGVtYSwgR2V0TUNQVmlld3NSZXF1ZXN0U2NoZW1hLCBHZXRPclBhdGNoQWdlbnRDb25maWd1cmF0aW9uUmVzcG9uc2VTY2hlbWEsIEdldFNwYWNlc1Jlc3BvbnNlU2NoZW1hLCBHZXRXb3Jrc3BhY2VGZWF0dXJlRmxhZ3NSZXNwb25zZVNjaGVtYSwgR2V0V29ya3NwYWNlVXNhZ2VSZXF1ZXN0U2NoZW1hLCBHZXRXb3Jrc3BhY2VWZXJpZmllZERvbWFpbnNSZXNwb25zZVNjaGVtYSwgSGVhcnRiZWF0TUNQUmVzcG9uc2VTY2hlbWEsIElOQ0xVREFCTEVfSU5URVJOQUxfQ09OVEVOVF9OT0RFX01JTUVfVFlQRVMsIElOQ0xVREFCTEVfSU5URVJOQUxfTUlNRV9UWVBFU19WQUxVRVMsIElOVEVSTkFMX01JTUVfVFlQRVMsIElOVEVSTkFMX01JTUVfVFlQRVNfVkFMVUVTLCBJbXBvcnRBcHBzUmVzcG9uc2VTY2hlbWEsIEluY2x1ZGVRdWVyeVJlc291cmNlU2NoZW1hLCBJbmNsdWRlUmVzdWx0UmVzb3VyY2VTY2hlbWEsIE1DUFByb2dyZXNzTm90aWZpY2F0aW9uU2NoZW1hLCBNZVJlc3BvbnNlU2NoZW1hLCBOb3RpZmljYXRpb25DYW52YXNGaWxlQ29udGVudFNjaGVtYSwgT2ssIFBhdGNoQWdlbnRDb25maWd1cmF0aW9uUmVxdWVzdFNjaGVtYSwgUGF0Y2hEYXRhU291cmNlVmlld1JlcXVlc3RTY2hlbWEsIFBvc3RBcHBzUmVxdWVzdFNjaGVtYSwgUG9zdENvbnRlbnRGcmFnbWVudFJlc3BvbnNlU2NoZW1hLCBQb3N0Q29udmVyc2F0aW9uc1Jlc3BvbnNlU2NoZW1hLCBQb3N0RGF0YVNvdXJjZURvY3VtZW50UmVxdWVzdFNjaGVtYSwgUG9zdE1DUFJlcXVlc3RzUmVxdWVzdFF1ZXJ5U2NoZW1hLCBQb3N0TUNQUmVzdWx0c1Jlc3BvbnNlU2NoZW1hLCBQb3N0TWVzc2FnZUZlZWRiYWNrUmVzcG9uc2VTY2hlbWEsIFBvc3RTcGFjZU1lbWJlcnNSZXF1ZXN0Qm9keVNjaGVtYSwgUG9zdFRhYmxlUGFyZW50c1JlcXVlc3RTY2hlbWEsIFBvc3RVc2VyTWVzc2FnZVJlc3BvbnNlU2NoZW1hLCBQb3N0V29ya3NwYWNlU2VhcmNoUmVzcG9uc2VCb2R5U2NoZW1hLCBQcm9ncmVzc05vdGlmaWNhdGlvbkNvbnRlbnRTY2hlbWEsIFByb2dyZXNzTm90aWZpY2F0aW9uT3V0cHV0U2NoZW1hLCBQdWJsaWNDb250ZW50RnJhZ21lbnRXaXRoQ29udGVudFNjaGVtYSwgUHVibGljQ29udGVudEZyYWdtZW50V2l0aEZpbGVJZFNjaGVtYSwgUHVibGljSGVhcnRiZWF0TUNQUmVxdWVzdEJvZHlTY2hlbWEsIFB1YmxpY1Bvc3RDb250ZW50RnJhZ21lbnRSZXF1ZXN0Qm9keVNjaGVtYSwgUHVibGljUG9zdENvbnZlcnNhdGlvbnNSZXF1ZXN0Qm9keVNjaGVtYSwgUHVibGljUG9zdEVkaXRNZXNzYWdlc1JlcXVlc3RCb2R5U2NoZW1hLCBQdWJsaWNQb3N0TUNQUmVzdWx0c1JlcXVlc3RCb2R5U2NoZW1hLCBQdWJsaWNQb3N0TWVzc2FnZUZlZWRiYWNrUmVxdWVzdEJvZHlTY2hlbWEsIFB1YmxpY1Bvc3RNZXNzYWdlc1JlcXVlc3RCb2R5U2NoZW1hLCBQdWJsaWNSZWdpc3Rlck1DUFJlcXVlc3RCb2R5U2NoZW1hLCBRdWVyeVdyaXRpbmdJbnN0cnVjdGlvbnNSZXNvdXJjZVNjaGVtYSwgUmVhc29uaW5nU3VjY2Vzc091dHB1dFNjaGVtYSwgUmVnaXN0ZXJNQ1BSZXNwb25zZVNjaGVtYSwgUmV0cmlldmFsRG9jdW1lbnRUeXBlU2NoZW1hLCBSZXRyeU1lc3NhZ2VSZXNwb25zZVNjaGVtYSwgUnVuQWdlbnRRdWVyeVJlc291cmNlU2NoZW1hLCBSdW5BZ2VudFJlc3VsdFJlc291cmNlU2NoZW1hLCBSdW5BcHBSZXNwb25zZVNjaGVtYSwgU2VhcmNoRGF0YVNvdXJjZVZpZXdzUmVxdWVzdFNjaGVtYSwgU2VhcmNoRGF0YVNvdXJjZVZpZXdzUmVzcG9uc2VTY2hlbWEsIFNlYXJjaFF1ZXJ5UmVzb3VyY2VTY2hlbWEsIFNlYXJjaFJlcXVlc3RCb2R5U2NoZW1hLCBTZWFyY2hSZXN1bHRSZXNvdXJjZVNjaGVtYSwgU2VhcmNoV2FybmluZ0NvZGVTY2hlbWEsIFRPT0xfUlVOTklOR19MQUJFTCwgVG9rZW5pemVSZXNwb25zZVNjaGVtYSwgVG9vbHNldHNSZXN1bHRSZXNvdXJjZVNjaGVtYSwgVXBzZXJ0RGF0YVNvdXJjZUZvbGRlclJlcXVlc3RTY2hlbWEsIFVwc2VydERhdGFiYXNlVGFibGVSZXF1ZXN0U2NoZW1hLCBVcHNlcnRGb2xkZXJSZXNwb25zZVNjaGVtYSwgVXBzZXJ0VGFibGVGcm9tQ3N2UmVxdWVzdFNjaGVtYSwgVXBzZXJ0VGFibGVSb3dzUmVxdWVzdFNjaGVtYSwgVmFsaWRhdGVBY3Rpb25SZXF1ZXN0Qm9keVNjaGVtYSwgVmFsaWRhdGVBY3Rpb25SZXNwb25zZVNjaGVtYSwgVmFsaWRhdGVNZW1iZXJSZXF1ZXN0U2NoZW1hLCBXYXJuaW5nUmVzb3VyY2VTY2hlbWEsIFdlYnNlYXJjaFF1ZXJ5UmVzb3VyY2VTY2hlbWEsIFdlYnNlYXJjaFJlc3VsdFJlc291cmNlU2NoZW1hLCBXZWJzZWFyY2hSZXN1bHRTY2hlbWEsIFdvcmtzcGFjZURvbWFpblNjaGVtYSwgYXNzZXJ0TmV2ZXIsIGdldFByb3ZpZGVyRnJvbVJldHJpZXZlZERvY3VtZW50LCBnZXRUaXRsZUZyb21SZXRyaWV2ZWREb2N1bWVudCwgaXNBZ2VudE1lbnRpb24sIGlzQnJvd3NlUmVzdWx0UmVzb3VyY2VUeXBlLCBpc0NhbnZhc0ZpbGVDb250ZW50T3V0cHV0LCBpc0Nvbm5lY3RvclByb3ZpZGVyLCBpc0Nvbm5lY3RvcnNBUElFcnJvciwgaXNEYXRhYmFzZVNjaGVtYVJlc291cmNlVHlwZSwgaXNEdXN0TWltZVR5cGUsIGlzRXhhbXBsZVJvd3NSZXNvdXJjZVR5cGUsIGlzRXh0cmFjdFF1ZXJ5UmVzb3VyY2VUeXBlLCBpc0V4dHJhY3RSZXN1bHRSZXNvdXJjZVR5cGUsIGlzRm9sZGVyLCBpc0ltYWdlUHJvZ3Jlc3NPdXRwdXQsIGlzSW5jbHVkYWJsZUludGVybmFsTWltZVR5cGUsIGlzSW5jbHVkZVF1ZXJ5UmVzb3VyY2VUeXBlLCBpc0luY2x1ZGVSZXN1bHRSZXNvdXJjZVR5cGUsIGlzTUNQUHJvZ3Jlc3NOb3RpZmljYXRpb25UeXBlLCBpc01DUFNlcnZlclBlcnNvbmFsQXV0aFJlcXVpcmVkRXJyb3IsIGlzUXVlcnlXcml0aW5nSW5zdHJ1Y3Rpb25zUmVzb3VyY2VUeXBlLCBpc1JlYXNvbmluZ1N1Y2Nlc3NPdXRwdXQsIGlzUmVzb3VyY2VXaXRoTmFtZSwgaXNSdW5BZ2VudFF1ZXJ5UmVzb3VyY2VUeXBlLCBpc1J1bkFnZW50UmVzdWx0UmVzb3VyY2VUeXBlLCBpc1NlYXJjaFF1ZXJ5UmVzb3VyY2VUeXBlLCBpc1NlYXJjaFJlc3VsdFJlc291cmNlVHlwZSwgaXNTcWxRdWVyeU91dHB1dCwgaXNTdXBwb3J0ZWRGaWxlQ29udGVudFR5cGUsIGlzU3VwcG9ydGVkSW1hZ2VDb250ZW50VHlwZSwgaXNTdXBwb3J0ZWRQbGFpblRleHRDb250ZW50VHlwZSwgaXNUaGlua2luZ091dHB1dCwgaXNUb29sR2VuZXJhdGVkRmlsZSwgaXNUb29sc2V0c1Jlc3VsdFJlc291cmNlVHlwZSwgaXNXYXJuaW5nUmVzb3VyY2VUeXBlLCBpc1dlYnNlYXJjaFF1ZXJ5UmVzb3VyY2VUeXBlLCBpc1dlYnNlYXJjaFJlc3VsdFJlc291cmNlVHlwZSwgaXNXZWJzaXRlLCByZW1vdmVOdWxscywgc3VwcG9ydGVkRmlsZUV4dGVuc2lvbnMsIHN1cHBvcnRlZEltYWdlRmlsZUZvcm1hdHMsIHN1cHBvcnRlZE90aGVyRmlsZUZvcm1hdHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@dust-tt/client/dist/client.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@dust-tt/client/node_modules/zod/lib/index.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@dust-tt/client/node_modules/zod/lib/index.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BRAND: () => (/* binding */ BRAND),\n/* harmony export */   DIRTY: () => (/* binding */ DIRTY),\n/* harmony export */   EMPTY_PATH: () => (/* binding */ EMPTY_PATH),\n/* harmony export */   INVALID: () => (/* binding */ INVALID),\n/* harmony export */   NEVER: () => (/* binding */ NEVER),\n/* harmony export */   OK: () => (/* binding */ OK),\n/* harmony export */   ParseStatus: () => (/* binding */ ParseStatus),\n/* harmony export */   Schema: () => (/* binding */ ZodType),\n/* harmony export */   ZodAny: () => (/* binding */ ZodAny),\n/* harmony export */   ZodArray: () => (/* binding */ ZodArray),\n/* harmony export */   ZodBigInt: () => (/* binding */ ZodBigInt),\n/* harmony export */   ZodBoolean: () => (/* binding */ ZodBoolean),\n/* harmony export */   ZodBranded: () => (/* binding */ ZodBranded),\n/* harmony export */   ZodCatch: () => (/* binding */ ZodCatch),\n/* harmony export */   ZodDate: () => (/* binding */ ZodDate),\n/* harmony export */   ZodDefault: () => (/* binding */ ZodDefault),\n/* harmony export */   ZodDiscriminatedUnion: () => (/* binding */ ZodDiscriminatedUnion),\n/* harmony export */   ZodEffects: () => (/* binding */ ZodEffects),\n/* harmony export */   ZodEnum: () => (/* binding */ ZodEnum),\n/* harmony export */   ZodError: () => (/* binding */ ZodError),\n/* harmony export */   ZodFirstPartyTypeKind: () => (/* binding */ ZodFirstPartyTypeKind),\n/* harmony export */   ZodFunction: () => (/* binding */ ZodFunction),\n/* harmony export */   ZodIntersection: () => (/* binding */ ZodIntersection),\n/* harmony export */   ZodIssueCode: () => (/* binding */ ZodIssueCode),\n/* harmony export */   ZodLazy: () => (/* binding */ ZodLazy),\n/* harmony export */   ZodLiteral: () => (/* binding */ ZodLiteral),\n/* harmony export */   ZodMap: () => (/* binding */ ZodMap),\n/* harmony export */   ZodNaN: () => (/* binding */ ZodNaN),\n/* harmony export */   ZodNativeEnum: () => (/* binding */ ZodNativeEnum),\n/* harmony export */   ZodNever: () => (/* binding */ ZodNever),\n/* harmony export */   ZodNull: () => (/* binding */ ZodNull),\n/* harmony export */   ZodNullable: () => (/* binding */ ZodNullable),\n/* harmony export */   ZodNumber: () => (/* binding */ ZodNumber),\n/* harmony export */   ZodObject: () => (/* binding */ ZodObject),\n/* harmony export */   ZodOptional: () => (/* binding */ ZodOptional),\n/* harmony export */   ZodParsedType: () => (/* binding */ ZodParsedType),\n/* harmony export */   ZodPipeline: () => (/* binding */ ZodPipeline),\n/* harmony export */   ZodPromise: () => (/* binding */ ZodPromise),\n/* harmony export */   ZodReadonly: () => (/* binding */ ZodReadonly),\n/* harmony export */   ZodRecord: () => (/* binding */ ZodRecord),\n/* harmony export */   ZodSchema: () => (/* binding */ ZodType),\n/* harmony export */   ZodSet: () => (/* binding */ ZodSet),\n/* harmony export */   ZodString: () => (/* binding */ ZodString),\n/* harmony export */   ZodSymbol: () => (/* binding */ ZodSymbol),\n/* harmony export */   ZodTransformer: () => (/* binding */ ZodEffects),\n/* harmony export */   ZodTuple: () => (/* binding */ ZodTuple),\n/* harmony export */   ZodType: () => (/* binding */ ZodType),\n/* harmony export */   ZodUndefined: () => (/* binding */ ZodUndefined),\n/* harmony export */   ZodUnion: () => (/* binding */ ZodUnion),\n/* harmony export */   ZodUnknown: () => (/* binding */ ZodUnknown),\n/* harmony export */   ZodVoid: () => (/* binding */ ZodVoid),\n/* harmony export */   addIssueToContext: () => (/* binding */ addIssueToContext),\n/* harmony export */   any: () => (/* binding */ anyType),\n/* harmony export */   array: () => (/* binding */ arrayType),\n/* harmony export */   bigint: () => (/* binding */ bigIntType),\n/* harmony export */   boolean: () => (/* binding */ booleanType),\n/* harmony export */   coerce: () => (/* binding */ coerce),\n/* harmony export */   custom: () => (/* binding */ custom),\n/* harmony export */   date: () => (/* binding */ dateType),\n/* harmony export */   datetimeRegex: () => (/* binding */ datetimeRegex),\n/* harmony export */   \"default\": () => (/* binding */ z),\n/* harmony export */   defaultErrorMap: () => (/* binding */ errorMap),\n/* harmony export */   discriminatedUnion: () => (/* binding */ discriminatedUnionType),\n/* harmony export */   effect: () => (/* binding */ effectsType),\n/* harmony export */   \"enum\": () => (/* binding */ enumType),\n/* harmony export */   \"function\": () => (/* binding */ functionType),\n/* harmony export */   getErrorMap: () => (/* binding */ getErrorMap),\n/* harmony export */   getParsedType: () => (/* binding */ getParsedType),\n/* harmony export */   \"instanceof\": () => (/* binding */ instanceOfType),\n/* harmony export */   intersection: () => (/* binding */ intersectionType),\n/* harmony export */   isAborted: () => (/* binding */ isAborted),\n/* harmony export */   isAsync: () => (/* binding */ isAsync),\n/* harmony export */   isDirty: () => (/* binding */ isDirty),\n/* harmony export */   isValid: () => (/* binding */ isValid),\n/* harmony export */   late: () => (/* binding */ late),\n/* harmony export */   lazy: () => (/* binding */ lazyType),\n/* harmony export */   literal: () => (/* binding */ literalType),\n/* harmony export */   makeIssue: () => (/* binding */ makeIssue),\n/* harmony export */   map: () => (/* binding */ mapType),\n/* harmony export */   nan: () => (/* binding */ nanType),\n/* harmony export */   nativeEnum: () => (/* binding */ nativeEnumType),\n/* harmony export */   never: () => (/* binding */ neverType),\n/* harmony export */   \"null\": () => (/* binding */ nullType),\n/* harmony export */   nullable: () => (/* binding */ nullableType),\n/* harmony export */   number: () => (/* binding */ numberType),\n/* harmony export */   object: () => (/* binding */ objectType),\n/* harmony export */   objectUtil: () => (/* binding */ objectUtil),\n/* harmony export */   oboolean: () => (/* binding */ oboolean),\n/* harmony export */   onumber: () => (/* binding */ onumber),\n/* harmony export */   optional: () => (/* binding */ optionalType),\n/* harmony export */   ostring: () => (/* binding */ ostring),\n/* harmony export */   pipeline: () => (/* binding */ pipelineType),\n/* harmony export */   preprocess: () => (/* binding */ preprocessType),\n/* harmony export */   promise: () => (/* binding */ promiseType),\n/* harmony export */   quotelessJson: () => (/* binding */ quotelessJson),\n/* harmony export */   record: () => (/* binding */ recordType),\n/* harmony export */   set: () => (/* binding */ setType),\n/* harmony export */   setErrorMap: () => (/* binding */ setErrorMap),\n/* harmony export */   strictObject: () => (/* binding */ strictObjectType),\n/* harmony export */   string: () => (/* binding */ stringType),\n/* harmony export */   symbol: () => (/* binding */ symbolType),\n/* harmony export */   transformer: () => (/* binding */ effectsType),\n/* harmony export */   tuple: () => (/* binding */ tupleType),\n/* harmony export */   undefined: () => (/* binding */ undefinedType),\n/* harmony export */   union: () => (/* binding */ unionType),\n/* harmony export */   unknown: () => (/* binding */ unknownType),\n/* harmony export */   util: () => (/* binding */ util),\n/* harmony export */   \"void\": () => (/* binding */ voidType),\n/* harmony export */   z: () => (/* binding */ z)\n/* harmony export */ });\nvar util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === errorMap ? undefined : errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" &&\n                (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nvar _ZodEnum_cache, _ZodNativeEnum_cache;\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        var _a, _b;\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message !== null && message !== void 0 ? message : ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        var _a, _b;\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if ((_b = (_a = err === null || err === void 0 ? void 0 : err.message) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === null || _b === void 0 ? void 0 : _b.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    // let regex = `\\\\d{2}:\\\\d{2}:\\\\d{2}`;\n    let regex = `([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d`;\n    if (args.precision) {\n        regex = `${regex}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        regex = `${regex}(\\\\.\\\\d+)?`;\n    }\n    return regex;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nfunction datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (!decoded.typ || !decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a, _b;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            local: (_b = options === null || options === void 0 ? void 0 : options.local) !== null && _b !== void 0 ? _b : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch (_a) {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\").has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\n_ZodEnum_cache = new WeakMap();\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    constructor() {\n        super(...arguments);\n        _ZodNativeEnum_cache.set(this, void 0);\n    }\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\")) {\n            __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)), \"f\");\n        }\n        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\").has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\n_ZodNativeEnum_cache = new WeakMap();\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nclass ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result)\n            ? result.then((data) => freeze(data))\n            : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\"\n        ? params(data)\n        : typeof params === \"string\"\n            ? { message: params }\n            : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nfunction custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    var _a, _b;\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = (_b = (_a = params.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    datetimeRegex: datetimeRegex,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    ZodReadonly: ZodReadonly,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGR1c3QtdHQvY2xpZW50L25vZGVfbW9kdWxlcy96b2QvbGliL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxJQUFJO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0JBQW9CO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBLDBEQUEwRDtBQUMxRCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLE1BQU07QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxlQUFlLGFBQWEsZUFBZTtBQUNqRjtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsMkRBQTJEO0FBQ3BIO0FBQ0E7QUFDQSx3REFBd0Qsa0NBQWtDO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsK0JBQStCO0FBQzlGO0FBQ0E7QUFDQSxzREFBc0QsK0JBQStCLGNBQWMsZUFBZTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQSxxQ0FBcUMsU0FBUyxvREFBb0QsMEJBQTBCO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSw0QkFBNEI7QUFDN0Y7QUFDQTtBQUNBLCtEQUErRCwwQkFBMEI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGlCQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxzRUFBc0UsRUFBRSxlQUFlO0FBQ3ZJO0FBQ0EsaURBQWlELGlFQUFpRSxFQUFFLGVBQWU7QUFDbkk7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEVBQUUsY0FBYztBQUMxRDtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsRUFBRSxnQ0FBZ0M7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxxRUFBcUUsRUFBRSxlQUFlO0FBQ3RJO0FBQ0EsaURBQWlELGlFQUFpRSxFQUFFLGVBQWU7QUFDbkk7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLEVBQUUsY0FBYztBQUN2RDtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsRUFBRSxjQUFjO0FBQ3ZEO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxFQUFFLGdDQUFnQztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxpQkFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksbUNBQW1DO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxrQ0FBa0M7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIsd0JBQXdCO0FBQ3BELHlCQUF5Qix3QkFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0VBQXNFLFVBQVU7QUFDaEY7QUFDQSxDQUFDLDhCQUE4Qjs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDREQUE0RDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVU7QUFDMUI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG1DQUFtQztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsNkJBQTZCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsbUNBQW1DO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0NBQWdDO0FBQ3RELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4QkFBOEI7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsR0FBRztBQUMvQjtBQUNBLHVDQUF1QyxHQUFHO0FBQzFDO0FBQ0EsaUJBQWlCLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsVUFBVSxHQUFHO0FBQ3pFLGdDQUFnQyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGVBQWUsR0FBRztBQUN2RyxpQ0FBaUMsR0FBRztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxHQUFHLG1GQUFtRixHQUFHO0FBQ3JKO0FBQ0Esc0NBQXNDLHNCQUFzQixzQ0FBc0MsdUJBQXVCLE9BQU8sR0FBRyxjQUFjO0FBQ2pKO0FBQ0E7QUFDQSx1QkFBdUIseUJBQXlCLDREQUE0RCxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsaUNBQWlDLEVBQUUsU0FBUyxJQUFJLHlCQUF5QixJQUFJLEdBQUcsRUFBRSxhQUFhLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLG1DQUFtQyxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsaUNBQWlDLEVBQUUsU0FBUyxJQUFJLDBEQUEwRCxHQUFHO0FBQ3JuQjtBQUNBLGlEQUFpRCxJQUFJLGtDQUFrQyxLQUFLLDZDQUE2QyxLQUFLO0FBQzlJO0FBQ0EsZ0NBQWdDLEVBQUUsK0JBQStCLEVBQUUsMk5BQTJOLEVBQUU7QUFDaFMsaUdBQWlHLEdBQUc7QUFDcEc7QUFDQSw4QkFBOEIsRUFBRTtBQUNoQztBQUNBLDJCQUEyQixzQkFBc0IsS0FBSyxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBLCtFQUErRSxFQUFFO0FBQ2pGLG1GQUFtRixFQUFFO0FBQ3JGO0FBQ0EsZ0JBQWdCLElBQUksR0FBRyxFQUFFLGFBQWEsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksbUNBQW1DLEVBQUUsU0FBUyxJQUFJLE1BQU0sRUFBRSxpQ0FBaUMsRUFBRSxTQUFTLElBQUk7QUFDNVgsa0NBQWtDLElBQUksR0FBRyxJQUFJLFlBQVksSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGVBQWUsSUFBSSxHQUFHLElBQUksYUFBYSxJQUFJLGNBQWMsSUFBSSxHQUFHLElBQUksY0FBYyxJQUFJLEVBQUUsSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGNBQWMsSUFBSSxFQUFFLElBQUksY0FBYyxJQUFJLEdBQUcsSUFBSSxjQUFjLElBQUksRUFBRSxJQUFJLGNBQWMsSUFBSSxHQUFHLElBQUksY0FBYyxJQUFJLEVBQUUsSUFBSSxhQUFhLElBQUksZ0JBQWdCLElBQUksRUFBRSxJQUFJLGtCQUFrQixJQUFJLEVBQUUsSUFBSSx1QkFBdUIsSUFBSSxFQUFFLElBQUksYUFBYSxHQUFHLFlBQVksSUFBSSxFQUFFLElBQUksR0FBRyxJQUFJLG9CQUFvQixJQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksbUJBQW1CLElBQUksT0FBTyxJQUFJLG9CQUFvQixJQUFJLEdBQUcsSUFBSSxxQkFBcUIsSUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLG1CQUFtQixJQUFJLE9BQU8sSUFBSTtBQUNocUIsc0NBQXNDLElBQUksR0FBRyxJQUFJLFlBQVksSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGVBQWUsSUFBSSxHQUFHLElBQUksYUFBYSxJQUFJLGNBQWMsSUFBSSxHQUFHLElBQUksY0FBYyxJQUFJLEVBQUUsSUFBSSxjQUFjLElBQUksR0FBRyxJQUFJLGNBQWMsSUFBSSxFQUFFLElBQUksY0FBYyxJQUFJLEdBQUcsSUFBSSxjQUFjLElBQUksRUFBRSxJQUFJLGNBQWMsSUFBSSxHQUFHLElBQUksY0FBYyxJQUFJLEVBQUUsSUFBSSxhQUFhLElBQUksZ0JBQWdCLElBQUksRUFBRSxJQUFJLGtCQUFrQixJQUFJLEVBQUUsSUFBSSx1QkFBdUIsSUFBSSxFQUFFLElBQUksYUFBYSxHQUFHLFlBQVksSUFBSSxFQUFFLElBQUksR0FBRyxJQUFJLG9CQUFvQixJQUFJLE9BQU8sSUFBSSxVQUFVLElBQUksbUJBQW1CLElBQUksT0FBTyxJQUFJLG9CQUFvQixJQUFJLEdBQUcsSUFBSSxxQkFBcUIsSUFBSSxPQUFPLElBQUksVUFBVSxJQUFJLG1CQUFtQixJQUFJLE9BQU8sSUFBSTtBQUNwcUI7QUFDQSxxQ0FBcUMsRUFBRSxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRTtBQUNoRjtBQUNBLHdDQUF3QyxFQUFFLGtCQUFrQixFQUFFLHNCQUFzQixFQUFFO0FBQ3RGO0FBQ0EsZ0NBQWdDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNoRDtBQUNBLGdDQUFnQyxFQUFFO0FBQ2xDO0FBQ0EsbUhBQW1ILEVBQUU7QUFDckgsaUNBQWlDLGdCQUFnQjtBQUNqRDtBQUNBLHdCQUF3QixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDeEM7QUFDQTtBQUNBLG1CQUFtQixNQUFNLE9BQU8sRUFBRSxnQkFBZ0I7QUFDbEQ7QUFDQTtBQUNBLG1CQUFtQixNQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNCQUFzQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCLEdBQUcsc0JBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixFQUFFLE1BQU0sRUFBRTtBQUN0QyxlQUFlLE1BQU0sR0FBRyxlQUFlO0FBQ3ZDLDBCQUEwQixNQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaURBQWlEO0FBQ3ZGO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MseUJBQXlCO0FBQy9EO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsdUJBQXVCO0FBQzdEO0FBQ0EscUJBQXFCO0FBQ3JC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Q2pFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7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YUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixlQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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SztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrQkFBK0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRTJyRCIsInNvdXJjZXMiOlsid2VicGFjazovL2thbmJhbi1jbG9uZS1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL0BkdXN0LXR0L2NsaWVudC9ub2RlX21vZHVsZXMvem9kL2xpYi9pbmRleC5tanM/YzNiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbDtcbihmdW5jdGlvbiAodXRpbCkge1xuICAgIHV0aWwuYXNzZXJ0RXF1YWwgPSAodmFsKSA9PiB2YWw7XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBpc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5XG4gICAgICAgICAgICAubWFwKCh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiID8gYCcke3ZhbH0nYCA6IHZhbCkpXG4gICAgICAgICAgICAuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG52YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuY29uc3QgWm9kUGFyc2VkVHlwZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwic3RyaW5nXCIsXG4gICAgXCJuYW5cIixcbiAgICBcIm51bWJlclwiLFxuICAgIFwiaW50ZWdlclwiLFxuICAgIFwiZmxvYXRcIixcbiAgICBcImJvb2xlYW5cIixcbiAgICBcImRhdGVcIixcbiAgICBcImJpZ2ludFwiLFxuICAgIFwic3ltYm9sXCIsXG4gICAgXCJmdW5jdGlvblwiLFxuICAgIFwidW5kZWZpbmVkXCIsXG4gICAgXCJudWxsXCIsXG4gICAgXCJhcnJheVwiLFxuICAgIFwib2JqZWN0XCIsXG4gICAgXCJ1bmtub3duXCIsXG4gICAgXCJwcm9taXNlXCIsXG4gICAgXCJ2b2lkXCIsXG4gICAgXCJuZXZlclwiLFxuICAgIFwibWFwXCIsXG4gICAgXCJzZXRcIixcbl0pO1xuY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgICAgIGRhdGEuY2F0Y2ggJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcblxuY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmNsYXNzIFpvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaXNzdWVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgICAgIHRoaXMuYWRkSXNzdWUgPSAoc3ViKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3Vlcywgc3ViXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjdHVhbFByb3RvID0gbmV3LnRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYWN0dWFsUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX3Byb3RvX18gPSBhY3R1YWxQcm90bztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlpvZEVycm9yXCI7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzO1xuICAgIH1cbiAgICBmb3JtYXQoX21hcHBlcikge1xuICAgICAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWUubWVzc2FnZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0geyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF91bmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlLnVuaW9uRXJyb3JzLm1hcChwcm9jZXNzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUucmV0dXJuVHlwZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2FyZ3VtZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGVycm9yQXJyYXk6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXJyb3JBcnJheS5fZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IGVycm9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0uX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9jZXNzRXJyb3IodGhpcyk7XG4gICAgICAgIHJldHVybiBmaWVsZEVycm9ycztcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFpvZEVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZmxhdHRlbihtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG5cbmNvbnN0IGVycm9yTWFwID0gKGlzc3VlLCBfY3R4KSA9PiB7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgc3dpdGNoIChpc3N1ZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgICAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJSZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBFeHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHtpc3N1ZS5yZWNlaXZlZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgVW5yZWNvZ25pemVkIGtleShzKSBpbiBvYmplY3Q6ICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLmtleXMsIFwiLCBcIil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZW51bSB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9LCByZWNlaXZlZCAnJHtpc3N1ZS5yZWNlaXZlZH0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiBhcmd1bWVudHNgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkYXRlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChcImluY2x1ZGVzXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgaW5jbHVkZSBcIiR7aXNzdWUudmFsaWRhdGlvbi5pbmNsdWRlc31cImA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJzdGFydHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJlbmRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGVuZCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmVuZHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUudmFsaWRhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudmFsaWRhdGlvbiAhPT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19zbWFsbDpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBvdmVyYH0gJHtpc3N1ZS5taW5pbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgPyBgZXhhY3RseSBlcXVhbCB0byBgXG4gICAgICAgICAgICAgICAgICAgIDogaXNzdWUuaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgZ3JlYXRlciB0aGFuIGB9JHtpc3N1ZS5taW5pbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0XG4gICAgICAgICAgICAgICAgICAgID8gYGV4YWN0bHkgZXF1YWwgdG8gYFxuICAgICAgICAgICAgICAgICAgICA6IGlzc3VlLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgPyBgZXhhY3RseWBcbiAgICAgICAgICAgICAgICAgICAgOiBpc3N1ZS5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2BcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEJpZ0ludCBtdXN0IGJlICR7aXNzdWUuZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgPyBgZXhhY3RseWBcbiAgICAgICAgICAgICAgICAgICAgOiBpc3N1ZS5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2BcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdFxuICAgICAgICAgICAgICAgICAgICA/IGBleGFjdGx5YFxuICAgICAgICAgICAgICAgICAgICA6IGlzc3VlLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuXG5sZXQgb3ZlcnJpZGVFcnJvck1hcCA9IGVycm9yTWFwO1xuZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmZ1bmN0aW9uIGdldEVycm9yTWFwKCkge1xuICAgIHJldHVybiBvdmVycmlkZUVycm9yTWFwO1xufVxuXG5jb25zdCBtYWtlSXNzdWUgPSAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBwYXRoLCBlcnJvck1hcHMsIGlzc3VlRGF0YSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gWy4uLnBhdGgsIC4uLihpc3N1ZURhdGEucGF0aCB8fCBbXSldO1xuICAgIGNvbnN0IGZ1bGxJc3N1ZSA9IHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICB9O1xuICAgIGlmIChpc3N1ZURhdGEubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzc3VlRGF0YS5tZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICBjb25zdCBtYXBzID0gZXJyb3JNYXBzXG4gICAgICAgIC5maWx0ZXIoKG0pID0+ICEhbSlcbiAgICAgICAgLnNsaWNlKClcbiAgICAgICAgLnJldmVyc2UoKTtcbiAgICBmb3IgKGNvbnN0IG1hcCBvZiBtYXBzKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IG1hcChmdWxsSXNzdWUsIHsgZGF0YSwgZGVmYXVsdEVycm9yOiBlcnJvck1lc3NhZ2UgfSkubWVzc2FnZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgIH07XG59O1xuY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZnVuY3Rpb24gYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBpc3N1ZURhdGEpIHtcbiAgICBjb25zdCBvdmVycmlkZU1hcCA9IGdldEVycm9yTWFwKCk7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCAvLyBjb250ZXh0dWFsIGVycm9yIG1hcCBpcyBmaXJzdCBwcmlvcml0eVxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLCAvLyB0aGVuIHNjaGVtYS1ib3VuZCBtYXAgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBvdmVycmlkZU1hcCwgLy8gdGhlbiBnbG9iYWwgb3ZlcnJpZGUgbWFwXG4gICAgICAgICAgICBvdmVycmlkZU1hcCA9PT0gZXJyb3JNYXAgPyB1bmRlZmluZWQgOiBlcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5jbGFzcyBQYXJzZVN0YXR1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcInZhbGlkXCI7XG4gICAgfVxuICAgIGRpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJ2YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiZGlydHlcIjtcbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGFycmF5VmFsdWUucHVzaChzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsT2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKGtleS52YWx1ZSAhPT0gXCJfX3Byb3RvX19cIiAmJlxuICAgICAgICAgICAgICAgICh0eXBlb2YgdmFsdWUudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgfHwgcGFpci5hbHdheXNTZXQpKSB7XG4gICAgICAgICAgICAgICAgZmluYWxPYmplY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxPYmplY3QgfTtcbiAgICB9XG59XG5jb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuY29uc3QgRElSVFkgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJkaXJ0eVwiLCB2YWx1ZSB9KTtcbmNvbnN0IE9LID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWUgfSk7XG5jb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuY29uc3QgaXNEaXJ0eSA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJkaXJ0eVwiO1xuY29uc3QgaXNWYWxpZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJ2YWxpZFwiO1xuY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbnZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG5cbnZhciBfWm9kRW51bV9jYWNoZSwgX1pvZE5hdGl2ZUVudW1fY2FjaGU7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9rZXkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgIT09IG51bGwgJiYgbWVzc2FnZSAhPT0gdm9pZCAwID8gbWVzc2FnZSA6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiAoX2EgPSBtZXNzYWdlICE9PSBudWxsICYmIG1lc3NhZ2UgIT09IHZvaWQgMCA/IG1lc3NhZ2UgOiByZXF1aXJlZF9lcnJvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogKF9iID0gbWVzc2FnZSAhPT0gbnVsbCAmJiBtZXNzYWdlICE9PSB2b2lkIDAgPyBtZXNzYWdlIDogaW52YWxpZF90eXBlX2Vycm9yKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBlcnJvck1hcDogY3VzdG9tTWFwLCBkZXNjcmlwdGlvbiB9O1xufVxuY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuYXN5bmMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmVycm9yTWFwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMucGF0aCkgfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmICgoX2IgPSAoX2EgPSBlcnIgPT09IG51bGwgfHwgZXJyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnIubWVzc2FnZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvTG93ZXJDYXNlKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLnBhdGgpIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpXG4gICAgICAgICAgICA/IG1heWJlQXN5bmNSZXN1bHRcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpXG4gICAgICAgICAgICAgICAgICAgIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgLy8gbGV0IHJlZ2V4ID0gYFxcXFxkezJ9OlxcXFxkezJ9OlxcXFxkezJ9YDtcbiAgICBsZXQgcmVnZXggPSBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQ6WzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHJlZ2V4ID0gYCR7cmVnZXh9XFxcXC5cXFxcZHske2FyZ3MucHJlY2lzaW9ufX1gO1xuICAgIH1cbiAgICBlbHNlIGlmIChhcmdzLnByZWNpc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIHJlZ2V4ID0gYCR7cmVnZXh9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICByZXR1cm4gcmVnZXg7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5mdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICAvLyBDb252ZXJ0IGJhc2U2NHVybCB0byBiYXNlNjRcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gaGVhZGVyXG4gICAgICAgICAgICAucmVwbGFjZSgvLS9nLCBcIitcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fL2csIFwiL1wiKVxuICAgICAgICAgICAgLnBhZEVuZChoZWFkZXIubGVuZ3RoICsgKCg0IC0gKGhlYWRlci5sZW5ndGggJSA0KSkgJSA0KSwgXCI9XCIpO1xuICAgICAgICBjb25zdCBkZWNvZGVkID0gSlNPTi5wYXJzZShhdG9iKGJhc2U2NCkpO1xuICAgICAgICBpZiAodHlwZW9mIGRlY29kZWQgIT09IFwib2JqZWN0XCIgfHwgZGVjb2RlZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkZWNvZGVkLnR5cCB8fCAhZGVjb2RlZC5hbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChhbGcgJiYgZGVjb2RlZC5hbGcgIT09IGFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZENpZHIoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NENpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIGNoZWNrLnJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IGNoZWNrLnJlZ2V4LnRlc3QoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0ZXN0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwicmVnZXhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRyaW1cIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW5jbHVkZXNcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5pbmNsdWRlcyhjaGVjay52YWx1ZSwgY2hlY2sucG9zaXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IHsgaW5jbHVkZXM6IGNoZWNrLnZhbHVlLCBwb3NpdGlvbjogY2hlY2sucG9zaXRpb24gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvTG93ZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b1VwcGVyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwic3RhcnRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLnN0YXJ0c1dpdGgoY2hlY2sudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IHsgc3RhcnRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVuZHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuZW5kc1dpdGgoY2hlY2sudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IHsgZW5kc1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRldGltZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBkYXRldGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBkYXRlUmVnZXg7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSB0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImR1cmF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWR1cmF0aW9uUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImR1cmF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpcFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSVAoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJpcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiand0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRKV1QoaW5wdXQuZGF0YSwgY2hlY2suYWxnKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImp3dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY2lkclwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkQ2lkcihpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImNpZHJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjR1cmxcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0dXJsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfcmVnZXgocmVnZXgsIHZhbGlkYXRpb24sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmaW5lbWVudCgoZGF0YSkgPT4gcmVnZXgudGVzdChkYXRhKSwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbixcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbWFpbChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1haWxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1cmwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVybFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGVtb2ppKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbW9qaVwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHV1aWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInV1aWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBuYW5vaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcIm5hbm9pZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkMihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZDJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1bGlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1bGlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJiYXNlNjRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjR1cmwobWVzc2FnZSkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGp3dChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiand0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgaXAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImlwXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgY2lkcihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY2lkclwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGRhdGV0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICBwcmVjaXNpb246IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbikgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9mZnNldCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgICAgICBsb2NhbDogKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmxvY2FsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkYXRlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkYXRlXCIsIG1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIHRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJ0aW1lXCIsXG4gICAgICAgICAgICBwcmVjaXNpb246IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbikgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucG9zaXRpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBwYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBwYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICByZXR1cm4gKHZhbEludCAlIHN0ZXBJbnQpIC8gTWF0aC5wb3coMTAsIGRlY0NvdW50KTtcbn1cbmNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8XG4gICAgICAgICAgICAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGwsIG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHxcbiAgICAgICAgICAgICAgICBjaC5raW5kID09PSBcImludFwiIHx8XG4gICAgICAgICAgICAgICAgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oaW5wdXQuZGF0YS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKGlucHV0LmRhdGEuZ2V0VGltZSgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtaW4obWluRGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5EYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhEYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pbkRhdGUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbiAhPSBudWxsID8gbmV3IERhdGUobWluKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBtYXhEYXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXggIT0gbnVsbCA/IG5ldyBEYXRlKG1heCkgOiBudWxsO1xuICAgIH1cbn1cblpvZERhdGUuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIGNvZXJjZTogKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5jb2VyY2UpIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RTeW1ib2wgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3ltYm9sLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFN5bWJvbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTeW1ib2woe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RBbnkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gdG8gcHJldmVudCBpbnN0YW5jZXMgb2Ygb3RoZXIgY2xhc3NlcyBmcm9tIGV4dGVuZGluZyBab2RBbnkuIHRoaXMgY2F1c2VzIGlzc3VlcyB3aXRoIGNhdGNoYWxsIGluIFpvZE9iamVjdC5cbiAgICAgICAgdGhpcy5fYW55ID0gdHJ1ZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RBbnkuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQW55KHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RWb2lkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnZvaWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVm9pZC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RWb2lkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHJldHVybiAodGhpcy5fY2FjaGVkID0geyBzaGFwZSwga2V5cyB9KTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJlxuICAgICAgICAgICAgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLl9kZWYpLmVycm9yTWFwKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgaXNzdWUsIGN0eCkubWVzc2FnZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKF9kID0gZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIHV0aWwub2JqZWN0S2V5cyhtYXNrKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXNrW2tleV0gJiYgdGhpcy5zaGFwZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gZmllbGRTY2hlbWEub3B0aW9uYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RmllbGQgPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV3RmllbGQgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdGaWVsZCA9IG5ld0ZpZWxkLl9kZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gbmV3RmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuY2xhc3MgWm9kRGlzY3JpbWluYXRlZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3IgPSB0aGlzLmRpc2NyaW1pbmF0b3I7XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZSA9IGN0eC5kYXRhW2Rpc2NyaW1pbmF0b3JdO1xuICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNNYXAuZ2V0KGRpc2NyaW1pbmF0b3JWYWx1ZSk7XG4gICAgICAgIGlmICghb3B0aW9uKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5LmZyb20odGhpcy5vcHRpb25zTWFwLmtleXMoKSksXG4gICAgICAgICAgICAgICAgcGF0aDogW2Rpc2NyaW1pbmF0b3JdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGlzY3JpbWluYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kaXNjcmltaW5hdG9yO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zO1xuICAgIH1cbiAgICBnZXQgb3B0aW9uc01hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3Igb2YgdGhlIGRpc2NyaW1pbmF0ZWQgdW5pb24gc2NoZW1hLiBJdHMgYmVoYXZpb3VyIGlzIHZlcnkgc2ltaWxhciB0byB0aGF0IG9mIHRoZSBub3JtYWwgei51bmlvbigpIGNvbnN0cnVjdG9yLlxuICAgICAqIEhvd2V2ZXIsIGl0IG9ubHkgYWxsb3dzIGEgdW5pb24gb2Ygb2JqZWN0cywgYWxsIG9mIHdoaWNoIG5lZWQgdG8gc2hhcmUgYSBkaXNjcmltaW5hdG9yIHByb3BlcnR5LiBUaGlzIHByb3BlcnR5IG11c3RcbiAgICAgKiBoYXZlIGEgZGlmZmVyZW50IHZhbHVlIGZvciBlYWNoIG9iamVjdCBpbiB0aGUgdW5pb24uXG4gICAgICogQHBhcmFtIGRpc2NyaW1pbmF0b3IgdGhlIG5hbWUgb2YgdGhlIGRpc2NyaW1pbmF0b3IgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gdHlwZXMgYW4gYXJyYXkgb2Ygb2JqZWN0IHNjaGVtYXNcbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkaXNjcmltaW5hdG9yLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICAgICAgLy8gR2V0IGFsbCB0aGUgdmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZXNcbiAgICAgICAgY29uc3Qgb3B0aW9uc01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZXMgPSBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2hhcGVbZGlzY3JpbWluYXRvcl0pO1xuICAgICAgICAgICAgaWYgKCFkaXNjcmltaW5hdG9yVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQSBkaXNjcmltaW5hdG9yIHZhbHVlIGZvciBrZXkgXFxgJHtkaXNjcmltaW5hdG9yfVxcYCBjb3VsZCBub3QgYmUgZXh0cmFjdGVkIGZyb20gYWxsIHNjaGVtYSBvcHRpb25zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRpc2NyaW1pbmF0b3JWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc01hcC5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGlzY3JpbWluYXRvciBwcm9wZXJ0eSAke1N0cmluZyhkaXNjcmltaW5hdG9yKX0gaGFzIGR1cGxpY2F0ZSB2YWx1ZSAke1N0cmluZyh2YWx1ZSl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbnNNYXAuc2V0KHZhbHVlLCB0eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZERpc2NyaW1pbmF0ZWRVbmlvbih7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERpc2NyaW1pbmF0ZWRVbmlvbixcbiAgICAgICAgICAgIGRpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgb3B0aW9uc01hcCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbWVyZ2VWYWx1ZXMoYSwgYikge1xuICAgIGNvbnN0IGFUeXBlID0gZ2V0UGFyc2VkVHlwZShhKTtcbiAgICBjb25zdCBiVHlwZSA9IGdldFBhcnNlZFR5cGUoYik7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0ICYmIGJUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICBjb25zdCBiS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhiKTtcbiAgICAgICAgY29uc3Qgc2hhcmVkS2V5cyA9IHV0aWxcbiAgICAgICAgICAgIC5vYmplY3RLZXlzKGEpXG4gICAgICAgICAgICAuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJlxuICAgICAgICBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmXG4gICAgICAgICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuY2xhc3MgWm9kSW50ZXJzZWN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGhhbmRsZVBhcnNlZCA9IChwYXJzZWRMZWZ0LCBwYXJzZWRSaWdodCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzQWJvcnRlZChwYXJzZWRMZWZ0KSB8fCBpc0Fib3J0ZWQocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBtZXJnZVZhbHVlcyhwYXJzZWRMZWZ0LnZhbHVlLCBwYXJzZWRSaWdodC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIW1lcmdlZC52YWxpZCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNEaXJ0eShwYXJzZWRMZWZ0KSB8fCBpc0RpcnR5KHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBtZXJnZWQuZGF0YSB9O1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYubGVmdC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pLnRoZW4oKFtsZWZ0LCByaWdodF0pID0+IGhhbmRsZVBhcnNlZChsZWZ0LCByaWdodCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVBhcnNlZCh0aGlzLl9kZWYubGVmdC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pLCB0aGlzLl9kZWYucmlnaHQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RJbnRlcnNlY3Rpb24uY3JlYXRlID0gKGxlZnQsIHJpZ2h0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEludGVyc2VjdGlvbih7XG4gICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgIHJpZ2h0OiByaWdodCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RUdXBsZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICBtaW5pbXVtOiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN0ID0gdGhpcy5fZGVmLnJlc3Q7XG4gICAgICAgIGlmICghcmVzdCAmJiBjdHguZGF0YS5sZW5ndGggPiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICBtYXhpbXVtOiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IFsuLi5jdHguZGF0YV1cbiAgICAgICAgICAgIC5tYXAoKGl0ZW0sIGl0ZW1JbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5fZGVmLml0ZW1zW2l0ZW1JbmRleF0gfHwgdGhpcy5fZGVmLnJlc3Q7XG4gICAgICAgICAgICBpZiAoIXNjaGVtYSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaXRlbUluZGV4KSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmlsdGVyKCh4KSA9PiAhIXgpOyAvLyBmaWx0ZXIgbnVsbHNcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChpdGVtcykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZUFycmF5KHN0YXR1cywgaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pdGVtcztcbiAgICB9XG4gICAgcmVzdChyZXN0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmVzdCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kVHVwbGUuY3JlYXRlID0gKHNjaGVtYXMsIHBhcmFtcykgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzY2hlbWFzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IG9mIHNjaGVtYXMgdG8gei50dXBsZShbIC4uLiBdKVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgIGl0ZW1zOiBzY2hlbWFzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlLFxuICAgICAgICByZXN0OiBudWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RTZXQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnNldCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zZXQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChkZWYubWluU2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPCBkZWYubWluU2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluU2l6ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5taW5TaXplLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhTaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA+IGRlZi5tYXhTaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4U2l6ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5tYXhTaXplLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZnVuY3Rpb24gZmluYWxpemVTZXQoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICBwYXJzZWRTZXQuYWRkKGVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBwYXJzZWRTZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IFsuLi5jdHguZGF0YS52YWx1ZXMoKV0ubWFwKChpdGVtLCBpKSA9PiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpKTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChlbGVtZW50cykudGhlbigoZWxlbWVudHMpID0+IGZpbmFsaXplU2V0KGVsZW1lbnRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVTZXQoZWxlbWVudHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pbihtaW5TaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1pblNpemU6IHsgdmFsdWU6IG1pblNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heFNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4U2l6ZTogeyB2YWx1ZTogbWF4U2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaXplKHNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKHNpemUsIG1lc3NhZ2UpLm1heChzaXplLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kU2V0LmNyZWF0ZSA9ICh2YWx1ZVR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgdmFsdWVUeXBlLFxuICAgICAgICBtaW5TaXplOiBudWxsLFxuICAgICAgICBtYXhTaXplOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFNldCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLFxuICAgICAgICAgICAgICAgICAgICBnZXRFcnJvck1hcCgpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcCxcbiAgICAgICAgICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZXR1cm5zSXNzdWUocmV0dXJucywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHJldHVybnMsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgICAgICAgICBjdHguc2NoZW1hRXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgICAgIGdldEVycm9yTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWFwLFxuICAgICAgICAgICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3NcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuYWRkSXNzdWUobWFrZUFyZ3NJc3N1ZShhcmdzLCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJlZmxlY3QuYXBwbHkoZm4sIHRoaXMsIHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBhd2FpdCBtZS5fZGVmLnJldHVybnMuX2RlZi50eXBlXG4gICAgICAgICAgICAgICAgICAgIC5wYXJzZUFzeW5jKHJlc3VsdCwgcGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuYWRkSXNzdWUobWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBtZS5fZGVmLmFyZ3Muc2FmZVBhcnNlKGFyZ3MsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRBcmdzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlQXJnc0lzc3VlKGFyZ3MsIHBhcnNlZEFyZ3MuZXJyb3IpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkoZm4sIHRoaXMsIHBhcnNlZEFyZ3MuZGF0YSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IG1lLl9kZWYucmV0dXJucy5zYWZlUGFyc2UocmVzdWx0LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkUmV0dXJucy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIHBhcnNlZFJldHVybnMuZXJyb3IpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXJhbWV0ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmFyZ3M7XG4gICAgfVxuICAgIHJldHVyblR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYucmV0dXJucztcbiAgICB9XG4gICAgYXJncyguLi5pdGVtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGFyZ3M6IFpvZFR1cGxlLmNyZWF0ZShpdGVtcykucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybnMocmV0dXJuVHlwZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVyblR5cGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0cmljdEltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhcmdzLCByZXR1cm5zLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICBhcmdzOiAoYXJnc1xuICAgICAgICAgICAgICAgID8gYXJnc1xuICAgICAgICAgICAgICAgIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNsYXNzIFpvZExhenkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGxhenlTY2hlbWEgPSB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgICAgIHJldHVybiBsYXp5U2NoZW1hLl9wYXJzZSh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgfVxufVxuWm9kTGF6eS5jcmVhdGUgPSAoZ2V0dGVyLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExhenkoe1xuICAgICAgICBnZXR0ZXI6IGdldHRlcixcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMYXp5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBfWm9kRW51bV9jYWNoZS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLl9kZWYudmFsdWVzO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kRW51bV9jYWNoZSwgXCJmXCIpKSB7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9ab2RFbnVtX2NhY2hlLCBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpLCBcImZcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9ab2RFbnVtX2NhY2hlLCBcImZcIikuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuX1pvZEVudW1fY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBfWm9kTmF0aXZlRW51bV9jYWNoZS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IG5hdGl2ZUVudW1WYWx1ZXMgPSB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3RyaW5nICYmXG4gICAgICAgICAgICBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9ab2ROYXRpdmVFbnVtX2NhY2hlLCBcImZcIikpIHtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX1pvZE5hdGl2ZUVudW1fY2FjaGUsIG5ldyBTZXQodXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcykpLCBcImZcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9ab2ROYXRpdmVFbnVtX2NhY2hlLCBcImZcIikuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWUsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogZXhwZWN0ZWRWYWx1ZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVzO1xuICAgIH1cbn1cbl9ab2ROYXRpdmVFbnVtX2NhY2hlID0gbmV3IFdlYWtNYXAoKTtcblpvZE5hdGl2ZUVudW0uY3JlYXRlID0gKHZhbHVlcywgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYXRpdmVFbnVtKHtcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJlxuICAgICAgICAgICAgY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUucHJvbWlzZSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2lmaWVkID0gY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZVxuICAgICAgICAgICAgPyBjdHguZGF0YVxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hXG4gICAgICAgICAgICAgICAgICAgIC5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGlubmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbm5lci52YWx1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZWZmZWN0LnRyYW5zZm9ybShiYXNlLnZhbHVlLCBjaGVja0N0eCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBc3luY2hyb25vdXMgdHJhbnNmb3JtIGVuY291bnRlcmVkIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZSBvcGVyYXRpb24uIFVzZSAucGFyc2VBc3luYyBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHJlc3VsdCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoeyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHJlc3VsdCB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2ROdWxsYWJsZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyhudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE51bGxhYmxlLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGxhYmxlKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBwYXJhbXMuZGVmYXVsdFxuICAgICAgICAgICAgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZENhdGNoIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICAvLyBuZXdDdHggaXMgdXNlZCB0byBub3QgY29sbGVjdCBpc3N1ZXMgZnJvbSBpbm5lciB0eXBlcyBpbiBjdHhcbiAgICAgICAgY29uc3QgbmV3Q3R4ID0ge1xuICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YTogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICBwYXRoOiBuZXdDdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgIC4uLm5ld0N0eCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNBc3luYyhyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlc3VsdC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFpvZEVycm9yKG5ld0N0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlc3VsdC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFpvZEVycm9yKG5ld0N0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVDYXRjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kQ2F0Y2guY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQ2F0Y2gsXG4gICAgICAgIGNhdGNoVmFsdWU6IHR5cGVvZiBwYXJhbXMuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5jYXRjaCA6ICgpID0+IHBhcmFtcy5jYXRjaCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmNsYXNzIFpvZEJyYW5kZWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbn1cbmNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5jbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdClcbiAgICAgICAgICAgID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSlcbiAgICAgICAgICAgIDogZnJlZXplKHJlc3VsdCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kUmVhZG9ubHkuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUmVhZG9ubHkoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgei5jdXN0b20gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5mdW5jdGlvbiBjbGVhblBhcmFtcyhwYXJhbXMsIGRhdGEpIHtcbiAgICBjb25zdCBwID0gdHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gcGFyYW1zKGRhdGEpXG4gICAgICAgIDogdHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9XG4gICAgICAgICAgICA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IChfYiA9IChfYSA9IHBhcmFtcy5mYXRhbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmF0YWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IChfYiA9IChfYSA9IHBhcmFtcy5mYXRhbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmF0YWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWU7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpO1xufVxuY29uc3QgbGF0ZSA9IHtcbiAgICBvYmplY3Q6IFpvZE9iamVjdC5sYXp5Y3JlYXRlLFxufTtcbnZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5jb25zdCBORVZFUiA9IElOVkFMSUQ7XG5cbnZhciB6ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBkZWZhdWx0RXJyb3JNYXA6IGVycm9yTWFwLFxuICAgIHNldEVycm9yTWFwOiBzZXRFcnJvck1hcCxcbiAgICBnZXRFcnJvck1hcDogZ2V0RXJyb3JNYXAsXG4gICAgbWFrZUlzc3VlOiBtYWtlSXNzdWUsXG4gICAgRU1QVFlfUEFUSDogRU1QVFlfUEFUSCxcbiAgICBhZGRJc3N1ZVRvQ29udGV4dDogYWRkSXNzdWVUb0NvbnRleHQsXG4gICAgUGFyc2VTdGF0dXM6IFBhcnNlU3RhdHVzLFxuICAgIElOVkFMSUQ6IElOVkFMSUQsXG4gICAgRElSVFk6IERJUlRZLFxuICAgIE9LOiBPSyxcbiAgICBpc0Fib3J0ZWQ6IGlzQWJvcnRlZCxcbiAgICBpc0RpcnR5OiBpc0RpcnR5LFxuICAgIGlzVmFsaWQ6IGlzVmFsaWQsXG4gICAgaXNBc3luYzogaXNBc3luYyxcbiAgICBnZXQgdXRpbCAoKSB7IHJldHVybiB1dGlsOyB9LFxuICAgIGdldCBvYmplY3RVdGlsICgpIHsgcmV0dXJuIG9iamVjdFV0aWw7IH0sXG4gICAgWm9kUGFyc2VkVHlwZTogWm9kUGFyc2VkVHlwZSxcbiAgICBnZXRQYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlLFxuICAgIFpvZFR5cGU6IFpvZFR5cGUsXG4gICAgZGF0ZXRpbWVSZWdleDogZGF0ZXRpbWVSZWdleCxcbiAgICBab2RTdHJpbmc6IFpvZFN0cmluZyxcbiAgICBab2ROdW1iZXI6IFpvZE51bWJlcixcbiAgICBab2RCaWdJbnQ6IFpvZEJpZ0ludCxcbiAgICBab2RCb29sZWFuOiBab2RCb29sZWFuLFxuICAgIFpvZERhdGU6IFpvZERhdGUsXG4gICAgWm9kU3ltYm9sOiBab2RTeW1ib2wsXG4gICAgWm9kVW5kZWZpbmVkOiBab2RVbmRlZmluZWQsXG4gICAgWm9kTnVsbDogWm9kTnVsbCxcbiAgICBab2RBbnk6IFpvZEFueSxcbiAgICBab2RVbmtub3duOiBab2RVbmtub3duLFxuICAgIFpvZE5ldmVyOiBab2ROZXZlcixcbiAgICBab2RWb2lkOiBab2RWb2lkLFxuICAgIFpvZEFycmF5OiBab2RBcnJheSxcbiAgICBab2RPYmplY3Q6IFpvZE9iamVjdCxcbiAgICBab2RVbmlvbjogWm9kVW5pb24sXG4gICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uOiBab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgWm9kSW50ZXJzZWN0aW9uOiBab2RJbnRlcnNlY3Rpb24sXG4gICAgWm9kVHVwbGU6IFpvZFR1cGxlLFxuICAgIFpvZFJlY29yZDogWm9kUmVjb3JkLFxuICAgIFpvZE1hcDogWm9kTWFwLFxuICAgIFpvZFNldDogWm9kU2V0LFxuICAgIFpvZEZ1bmN0aW9uOiBab2RGdW5jdGlvbixcbiAgICBab2RMYXp5OiBab2RMYXp5LFxuICAgIFpvZExpdGVyYWw6IFpvZExpdGVyYWwsXG4gICAgWm9kRW51bTogWm9kRW51bSxcbiAgICBab2ROYXRpdmVFbnVtOiBab2ROYXRpdmVFbnVtLFxuICAgIFpvZFByb21pc2U6IFpvZFByb21pc2UsXG4gICAgWm9kRWZmZWN0czogWm9kRWZmZWN0cyxcbiAgICBab2RUcmFuc2Zvcm1lcjogWm9kRWZmZWN0cyxcbiAgICBab2RPcHRpb25hbDogWm9kT3B0aW9uYWwsXG4gICAgWm9kTnVsbGFibGU6IFpvZE51bGxhYmxlLFxuICAgIFpvZERlZmF1bHQ6IFpvZERlZmF1bHQsXG4gICAgWm9kQ2F0Y2g6IFpvZENhdGNoLFxuICAgIFpvZE5hTjogWm9kTmFOLFxuICAgIEJSQU5EOiBCUkFORCxcbiAgICBab2RCcmFuZGVkOiBab2RCcmFuZGVkLFxuICAgIFpvZFBpcGVsaW5lOiBab2RQaXBlbGluZSxcbiAgICBab2RSZWFkb25seTogWm9kUmVhZG9ubHksXG4gICAgY3VzdG9tOiBjdXN0b20sXG4gICAgU2NoZW1hOiBab2RUeXBlLFxuICAgIFpvZFNjaGVtYTogWm9kVHlwZSxcbiAgICBsYXRlOiBsYXRlLFxuICAgIGdldCBab2RGaXJzdFBhcnR5VHlwZUtpbmQgKCkgeyByZXR1cm4gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kOyB9LFxuICAgIGNvZXJjZTogY29lcmNlLFxuICAgIGFueTogYW55VHlwZSxcbiAgICBhcnJheTogYXJyYXlUeXBlLFxuICAgIGJpZ2ludDogYmlnSW50VHlwZSxcbiAgICBib29sZWFuOiBib29sZWFuVHlwZSxcbiAgICBkYXRlOiBkYXRlVHlwZSxcbiAgICBkaXNjcmltaW5hdGVkVW5pb246IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUsXG4gICAgZWZmZWN0OiBlZmZlY3RzVHlwZSxcbiAgICAnZW51bSc6IGVudW1UeXBlLFxuICAgICdmdW5jdGlvbic6IGZ1bmN0aW9uVHlwZSxcbiAgICAnaW5zdGFuY2VvZic6IGluc3RhbmNlT2ZUeXBlLFxuICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uVHlwZSxcbiAgICBsYXp5OiBsYXp5VHlwZSxcbiAgICBsaXRlcmFsOiBsaXRlcmFsVHlwZSxcbiAgICBtYXA6IG1hcFR5cGUsXG4gICAgbmFuOiBuYW5UeXBlLFxuICAgIG5hdGl2ZUVudW06IG5hdGl2ZUVudW1UeXBlLFxuICAgIG5ldmVyOiBuZXZlclR5cGUsXG4gICAgJ251bGwnOiBudWxsVHlwZSxcbiAgICBudWxsYWJsZTogbnVsbGFibGVUeXBlLFxuICAgIG51bWJlcjogbnVtYmVyVHlwZSxcbiAgICBvYmplY3Q6IG9iamVjdFR5cGUsXG4gICAgb2Jvb2xlYW46IG9ib29sZWFuLFxuICAgIG9udW1iZXI6IG9udW1iZXIsXG4gICAgb3B0aW9uYWw6IG9wdGlvbmFsVHlwZSxcbiAgICBvc3RyaW5nOiBvc3RyaW5nLFxuICAgIHBpcGVsaW5lOiBwaXBlbGluZVR5cGUsXG4gICAgcHJlcHJvY2VzczogcHJlcHJvY2Vzc1R5cGUsXG4gICAgcHJvbWlzZTogcHJvbWlzZVR5cGUsXG4gICAgcmVjb3JkOiByZWNvcmRUeXBlLFxuICAgIHNldDogc2V0VHlwZSxcbiAgICBzdHJpY3RPYmplY3Q6IHN0cmljdE9iamVjdFR5cGUsXG4gICAgc3RyaW5nOiBzdHJpbmdUeXBlLFxuICAgIHN5bWJvbDogc3ltYm9sVHlwZSxcbiAgICB0cmFuc2Zvcm1lcjogZWZmZWN0c1R5cGUsXG4gICAgdHVwbGU6IHR1cGxlVHlwZSxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkVHlwZSxcbiAgICB1bmlvbjogdW5pb25UeXBlLFxuICAgIHVua25vd246IHVua25vd25UeXBlLFxuICAgICd2b2lkJzogdm9pZFR5cGUsXG4gICAgTkVWRVI6IE5FVkVSLFxuICAgIFpvZElzc3VlQ29kZTogWm9kSXNzdWVDb2RlLFxuICAgIHF1b3RlbGVzc0pzb246IHF1b3RlbGVzc0pzb24sXG4gICAgWm9kRXJyb3I6IFpvZEVycm9yXG59KTtcblxuZXhwb3J0IHsgQlJBTkQsIERJUlRZLCBFTVBUWV9QQVRILCBJTlZBTElELCBORVZFUiwgT0ssIFBhcnNlU3RhdHVzLCBab2RUeXBlIGFzIFNjaGVtYSwgWm9kQW55LCBab2RBcnJheSwgWm9kQmlnSW50LCBab2RCb29sZWFuLCBab2RCcmFuZGVkLCBab2RDYXRjaCwgWm9kRGF0ZSwgWm9kRGVmYXVsdCwgWm9kRGlzY3JpbWluYXRlZFVuaW9uLCBab2RFZmZlY3RzLCBab2RFbnVtLCBab2RFcnJvciwgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLCBab2RGdW5jdGlvbiwgWm9kSW50ZXJzZWN0aW9uLCBab2RJc3N1ZUNvZGUsIFpvZExhenksIFpvZExpdGVyYWwsIFpvZE1hcCwgWm9kTmFOLCBab2ROYXRpdmVFbnVtLCBab2ROZXZlciwgWm9kTnVsbCwgWm9kTnVsbGFibGUsIFpvZE51bWJlciwgWm9kT2JqZWN0LCBab2RPcHRpb25hbCwgWm9kUGFyc2VkVHlwZSwgWm9kUGlwZWxpbmUsIFpvZFByb21pc2UsIFpvZFJlYWRvbmx5LCBab2RSZWNvcmQsIFpvZFR5cGUgYXMgWm9kU2NoZW1hLCBab2RTZXQsIFpvZFN0cmluZywgWm9kU3ltYm9sLCBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyLCBab2RUdXBsZSwgWm9kVHlwZSwgWm9kVW5kZWZpbmVkLCBab2RVbmlvbiwgWm9kVW5rbm93biwgWm9kVm9pZCwgYWRkSXNzdWVUb0NvbnRleHQsIGFueVR5cGUgYXMgYW55LCBhcnJheVR5cGUgYXMgYXJyYXksIGJpZ0ludFR5cGUgYXMgYmlnaW50LCBib29sZWFuVHlwZSBhcyBib29sZWFuLCBjb2VyY2UsIGN1c3RvbSwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGF0ZXRpbWVSZWdleCwgeiBhcyBkZWZhdWx0LCBlcnJvck1hcCBhcyBkZWZhdWx0RXJyb3JNYXAsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgZ2V0RXJyb3JNYXAsIGdldFBhcnNlZFR5cGUsIGluc3RhbmNlT2ZUeXBlIGFzIGluc3RhbmNlb2YsIGludGVyc2VjdGlvblR5cGUgYXMgaW50ZXJzZWN0aW9uLCBpc0Fib3J0ZWQsIGlzQXN5bmMsIGlzRGlydHksIGlzVmFsaWQsIGxhdGUsIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1ha2VJc3N1ZSwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYmplY3RVdGlsLCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHF1b3RlbGVzc0pzb24sIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc2V0RXJyb3JNYXAsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHV0aWwsIHZvaWRUeXBlIGFzIHZvaWQsIHogfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@dust-tt/client/node_modules/zod/lib/index.mjs\n");

/***/ })

};
;